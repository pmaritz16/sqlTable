var El=Object.defineProperty;var kl=(o,n,r)=>n in o?El(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r;var Fe=(o,n,r)=>kl(o,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();function me(){}function kr(o){return o()}function Bn(){return Object.create(null)}function Ve(o){o.forEach(kr)}function qr(o){return typeof o=="function"}function et(o,n){return o!=o?n==n:o!==n||o&&typeof o=="object"||typeof o=="function"}function ql(o){return Object.keys(o).length===0}const Sl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function m(o,n){o.appendChild(n)}function W(o,n,r){o.insertBefore(n,r||null)}function Q(o){o.parentNode&&o.parentNode.removeChild(o)}function ct(o,n){for(let r=0;r<o.length;r+=1)o[r]&&o[r].d(n)}function y(o){return document.createElement(o)}function D(o){return document.createTextNode(o)}function F(){return D(" ")}function Sr(){return D("")}function ve(o,n,r,i){return o.addEventListener(n,r,i),()=>o.removeEventListener(n,r,i)}function E(o,n,r){r==null?o.removeAttribute(n):o.getAttribute(n)!==r&&o.setAttribute(n,r)}function Cl(o){return Array.from(o.childNodes)}function se(o,n){n=""+n,o.data!==n&&(o.data=n)}function nn(o,n){o.value=n??""}function Hn(o,n,r){for(let i=0;i<o.options.length;i+=1){const s=o.options[i];if(s.__value===n){s.selected=!0;return}}o.selectedIndex=-1}function Pl(o,n,{bubbles:r=!1,cancelable:i=!1}={}){return new CustomEvent(o,{detail:n,bubbles:r,cancelable:i})}let yt;function vt(o){yt=o}function Cr(){if(!yt)throw new Error("Function called outside component initialization");return yt}function Pr(o){Cr().$$.on_mount.push(o)}function Ot(){const o=Cr();return(n,r,{cancelable:i=!1}={})=>{const s=o.$$.callbacks[n];if(s){const c=Pl(n,r,{cancelable:i});return s.slice().forEach(f=>{f.call(o,c)}),!c.defaultPrevented}return!0}}const ut=[],Xn=[];let ft=[];const Jn=[],Tl=Promise.resolve();let rn=!1;function Ll(){rn||(rn=!0,Tl.then(Tr))}function ln(o){ft.push(o)}const tn=new Set;let at=0;function Tr(){if(at!==0)return;const o=yt;do{try{for(;at<ut.length;){const n=ut[at];at++,vt(n),Al(n.$$)}}catch(n){throw ut.length=0,at=0,n}for(vt(null),ut.length=0,at=0;Xn.length;)Xn.pop()();for(let n=0;n<ft.length;n+=1){const r=ft[n];tn.has(r)||(tn.add(r),r())}ft.length=0}while(ut.length);for(;Jn.length;)Jn.pop()();rn=!1,tn.clear(),vt(o)}function Al(o){if(o.fragment!==null){o.update(),Ve(o.before_update);const n=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,n),o.after_update.forEach(ln)}}function Ml(o){const n=[],r=[];ft.forEach(i=>o.indexOf(i)===-1?n.push(i):r.push(i)),r.forEach(i=>i()),ft=n}const Rt=new Set;let $e;function Lr(){$e={r:0,c:[],p:$e}}function Ar(){$e.r||Ve($e.c),$e=$e.p}function ze(o,n){o&&o.i&&(Rt.delete(o),o.i(n))}function je(o,n,r,i){if(o&&o.o){if(Rt.has(o))return;Rt.add(o),$e.c.push(()=>{Rt.delete(o),i&&(r&&o.d(1),i())}),o.o(n)}else i&&i()}function Te(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function Nl(o,n){o.d(1),n.delete(o.key)}function zl(o,n,r,i,s,c,f,h,p,u,b,v){let S=o.length,w=c.length,C=S;const T={};for(;C--;)T[o[C].key]=C;const k=[],L=new Map,N=new Map,te=[];for(C=w;C--;){const z=v(s,c,C),J=r(z);let re=f.get(J);re?te.push(()=>re.p(z,n)):(re=u(J,z),re.c()),L.set(J,k[C]=re),J in T&&N.set(J,Math.abs(C-T[J]))}const $=new Set,G=new Set;function X(z){ze(z,1),z.m(h,b),f.set(z.key,z),b=z.first,w--}for(;S&&w;){const z=k[w-1],J=o[S-1],re=z.key,A=J.key;z===J?(b=z.first,S--,w--):L.has(A)?!f.has(re)||$.has(re)?X(z):G.has(A)?S--:N.get(re)>N.get(A)?(G.add(re),X(z)):($.add(A),S--):(p(J,f),S--)}for(;S--;){const z=o[S];L.has(z.key)||p(z,f)}for(;w;)X(k[w-1]);return Ve(te),k}function ht(o){o&&o.c()}function tt(o,n,r){const{fragment:i,after_update:s}=o.$$;i&&i.m(n,r),ln(()=>{const c=o.$$.on_mount.map(kr).filter(qr);o.$$.on_destroy?o.$$.on_destroy.push(...c):Ve(c),o.$$.on_mount=[]}),s.forEach(ln)}function nt(o,n){const r=o.$$;r.fragment!==null&&(Ml(r.after_update),Ve(r.on_destroy),r.fragment&&r.fragment.d(n),r.on_destroy=r.fragment=null,r.ctx=[])}function Rl(o,n){o.$$.dirty[0]===-1&&(ut.push(o),Ll(),o.$$.dirty.fill(0)),o.$$.dirty[n/31|0]|=1<<n%31}function rt(o,n,r,i,s,c,f=null,h=[-1]){const p=yt;vt(o);const u=o.$$={fragment:null,ctx:[],props:c,update:me,not_equal:s,bound:Bn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:Bn(),dirty:h,skip_bound:!1,root:n.target||p.$$.root};f&&f(u.root);let b=!1;if(u.ctx=r?r(o,n.props||{},(v,S,...w)=>{const C=w.length?w[0]:S;return u.ctx&&s(u.ctx[v],u.ctx[v]=C)&&(!u.skip_bound&&u.bound[v]&&u.bound[v](C),b&&Rl(o,v)),S}):[],u.update(),b=!0,Ve(u.before_update),u.fragment=i?i(u.ctx):!1,n.target){if(n.hydrate){const v=Cl(n.target);u.fragment&&u.fragment.l(v),v.forEach(Q)}else u.fragment&&u.fragment.c();n.intro&&ze(o.$$.fragment),tt(o,n.target,n.anchor),Tr()}vt(p)}class lt{constructor(){Fe(this,"$$");Fe(this,"$$set")}$destroy(){nt(this,1),this.$destroy=me}$on(n,r){if(!qr(r))return me;const i=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return i.push(r),()=>{const s=i.indexOf(r);s!==-1&&i.splice(s,1)}}$set(n){this.$$set&&!ql(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Ol="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ol);class Dl{constructor(n){this.api=n,this.defaultConfigPath=null,this.defaultConfig={databasePath:"",csvFiles:[]}}async initialize(){this.defaultConfigPath=await this.api.getDefaultConfigPath();const n=await this.api.getDefaultDatabasePath();this.defaultConfig.databasePath=n}getDefaultConfigPath(){return this.defaultConfigPath}async createDefaultConfig(){try{return await this.api.createDefaultConfig(this.defaultConfig)}catch(n){return console.error("Error creating default config:",n),!1}}async loadConfig(n){try{return await this.api.loadConfig(n)}catch(r){return console.error("Error loading config:",r),null}}async saveConfig(n,r){try{return await this.api.saveConfig(n,r),!0}catch(i){return console.error("Error saving config:",i),!1}}validateConfig(n){return!(!n||!n.databasePath||!Array.isArray(n.csvFiles))}async selectConfigFile(){try{return await this.api.selectConfigFile({title:"Select Config File",filters:[{name:"JSON",extensions:["json"]}]})}catch(n){return console.error("Error selecting config file:",n),null}}async readConfigFileRaw(n){try{return await this.api.readConfigFileRaw(n)}catch(r){return console.error("Error reading config file raw:",r),null}}}function Il(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Fl(o){if(o.__esModule)return o;var n=o.default;if(typeof n=="function"){var r=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var s=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return o[i]}})}),r}var Mr={exports:{}};const jl={},Vl=Object.freeze(Object.defineProperty({__proto__:null,default:jl},Symbol.toStringTag,{value:"Module"})),Gn=Fl(Vl);(function(o,n){var r=void 0,i=function(s){return r||(r=new Promise(function(c,f){var h=typeof s<"u"?s:{},p=h.onAbort;h.onAbort=function(e){f(new Error(e)),p&&p(e)},h.postRun=h.postRun||[],h.postRun.push(function(){c(h)}),o=void 0;var u;u||(u=typeof h<"u"?h:{});var b=typeof window=="object",v=typeof WorkerGlobalScope<"u",S=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";u.onRuntimeInitialized=function(){function e(g,P){switch(typeof P){case"boolean":vl(g,P?1:0);break;case"number":gl(g,P);break;case"string":_l(g,P,-1,-1);break;case"object":if(P===null)Vn(g);else if(P.length!=null){var I=Mt(P,At);wl(g,I,P.length,-1),Nt(I)}else zt(g,"Wrong API use : tried to return a value of an unknown type ("+P+").",-1);break;default:Vn(g)}}function t(g,P){for(var I=[],H=0;H<g;H+=1){var x=fe(P+4*H,"i32"),de=hl(x);if(de===1||de===2)x=bl(x);else if(de===3)x=ml(x);else if(de===4){de=x,x=dl(de),de=pl(de);for(var Oe=new Uint8Array(x),Ne=0;Ne<x;Ne+=1)Oe[Ne]=A[de+Ne];x=Oe}else x=null;I.push(x)}return I}function l(g,P){this.Qa=g,this.db=P,this.Oa=1,this.lb=[]}function a(g,P){if(this.db=P,P=mt(g)+1,this.eb=xt(P),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Qe(g,j,this.eb,P),this.kb=this.eb,this.Za=this.pb=null}function d(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var P=this.filename,I="/",H=P;if(I&&(I=typeof I=="string"?I:Vt(I),H=P?It(I+"/"+P):I),P=dn(!0,!0),H=Qr(H,P),g){if(typeof g=="string"){I=Array(g.length);for(var x=0,de=g.length;x<de;++x)I[x]=g.charCodeAt(x);g=I}Ct(H,P|146),I=st(H,577),An(I,g,0,g.length,0),Xt(I),Ct(H,P)}}this.handleError(V(this.filename,_)),this.db=fe(_,"i32"),Qn(this.db),this.fb={},this.Sa={}}var _=Je(4),q=u.cwrap,V=q("sqlite3_open","number",["string","number"]),ie=q("sqlite3_close_v2","number",["number"]),ne=q("sqlite3_exec","number",["number","string","number","number","number"]),_e=q("sqlite3_changes","number",["number"]),Pe=q("sqlite3_prepare_v2","number",["number","string","number","number","number"]),On=q("sqlite3_sql","string",["number"]),Yr=q("sqlite3_normalized_sql","string",["number"]),Dn=q("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Kr=q("sqlite3_bind_text","number",["number","number","number","number","number"]),In=q("sqlite3_bind_blob","number",["number","number","number","number","number"]),Zr=q("sqlite3_bind_double","number",["number","number","number"]),xr=q("sqlite3_bind_int","number",["number","number","number"]),$r=q("sqlite3_bind_parameter_index","number",["number","string"]),el=q("sqlite3_step","number",["number"]),tl=q("sqlite3_errmsg","string",["number"]),nl=q("sqlite3_column_count","number",["number"]),rl=q("sqlite3_data_count","number",["number"]),ll=q("sqlite3_column_double","number",["number","number"]),Fn=q("sqlite3_column_text","string",["number","number"]),il=q("sqlite3_column_blob","number",["number","number"]),ol=q("sqlite3_column_bytes","number",["number","number"]),sl=q("sqlite3_column_type","number",["number","number"]),al=q("sqlite3_column_name","string",["number","number"]),ul=q("sqlite3_reset","number",["number"]),fl=q("sqlite3_clear_bindings","number",["number"]),cl=q("sqlite3_finalize","number",["number"]),jn=q("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),hl=q("sqlite3_value_type","number",["number"]),dl=q("sqlite3_value_bytes","number",["number"]),ml=q("sqlite3_value_text","string",["number"]),pl=q("sqlite3_value_blob","number",["number"]),bl=q("sqlite3_value_double","number",["number"]),gl=q("sqlite3_result_double","",["number","number"]),Vn=q("sqlite3_result_null","",["number"]),_l=q("sqlite3_result_text","",["number","string","number","number"]),wl=q("sqlite3_result_blob","",["number","number","number","number"]),vl=q("sqlite3_result_int","",["number","number"]),zt=q("sqlite3_result_error","",["number","string","number"]),Un=q("sqlite3_aggregate_context","number",["number","number"]),Qn=q("RegisterExtensionFunctions","number",["number"]),Wn=q("sqlite3_update_hook","number",["number","number","number"]);l.prototype.bind=function(g){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(g)?this.Cb(g):g!=null&&typeof g=="object"?this.Db(g):!0},l.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var g=el(this.Qa);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},l.prototype.wb=function(g){return g==null&&(g=this.Oa,this.Oa+=1),ll(this.Qa,g)},l.prototype.Gb=function(g){if(g==null&&(g=this.Oa,this.Oa+=1),g=Fn(this.Qa,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},l.prototype.Hb=function(g){return g==null&&(g=this.Oa,this.Oa+=1),Fn(this.Qa,g)},l.prototype.getBlob=function(g){g==null&&(g=this.Oa,this.Oa+=1);var P=ol(this.Qa,g);g=il(this.Qa,g);for(var I=new Uint8Array(P),H=0;H<P;H+=1)I[H]=A[g+H];return I},l.prototype.get=function(g,P){P=P||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var I=rl(this.Qa),H=0;H<I;H+=1)switch(sl(this.Qa,H)){case 1:var x=P.useBigInt?this.Gb(H):this.wb(H);g.push(x);break;case 2:g.push(this.wb(H));break;case 3:g.push(this.Hb(H));break;case 4:g.push(this.getBlob(H));break;default:g.push(null)}return g},l.prototype.getColumnNames=function(){for(var g=[],P=nl(this.Qa),I=0;I<P;I+=1)g.push(al(this.Qa,I));return g},l.prototype.getAsObject=function(g,P){g=this.get(g,P),P=this.getColumnNames();for(var I={},H=0;H<P.length;H+=1)I[P[H]]=g[H];return I},l.prototype.getSQL=function(){return On(this.Qa)},l.prototype.getNormalizedSQL=function(){return Yr(this.Qa)},l.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},l.prototype.sb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1),g=fn(g);var I=Mt(g,At);this.lb.push(I),this.db.handleError(Kr(this.Qa,P,I,g.length-1,0))},l.prototype.Bb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1);var I=Mt(g,At);this.lb.push(I),this.db.handleError(In(this.Qa,P,I,g.length,0))},l.prototype.rb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1),this.db.handleError((g===(g|0)?xr:Zr)(this.Qa,P,g))},l.prototype.Eb=function(g){g==null&&(g=this.Oa,this.Oa+=1),In(this.Qa,g,0,0,0)},l.prototype.tb=function(g,P){switch(P==null&&(P=this.Oa,this.Oa+=1),typeof g){case"string":this.sb(g,P);return;case"number":this.rb(g,P);return;case"bigint":this.sb(g.toString(),P);return;case"boolean":this.rb(g+0,P);return;case"object":if(g===null){this.Eb(P);return}if(g.length!=null){this.Bb(g,P);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},l.prototype.Db=function(g){var P=this;return Object.keys(g).forEach(function(I){var H=$r(P.Qa,I);H!==0&&P.tb(g[I],H)}),!0},l.prototype.Cb=function(g){for(var P=0;P<g.length;P+=1)this.tb(g[P],P+1);return!0},l.prototype.reset=function(){return this.freemem(),fl(this.Qa)===0&&ul(this.Qa)===0},l.prototype.freemem=function(){for(var g;(g=this.lb.pop())!==void 0;)Nt(g)},l.prototype.free=function(){this.freemem();var g=cl(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,g},a.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var g=wt(),P=Je(4);dt(_),dt(P);try{this.db.handleError(Dn(this.db.db,this.kb,-1,_,P)),this.kb=fe(P,"i32");var I=fe(_,"i32");return I===0?(this.mb(),{done:!0}):(this.Za=new l(I,this.db),this.db.fb[I]=this.Za,{value:this.Za,done:!1})}catch(H){throw this.pb=Dt(this.kb),this.mb(),H}finally{_t(g)}},a.prototype.mb=function(){Nt(this.eb),this.eb=null},a.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Dt(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(a.prototype[Symbol.iterator]=function(){return this}),d.prototype.run=function(g,P){if(!this.db)throw"Database closed";if(P){g=this.prepare(g,P);try{g.step()}finally{g.free()}}else this.handleError(ne(this.db,g,0,0,_));return this},d.prototype.exec=function(g,P,I){if(!this.db)throw"Database closed";var H=wt(),x=null;try{var de=Kt(g),Oe=Je(4);for(g=[];fe(de,"i8")!==0;){dt(_),dt(Oe),this.handleError(Dn(this.db,de,-1,_,Oe));var Ne=fe(_,"i32");if(de=fe(Oe,"i32"),Ne!==0){var Ae=null;for(x=new l(Ne,this),P!=null&&x.bind(P);x.step();)Ae===null&&(Ae={columns:x.getColumnNames(),values:[]},g.push(Ae)),Ae.values.push(x.get(null,I));x.free()}}return g}catch(De){throw x&&x.free(),De}finally{_t(H)}},d.prototype.each=function(g,P,I,H,x){typeof P=="function"&&(H=I,I=P,P=void 0),g=this.prepare(g,P);try{for(;g.step();)I(g.getAsObject(null,x))}finally{g.free()}if(typeof H=="function")return H()},d.prototype.prepare=function(g,P){if(dt(_),this.handleError(Pe(this.db,g,-1,_,0)),g=fe(_,"i32"),g===0)throw"Nothing to prepare";var I=new l(g,this);return P!=null&&I.bind(P),this.fb[g]=I},d.prototype.iterateStatements=function(g){return new a(g,this)},d.prototype.export=function(){Object.values(this.fb).forEach(function(P){P.free()}),Object.values(this.Sa).forEach(Xe),this.Sa={},this.handleError(ie(this.db));var g=Wr(this.filename);return this.handleError(V(this.filename,_)),this.db=fe(_,"i32"),Qn(this.db),g},d.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(g){g.free()}),Object.values(this.Sa).forEach(Xe),this.Sa={},this.Ya&&(Xe(this.Ya),this.Ya=void 0),this.handleError(ie(this.db)),Sn("/"+this.filename),this.db=null)},d.prototype.handleError=function(g){if(g===0)return null;throw g=tl(this.db),Error(g)},d.prototype.getRowsModified=function(){return _e(this.db)},d.prototype.create_function=function(g,P){Object.prototype.hasOwnProperty.call(this.Sa,g)&&(Xe(this.Sa[g]),delete this.Sa[g]);var I=gt(function(H,x,de){x=t(x,de);try{var Oe=P.apply(null,x)}catch(Ne){zt(H,Ne,-1);return}e(H,Oe)},"viii");return this.Sa[g]=I,this.handleError(jn(this.db,g,P.length,1,0,I,0,0,0)),this},d.prototype.create_aggregate=function(g,P){var I=P.init||function(){return null},H=P.finalize||function(Ae){return Ae},x=P.step;if(!x)throw"An aggregate function must have a step function in "+g;var de={};Object.hasOwnProperty.call(this.Sa,g)&&(Xe(this.Sa[g]),delete this.Sa[g]),P=g+"__finalize",Object.hasOwnProperty.call(this.Sa,P)&&(Xe(this.Sa[P]),delete this.Sa[P]);var Oe=gt(function(Ae,De,en){var xe=Un(Ae,1);Object.hasOwnProperty.call(de,xe)||(de[xe]=I()),De=t(De,en),De=[de[xe]].concat(De);try{de[xe]=x.apply(null,De)}catch(yl){delete de[xe],zt(Ae,yl,-1)}},"viii"),Ne=gt(function(Ae){var De=Un(Ae,1);try{var en=H(de[De])}catch(xe){delete de[De],zt(Ae,xe,-1);return}e(Ae,en),delete de[De]},"vi");return this.Sa[g]=Oe,this.Sa[P]=Ne,this.handleError(jn(this.db,g,x.length-1,1,0,0,Oe,Ne,0)),this},d.prototype.updateHook=function(g){this.Ya&&(Wn(this.db,0,0),Xe(this.Ya),this.Ya=void 0),g&&(this.Ya=gt(function(P,I,H,x,de){switch(I){case 18:P="insert";break;case 23:P="update";break;case 9:P="delete";break;default:throw"unknown operationCode in updateHook callback: "+I}if(H=H?ge(j,H):"",x=x?ge(j,x):"",de>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";g(P,H,x,Number(de))},"viiiij"),Wn(this.db,this.Ya,0))},u.Database=d};var w={...u},C="./this.program",T=(e,t)=>{throw t},k="",L,N;if(S){var te=Gn;k=__dirname+"/",N=e=>(e=ye(e)?new URL(e):e,te.readFileSync(e)),L=async e=>(e=ye(e)?new URL(e):e,te.readFileSync(e,void 0)),!u.thisProgram&&1<process.argv.length&&(C=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),o.exports=u,T=(e,t)=>{throw process.exitCode=e,t}}else(b||v)&&(v?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),k=k.startsWith("blob:")?"":k.slice(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1),v&&(N=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),L=async e=>{if(ye(e))return new Promise((l,a)=>{var d=new XMLHttpRequest;d.open("GET",e,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?l(d.response):a(d.status)},d.onerror=a,d.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var $=u.print||console.log.bind(console),G=u.printErr||console.error.bind(console);Object.assign(u,w),w=null,u.thisProgram&&(C=u.thisProgram);var X=u.wasmBinary,z,J=!1,re,A,j,ue,R,O,Z,he,we,ye=e=>e.startsWith("file://");function Le(){var e=z.buffer;u.HEAP8=A=new Int8Array(e),u.HEAP16=ue=new Int16Array(e),u.HEAPU8=j=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAP32=R=new Int32Array(e),u.HEAPU32=O=new Uint32Array(e),u.HEAPF32=Z=new Float32Array(e),u.HEAPF64=we=new Float64Array(e),u.HEAP64=he=new BigInt64Array(e),u.HEAPU64=new BigUint64Array(e)}var Ee=0,Se=null;function ke(e){var t;throw(t=u.onAbort)==null||t.call(u,e),e="Aborted("+e+")",G(e),J=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var Re;async function B(e){if(!X)try{var t=await L(e);return new Uint8Array(t)}catch{}if(e==Re&&X)e=new Uint8Array(X);else if(N)e=N(e);else throw"both async and sync fetching of the wasm failed";return e}async function le(e,t){try{var l=await B(e);return await WebAssembly.instantiate(l,t)}catch(a){G(`failed to asynchronously prepare wasm: ${a}`),ke(a)}}async function ae(e){var t=Re;if(!X&&typeof WebAssembly.instantiateStreaming=="function"&&!ye(t)&&!S)try{var l=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(l,e)}catch(a){G(`wasm streaming compile failed: ${a}`),G("falling back to ArrayBuffer instantiation")}return le(t,e)}class oe{constructor(t){Fe(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var pe=e=>{for(;0<e.length;)e.shift()(u)},ce=[],Y=[],K=()=>{var e=u.preRun.shift();Y.unshift(e)};function fe(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return A[e];case"i8":return A[e];case"i16":return ue[e>>1];case"i32":return R[e>>2];case"i64":return he[e>>3];case"float":return Z[e>>2];case"double":return we[e>>3];case"*":return O[e>>2];default:ke(`invalid type for getValue: ${t}`)}}var Ue=u.noExitRuntime||!0;function dt(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":A[e]=0;break;case"i8":A[e]=0;break;case"i16":ue[e>>1]=0;break;case"i32":R[e>>2]=0;break;case"i64":he[e>>3]=BigInt(0);break;case"float":Z[e>>2]=0;break;case"double":we[e>>3]=0;break;case"*":O[e>>2]=0;break;default:ke(`invalid type for setValue: ${t}`)}}var on=typeof TextDecoder<"u"?new TextDecoder:void 0,ge=(e,t=0,l=NaN)=>{var a=t+l;for(l=t;e[l]&&!(l>=a);)++l;if(16<l-t&&e.buffer&&on)return on.decode(e.subarray(t,l));for(a="";t<l;){var d=e[t++];if(d&128){var _=e[t++]&63;if((d&224)==192)a+=String.fromCharCode((d&31)<<6|_);else{var q=e[t++]&63;d=(d&240)==224?(d&15)<<12|_<<6|q:(d&7)<<18|_<<12|q<<6|e[t++]&63,65536>d?a+=String.fromCharCode(d):(d-=65536,a+=String.fromCharCode(55296|d>>10,56320|d&1023))}}else a+=String.fromCharCode(d)}return a},Dt=(e,t)=>e?ge(j,e,t):"",sn=(e,t)=>{for(var l=0,a=e.length-1;0<=a;a--){var d=e[a];d==="."?e.splice(a,1):d===".."?(e.splice(a,1),l++):l&&(e.splice(a,1),l--)}if(t)for(;l;l--)e.unshift("..");return e},It=e=>{var t=e.charAt(0)==="/",l=e.slice(-1)==="/";return(e=sn(e.split("/").filter(a=>!!a),!t).join("/"))||t||(e="."),e&&l&&(e+="/"),(t?"/":"")+e},an=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},Et=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],Nr=()=>{if(S){var e=Gn;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},un=e=>{(un=Nr())(e)},zr=(...e)=>{for(var t="",l=!1,a=e.length-1;-1<=a&&!l;a--){if(l=0<=a?e[a]:"/",typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";t=l+"/"+t,l=l.charAt(0)==="/"}return t=sn(t.split("/").filter(d=>!!d),!l).join("/"),(l?"/":"")+t||"."},Ft=[],mt=e=>{for(var t=0,l=0;l<e.length;++l){var a=e.charCodeAt(l);127>=a?t++:2047>=a?t+=2:55296<=a&&57343>=a?(t+=4,++l):t+=3}return t},Qe=(e,t,l,a)=>{if(!(0<a))return 0;var d=l;a=l+a-1;for(var _=0;_<e.length;++_){var q=e.charCodeAt(_);if(55296<=q&&57343>=q){var V=e.charCodeAt(++_);q=65536+((q&1023)<<10)|V&1023}if(127>=q){if(l>=a)break;t[l++]=q}else{if(2047>=q){if(l+1>=a)break;t[l++]=192|q>>6}else{if(65535>=q){if(l+2>=a)break;t[l++]=224|q>>12}else{if(l+3>=a)break;t[l++]=240|q>>18,t[l++]=128|q>>12&63}t[l++]=128|q>>6&63}t[l++]=128|q&63}}return t[l]=0,l-d},fn=(e,t)=>{var l=Array(mt(e)+1);return e=Qe(e,l,0,l.length),t&&(l.length=e),l},cn=[];function hn(e,t){cn[e]={input:[],output:[],cb:t},Bt(e,Rr)}var Rr={open(e){var t=cn[e.node.rdev];if(!t)throw new M(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,l,a){if(!e.tty||!e.tty.cb.xb)throw new M(60);for(var d=0,_=0;_<a;_++){try{var q=e.tty.cb.xb(e.tty)}catch{throw new M(29)}if(q===void 0&&d===0)throw new M(6);if(q==null)break;d++,t[l+_]=q}return d&&(e.node.atime=Date.now()),d},write(e,t,l,a){if(!e.tty||!e.tty.cb.qb)throw new M(60);try{for(var d=0;d<a;d++)e.tty.cb.qb(e.tty,t[l+d])}catch{throw new M(29)}return a&&(e.node.mtime=e.node.ctime=Date.now()),d}},Or={xb(){e:{if(!Ft.length){var e=null;if(S){var t=Buffer.alloc(256),l=0,a=process.stdin.fd;try{l=te.readSync(a,t,0,256)}catch(d){if(d.toString().includes("EOF"))l=0;else throw d}0<l&&(e=t.slice(0,l).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}Ft=fn(e,!0)}e=Ft.shift()}return e},qb(e,t){t===null||t===10?($(ge(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&($(ge(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Dr={qb(e,t){t===null||t===10?(G(ge(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(G(ge(e.output)),e.output=[])}},ee={Wa:null,Xa(){return ee.createNode(null,"/",16895,0)},createNode(e,t,l,a){if((l&61440)===24576||(l&61440)===4096)throw new M(63);return ee.Wa||(ee.Wa={dir:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua,lookup:ee.La.lookup,hb:ee.La.hb,rename:ee.La.rename,unlink:ee.La.unlink,rmdir:ee.La.rmdir,readdir:ee.La.readdir,symlink:ee.La.symlink},stream:{Va:ee.Ma.Va}},file:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua},stream:{Va:ee.Ma.Va,read:ee.Ma.read,write:ee.Ma.write,ib:ee.Ma.ib,jb:ee.Ma.jb}},link:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua,readlink:ee.La.readlink},stream:{}},ub:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua},stream:Ur}}),l=_n(e,t,l,a),Ce(l.mode)?(l.La=ee.Wa.dir.node,l.Ma=ee.Wa.dir.stream,l.Na={}):(l.mode&61440)===32768?(l.La=ee.Wa.file.node,l.Ma=ee.Wa.file.stream,l.Ra=0,l.Na=null):(l.mode&61440)===40960?(l.La=ee.Wa.link.node,l.Ma=ee.Wa.link.stream):(l.mode&61440)===8192&&(l.La=ee.Wa.ub.node,l.Ma=ee.Wa.ub.stream),l.atime=l.mtime=l.ctime=Date.now(),e&&(e.Na[t]=l,e.atime=e.mtime=e.ctime=l.atime),l},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Ce(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var l of["mode","atime","mtime","ctime"])t[l]!=null&&(e[l]=t[l]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(l=e.Na,e.Na=new Uint8Array(t),l&&e.Na.set(l.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw ee.vb},hb(e,t,l,a){return ee.createNode(e,t,l,a)},rename(e,t,l){try{var a=Ye(t,l)}catch{}if(a){if(Ce(e.mode))for(var d in a.Na)throw new M(55);Qt(a)}delete e.parent.Na[e.name],t.Na[l]=e,e.name=l,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var l=Ye(e,t),a;for(a in l.Na)throw new M(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,l){return e=ee.createNode(e,t,41471,0),e.link=l,e},readlink(e){if((e.mode&61440)!==40960)throw new M(28);return e.link}},Ma:{read(e,t,l,a,d){var _=e.node.Na;if(d>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-d,a),8<e&&_.subarray)t.set(_.subarray(d,d+e),l);else for(a=0;a<e;a++)t[l+a]=_[d+a];return e},write(e,t,l,a,d,_){if(t.buffer===A.buffer&&(_=!1),!a)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(_)return e.Na=t.subarray(l,l+a),e.Ra=a;if(e.Ra===0&&d===0)return e.Na=t.slice(l,l+a),e.Ra=a;if(d+a<=e.Ra)return e.Na.set(t.subarray(l,l+a),d),a}_=d+a;var q=e.Na?e.Na.length:0;if(q>=_||(_=Math.max(_,q*(1048576>q?2:1.125)>>>0),q!=0&&(_=Math.max(_,256)),q=e.Na,e.Na=new Uint8Array(_),0<e.Ra&&e.Na.set(q.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(l,l+a),d);else for(_=0;_<a;_++)e.Na[d+_]=t[l+_];return e.Ra=Math.max(e.Ra,d+a),a},Va(e,t,l){if(l===1?t+=e.position:l===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new M(28);return t},ib(e,t,l,a,d){if((e.node.mode&61440)!==32768)throw new M(43);if(e=e.node.Na,d&2||!e||e.buffer!==A.buffer){d=!0,a=65536*Math.ceil(t/65536);var _=zn(65536,a);if(_&&j.fill(0,_,_+a),a=_,!a)throw new M(48);e&&((0<l||l+t<e.length)&&(e.subarray?e=e.subarray(l,l+t):e=Array.prototype.slice.call(e,l,l+t)),A.set(e,a))}else d=!1,a=e.byteOffset;return{Kb:a,Ab:d}},jb(e,t,l,a){return ee.Ma.write(e,t,0,a,l,!1),0}}},dn=(e,t)=>{var l=0;return e&&(l|=365),t&&(l|=146),l},jt=null,mn={},it=[],Ir=1,Be=null,pn=!1,bn=!0,gn={},M=class{constructor(e){Fe(this,"name","ErrnoError");this.Pa=e}},Fr=class{constructor(){Fe(this,"gb",{});Fe(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},jr=class{constructor(e,t,l,a){Fe(this,"La",{});Fe(this,"Ma",{});Fe(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=Ir++,this.name=t,this.mode=l,this.rdev=a,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function Me(e,t={}){if(!e)throw new M(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var l=0;e:for(;40>l;l++){e=e.split("/").filter(V=>!!V);for(var a=jt,d="/",_=0;_<e.length;_++){var q=_===e.length-1;if(q&&t.parent)break;if(e[_]!==".")if(e[_]==="..")d=an(d),a=a.parent;else{d=It(d+"/"+e[_]);try{a=Ye(a,e[_])}catch(V){if((V==null?void 0:V.Pa)===44&&q&&t.Jb)return{path:d};throw V}if(!a.ab||q&&!t.nb||(a=a.ab.root),(a.mode&61440)===40960&&(!q||t.$a)){if(!a.La.readlink)throw new M(52);a=a.La.readlink(a),a.charAt(0)==="/"||(a=an(d)+"/"+a),e=a+"/"+e.slice(_+1).join("/");continue e}}}return{path:d,node:a}}throw new M(32)}function Vt(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Ut(e,t){for(var l=0,a=0;a<t.length;a++)l=(l<<5)-l+t.charCodeAt(a)|0;return(e+l>>>0)%Be.length}function Qt(e){var t=Ut(e.parent.id,e.name);if(Be[t]===e)Be[t]=e.bb;else for(t=Be[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function Ye(e,t){var l=Ce(e.mode)?(l=ot(e,"x"))?l:e.La.lookup?0:2:54;if(l)throw new M(l);for(l=Be[Ut(e.id,t)];l;l=l.bb){var a=l.name;if(l.parent.id===e.id&&a===t)return l}return e.La.lookup(e,t)}function _n(e,t,l,a){return e=new jr(e,t,l,a),t=Ut(e.parent.id,e.name),e.bb=Be[t],Be[t]=e}function Ce(e){return(e&61440)===16384}function wn(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function ot(e,t){if(bn)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function vn(e,t){if(!Ce(e.mode))return 54;try{return Ye(e,t),20}catch{}return ot(e,"wx")}function yn(e,t,l){try{var a=Ye(e,t)}catch(d){return d.Pa}if(e=ot(e,"wx"))return e;if(l){if(!Ce(a.mode))return 54;if(a===a.parent||Vt(a)==="/")return 10}else if(Ce(a.mode))return 31;return 0}function kt(e){if(!e)throw new M(63);return e}function qe(e){if(e=it[e],!e)throw new M(8);return e}function En(e,t=-1){if(e=Object.assign(new Fr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!it[t])break e;throw new M(33)}return e.fd=t,it[t]=e}function Vr(e,t=-1){var l,a;return e=En(e,t),(a=(l=e.Ma)==null?void 0:l.Rb)==null||a.call(l,e),e}function Wt(e,t,l){var a=e==null?void 0:e.Ma.Ua;e=a?e:t,a??(a=t.La.Ua),kt(a),a(e,l)}var Ur={open(e){var t,l;e.Ma=mn[e.node.rdev].Ma,(l=(t=e.Ma).open)==null||l.call(t,e)},Va(){throw new M(70)}};function Bt(e,t){mn[e]={Ma:t}}function kn(e,t){var l=t==="/";if(l&&jt)throw new M(10);if(!l&&t){var a=Me(t,{nb:!1});if(t=a.path,a=a.node,a.ab)throw new M(10);if(!Ce(a.mode))throw new M(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,l?jt=e:a&&(a.ab=t,a.Xa&&a.Xa.Ib.push(t))}function qt(e,t,l){var a=Me(e,{parent:!0}).node;if(e=Et(e),!e)throw new M(28);if(e==="."||e==="..")throw new M(20);var d=vn(a,e);if(d)throw new M(d);if(!a.La.hb)throw new M(63);return a.La.hb(a,e,t,l)}function Qr(e,t=438){return qt(e,t&4095|32768,0)}function Ie(e,t=511){return qt(e,t&1023|16384,0)}function St(e,t,l){typeof l>"u"&&(l=t,t=438),qt(e,t|8192,l)}function Ht(e,t){if(!zr(e))throw new M(44);var l=Me(t,{parent:!0}).node;if(!l)throw new M(44);t=Et(t);var a=vn(l,t);if(a)throw new M(a);if(!l.La.symlink)throw new M(63);l.La.symlink(l,t,e)}function qn(e){var t=Me(e,{parent:!0}).node;e=Et(e);var l=Ye(t,e),a=yn(t,e,!0);if(a)throw new M(a);if(!t.La.rmdir)throw new M(63);if(l.ab)throw new M(10);t.La.rmdir(t,e),Qt(l)}function Sn(e){var t=Me(e,{parent:!0}).node;if(!t)throw new M(44);e=Et(e);var l=Ye(t,e),a=yn(t,e,!1);if(a)throw new M(a);if(!t.La.unlink)throw new M(63);if(l.ab)throw new M(10);t.La.unlink(t,e),Qt(l)}function pt(e,t){return e=Me(e,{$a:!t}).node,kt(e.La.Ta)(e)}function Cn(e,t,l,a){Wt(e,t,{mode:l&4095|t.mode&-4096,ctime:Date.now(),Fb:a})}function Ct(e,t){e=typeof e=="string"?Me(e,{$a:!0}).node:e,Cn(null,e,t)}function Pn(e,t,l){if(Ce(t.mode))throw new M(31);if((t.mode&61440)!==32768)throw new M(28);var a=ot(t,"w");if(a)throw new M(a);Wt(e,t,{size:l,timestamp:Date.now()})}function st(e,t,l=438){if(e==="")throw new M(44);if(typeof t=="string"){var a={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof a>"u")throw Error(`Unknown file open mode: ${t}`);t=a}if(l=t&64?l&4095|32768:0,typeof e=="object")a=e;else{var d=e.endsWith("/");e=Me(e,{$a:!(t&131072),Jb:!0}),a=e.node,e=e.path}var _=!1;if(t&64)if(a){if(t&128)throw new M(20)}else{if(d)throw new M(31);a=qt(e,l|511,0),_=!0}if(!a)throw new M(44);if((a.mode&61440)===8192&&(t&=-513),t&65536&&!Ce(a.mode))throw new M(54);if(!_&&(d=a?(a.mode&61440)===40960?32:Ce(a.mode)&&(wn(t)!=="r"||t&576)?31:ot(a,wn(t)):44))throw new M(d);return t&512&&!_&&(d=a,d=typeof d=="string"?Me(d,{$a:!0}).node:d,Pn(null,d,0)),t&=-131713,d=En({node:a,path:Vt(a),flags:t,seekable:!0,position:0,Ma:a.Ma,Lb:[],error:!1}),d.Ma.open&&d.Ma.open(d),_&&Ct(a,l&511),!u.logReadFiles||t&1||e in gn||(gn[e]=1),d}function Xt(e){if(e.fd===null)throw new M(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{it[e.fd]=null}e.fd=null}function Tn(e,t,l){if(e.fd===null)throw new M(8);if(!e.seekable||!e.Ma.Va)throw new M(70);if(l!=0&&l!=1&&l!=2)throw new M(28);e.position=e.Ma.Va(e,t,l),e.Lb=[]}function Ln(e,t,l,a,d){if(0>a||0>d)throw new M(28);if(e.fd===null)throw new M(8);if((e.flags&2097155)===1)throw new M(8);if(Ce(e.node.mode))throw new M(31);if(!e.Ma.read)throw new M(28);var _=typeof d<"u";if(!_)d=e.position;else if(!e.seekable)throw new M(70);return t=e.Ma.read(e,t,l,a,d),_||(e.position+=t),t}function An(e,t,l,a,d){if(0>a||0>d)throw new M(28);if(e.fd===null)throw new M(8);if(!(e.flags&2097155))throw new M(8);if(Ce(e.node.mode))throw new M(31);if(!e.Ma.write)throw new M(28);e.seekable&&e.flags&1024&&Tn(e,0,2);var _=typeof d<"u";if(!_)d=e.position;else if(!e.seekable)throw new M(70);return t=e.Ma.write(e,t,l,a,d,void 0),_||(e.position+=t),t}function Wr(e){var t,l=st(e,l||0);e=pt(e).size;var a=new Uint8Array(e);return Ln(l,a,0,e,0),t=a,Xt(l),t}function He(e,t,l){e=It("/dev/"+e);var a=dn(!!t,!!l);He.yb??(He.yb=64);var d=He.yb++<<8|0;Bt(d,{open(_){_.seekable=!1},close(){var _;(_=l==null?void 0:l.buffer)!=null&&_.length&&l(10)},read(_,q,V,ie){for(var ne=0,_e=0;_e<ie;_e++){try{var Pe=t()}catch{throw new M(29)}if(Pe===void 0&&ne===0)throw new M(6);if(Pe==null)break;ne++,q[V+_e]=Pe}return ne&&(_.node.atime=Date.now()),ne},write(_,q,V,ie){for(var ne=0;ne<ie;ne++)try{l(q[V+ne])}catch{throw new M(29)}return ie&&(_.node.mtime=_.node.ctime=Date.now()),ne}}),St(e,a,d)}var be={};function Ke(e,t,l){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":qe(e).path,t.length==0){if(!l)throw new M(44);return e}return e+"/"+t}function Pt(e,t){R[e>>2]=t.dev,R[e+4>>2]=t.mode,O[e+8>>2]=t.nlink,R[e+12>>2]=t.uid,R[e+16>>2]=t.gid,R[e+20>>2]=t.rdev,he[e+24>>3]=BigInt(t.size),R[e+32>>2]=4096,R[e+36>>2]=t.blocks;var l=t.atime.getTime(),a=t.mtime.getTime(),d=t.ctime.getTime();return he[e+40>>3]=BigInt(Math.floor(l/1e3)),O[e+48>>2]=l%1e3*1e6,he[e+56>>3]=BigInt(Math.floor(a/1e3)),O[e+64>>2]=a%1e3*1e6,he[e+72>>3]=BigInt(Math.floor(d/1e3)),O[e+80>>2]=d%1e3*1e6,he[e+88>>3]=BigInt(t.ino),0}var Tt=void 0,Lt=()=>{var e=R[+Tt>>2];return Tt+=4,e},Jt=0,Br=[0,31,60,91,121,152,182,213,244,274,305,335],Hr=[0,31,59,90,120,151,181,212,243,273,304,334],bt={},Mn=e=>{var t;re=e,Ue||0<Jt||((t=u.onExit)==null||t.call(u,e),J=!0),T(e,new oe(e))},Xr=e=>{if(!J)try{if(e(),!(Ue||0<Jt))try{re=e=re,Mn(e)}catch(t){t instanceof oe||t=="unwind"||T(1,t)}}catch(t){t instanceof oe||t=="unwind"||T(1,t)}},Gt={},Nn=()=>{if(!Yt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:C||"./this.program"},t;for(t in Gt)Gt[t]===void 0?delete e[t]:e[t]=Gt[t];var l=[];for(t in e)l.push(`${t}=${e[t]}`);Yt=l}return Yt},Yt,Kt=e=>{var t=mt(e)+1,l=Je(t);return Qe(e,j,l,t),l},Jr=(e,t,l,a)=>{var d={string:ne=>{var _e=0;return ne!=null&&ne!==0&&(_e=Kt(ne)),_e},array:ne=>{var _e=Je(ne.length);return A.set(ne,_e),_e}};e=u["_"+e];var _=[],q=0;if(a)for(var V=0;V<a.length;V++){var ie=d[l[V]];ie?(q===0&&(q=wt()),_[V]=ie(a[V])):_[V]=a[V]}return l=e(..._),l=function(ne){return q!==0&&_t(q),t==="string"?ne?ge(j,ne):"":t==="boolean"?!!ne:ne}(l)},At=0,Mt=(e,t)=>(t=t==1?Je(e.length):xt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),j.set(e,t),t),Ze,Zt=[],We,Xe=e=>{Ze.delete(We.get(e)),We.set(e,null),Zt.push(e)},gt=(e,t)=>{if(!Ze){Ze=new WeakMap;var l=We.length;if(Ze)for(var a=0;a<0+l;a++){var d=We.get(a);d&&Ze.set(d,a)}}if(l=Ze.get(e)||0)return l;if(Zt.length)l=Zt.pop();else{try{We.grow(1)}catch(ie){throw ie instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ie}l=We.length-1}try{We.set(l,e)}catch(ie){if(!(ie instanceof TypeError))throw ie;if(typeof WebAssembly.Function=="function"){var _=WebAssembly.Function;a={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},d={parameters:[],results:t[0]=="v"?[]:[a[t[0]]]};for(var q=1;q<t.length;++q)d.parameters.push(a[t[q]]);t=new _(d,e)}else{a=[1],d=t.slice(0,1),t=t.slice(1),q={i:127,p:127,j:126,f:125,d:124,e:111},a.push(96);var V=t.length;128>V?a.push(V):a.push(V%128|128,V>>7);for(_ of t)a.push(q[_]);d=="v"?a.push(0):a.push(1,q[d]),t=[0,97,115,109,1,0,0,0,1],_=a.length,128>_?t.push(_):t.push(_%128|128,_>>7),t.push(...a),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}We.set(l,t)}return Ze.set(e,l),l};Be=Array(4096),kn(ee,"/"),Ie("/tmp"),Ie("/home"),Ie("/home/web_user"),function(){Ie("/dev"),Bt(259,{read:()=>0,write:(a,d,_,q)=>q,Va:()=>0}),St("/dev/null",259),hn(1280,Or),hn(1536,Dr),St("/dev/tty",1280),St("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,l=()=>(t===0&&(un(e),t=e.byteLength),e[--t]);He("random",l),He("urandom",l),Ie("/dev/shm"),Ie("/dev/shm/tmp")}(),function(){Ie("/proc");var e=Ie("/proc/self");Ie("/proc/self/fd"),kn({Xa(){var t=_n(e,"fd",16895,73);return t.Ma={Va:ee.Ma.Va},t.La={lookup(l,a){l=+a;var d=qe(l);return l={parent:null,Xa:{zb:"fake"},La:{readlink:()=>d.path},id:l+1},l.parent=l},readdir(){return Array.from(it.entries()).filter(([,l])=>l).map(([l])=>l.toString())}},t}},"/proc/self/fd")}(),ee.vb=new M(44),ee.vb.stack="<generic error, no stack>";var Gr={a:(e,t,l,a)=>ke(`Assertion failed: ${e?ge(j,e):""}, at: `+[t?t?ge(j,t):"":"unknown filename",l,a?a?ge(j,a):"":"unknown function"]),i:function(e,t){try{return e=e?ge(j,e):"",Ct(e,t),0}catch(l){if(typeof be>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},L:function(e,t,l){try{if(t=t?ge(j,t):"",t=Ke(e,t),l&-8)return-28;var a=Me(t,{$a:!0}).node;return a?(e="",l&4&&(e+="r"),l&2&&(e+="w"),l&1&&(e+="x"),e&&ot(a,e)?-2:0):-44}catch(d){if(typeof be>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},j:function(e,t){try{var l=qe(e);return Cn(l,l.node,t,!1),0}catch(a){if(typeof be>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},h:function(e){try{var t=qe(e);return Wt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(l){if(typeof be>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},b:function(e,t,l){Tt=l;try{var a=qe(e);switch(t){case 0:var d=Lt();if(0>d)break;for(;it[d];)d++;return Vr(a,d).fd;case 1:case 2:return 0;case 3:return a.flags;case 4:return d=Lt(),a.flags|=d,0;case 12:return d=Lt(),ue[d+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(_){if(typeof be>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},g:function(e,t){try{var l=qe(e),a=l.node,d=l.Ma.Ta;e=d?l:a,d??(d=a.La.Ta),kt(d);var _=d(e);return Pt(t,_)}catch(q){if(typeof be>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var l=qe(e);if(0>t||!(l.flags&2097155))throw new M(28);return Pn(l,l.node,t),0}catch(a){if(typeof be>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},G:function(e,t){try{if(t===0)return-28;var l=mt("/")+1;return t<l?-68:(Qe("/",j,e,t),l)}catch(a){if(typeof be>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},K:function(e,t){try{return e=e?ge(j,e):"",Pt(t,pt(e,!0))}catch(l){if(typeof be>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},C:function(e,t,l){try{return t=t?ge(j,t):"",t=Ke(e,t),Ie(t,l),0}catch(a){if(typeof be>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},J:function(e,t,l,a){try{t=t?ge(j,t):"";var d=a&256;return t=Ke(e,t,a&4096),Pt(l,d?pt(t,!0):pt(t))}catch(_){if(typeof be>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},x:function(e,t,l,a){Tt=a;try{t=t?ge(j,t):"",t=Ke(e,t);var d=a?Lt():0;return st(t,l,d).fd}catch(_){if(typeof be>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},v:function(e,t,l,a){try{if(t=t?ge(j,t):"",t=Ke(e,t),0>=a)return-28;var d=Me(t).node;if(!d)throw new M(44);if(!d.La.readlink)throw new M(28);var _=d.La.readlink(d),q=Math.min(a,mt(_)),V=A[l+q];return Qe(_,j,l,a+1),A[l+q]=V,q}catch(ie){if(typeof be>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Pa}},u:function(e){try{return e=e?ge(j,e):"",qn(e),0}catch(t){if(typeof be>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?ge(j,e):"",Pt(t,pt(e))}catch(l){if(typeof be>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},r:function(e,t,l){try{return t=t?ge(j,t):"",t=Ke(e,t),l===0?Sn(t):l===512?qn(t):ke("Invalid flags passed to unlinkat"),0}catch(a){if(typeof be>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},q:function(e,t,l){try{t=t?ge(j,t):"",t=Ke(e,t,!0);var a=Date.now(),d,_;if(l){var q=O[l>>2]+4294967296*R[l+4>>2],V=R[l+8>>2];V==1073741823?d=a:V==1073741822?d=null:d=1e3*q+V/1e6,l+=16,q=O[l>>2]+4294967296*R[l+4>>2],V=R[l+8>>2],V==1073741823?_=a:V==1073741822?_=null:_=1e3*q+V/1e6}else _=d=a;if((_??d)!==null){e=d;var ie=Me(t,{$a:!0}).node;kt(ie.La.Ua)(ie,{atime:e,mtime:_})}return 0}catch(ne){if(typeof be>"u"||ne.name!=="ErrnoError")throw ne;return-ne.Pa}},m:()=>ke(""),l:()=>{Ue=!1,Jt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),R[t>>2]=e.getSeconds(),R[t+4>>2]=e.getMinutes(),R[t+8>>2]=e.getHours(),R[t+12>>2]=e.getDate(),R[t+16>>2]=e.getMonth(),R[t+20>>2]=e.getFullYear()-1900,R[t+24>>2]=e.getDay();var l=e.getFullYear();R[t+28>>2]=(l%4!==0||l%100===0&&l%400!==0?Hr:Br)[e.getMonth()]+e.getDate()-1|0,R[t+36>>2]=-(60*e.getTimezoneOffset()),l=new Date(e.getFullYear(),6,1).getTimezoneOffset();var a=new Date(e.getFullYear(),0,1).getTimezoneOffset();R[t+32>>2]=(l!=a&&e.getTimezoneOffset()==Math.min(a,l))|0},y:function(e,t,l,a,d,_,q){d=-9007199254740992>d||9007199254740992<d?NaN:Number(d);try{if(isNaN(d))return 61;var V=qe(a);if(t&2&&!(l&2)&&(V.flags&2097155)!==2)throw new M(2);if((V.flags&2097155)===1)throw new M(2);if(!V.Ma.ib)throw new M(43);if(!e)throw new M(28);var ie=V.Ma.ib(V,e,d,t,l),ne=ie.Kb;return R[_>>2]=ie.Ab,O[q>>2]=ne,0}catch(_e){if(typeof be>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Pa}},z:function(e,t,l,a,d,_){_=-9007199254740992>_||9007199254740992<_?NaN:Number(_);try{var q=qe(d);if(l&2){if(l=_,(q.node.mode&61440)!==32768)throw new M(43);if(!(a&2)){var V=j.slice(e,e+t);q.Ma.jb&&q.Ma.jb(q,V,l,t,a)}}}catch(ie){if(typeof be>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Pa}},n:(e,t)=>{if(bt[e]&&(clearTimeout(bt[e].id),delete bt[e]),!t)return 0;var l=setTimeout(()=>{delete bt[e],Xr(()=>Rn(e,performance.now()))},t);return bt[e]={id:l,Xb:t},0},B:(e,t,l,a)=>{var d=new Date().getFullYear(),_=new Date(d,0,1).getTimezoneOffset();d=new Date(d,6,1).getTimezoneOffset(),O[e>>2]=60*Math.max(_,d),R[t>>2]=+(_!=d),t=q=>{var V=Math.abs(q);return`UTC${0<=q?"-":"+"}${String(Math.floor(V/60)).padStart(2,"0")}${String(V%60).padStart(2,"0")}`},e=t(_),t=t(d),d<_?(Qe(e,j,l,17),Qe(t,j,a,17)):(Qe(e,j,a,17),Qe(t,j,l,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=j.length;if(e>>>=0,2147483648<e)return!1;for(var l=1;4>=l;l*=2){var a=t*(1+.2/l);a=Math.min(a,e+100663296);e:{a=(Math.min(2147483648,65536*Math.ceil(Math.max(e,a)/65536))-z.buffer.byteLength+65535)/65536|0;try{z.grow(a),Le();var d=1;break e}catch{}d=void 0}if(d)return!0}return!1},E:(e,t)=>{var l=0;return Nn().forEach((a,d)=>{var _=t+l;for(d=O[e+4*d>>2]=_,_=0;_<a.length;++_)A[d++]=a.charCodeAt(_);A[d]=0,l+=a.length+1}),0},F:(e,t)=>{var l=Nn();O[e>>2]=l.length;var a=0;return l.forEach(d=>a+=d.length+1),O[t>>2]=a,0},e:function(e){try{var t=qe(e);return Xt(t),0}catch(l){if(typeof be>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},p:function(e,t){try{var l=qe(e);return A[t]=l.tty?2:Ce(l.mode)?3:(l.mode&61440)===40960?7:4,ue[t+2>>1]=0,he[t+8>>3]=BigInt(0),he[t+16>>3]=BigInt(0),0}catch(a){if(typeof be>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},w:function(e,t,l,a){try{e:{var d=qe(e);e=t;for(var _,q=t=0;q<l;q++){var V=O[e>>2],ie=O[e+4>>2];e+=8;var ne=Ln(d,A,V,ie,_);if(0>ne){var _e=-1;break e}if(t+=ne,ne<ie)break;typeof _<"u"&&(_+=ne)}_e=t}return O[a>>2]=_e,0}catch(Pe){if(typeof be>"u"||Pe.name!=="ErrnoError")throw Pe;return Pe.Pa}},D:function(e,t,l,a){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var d=qe(e);return Tn(d,t,l),he[a>>3]=BigInt(d.position),d.ob&&t===0&&l===0&&(d.ob=null),0}catch(_){if(typeof be>"u"||_.name!=="ErrnoError")throw _;return _.Pa}},I:function(e){var l;try{var t=qe(e);return(l=t.Ma)!=null&&l.fsync?t.Ma.fsync(t):0}catch(a){if(typeof be>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},t:function(e,t,l,a){try{e:{var d=qe(e);e=t;for(var _,q=t=0;q<l;q++){var V=O[e>>2],ie=O[e+4>>2];e+=8;var ne=An(d,A,V,ie,_);if(0>ne){var _e=-1;break e}if(t+=ne,ne<ie)break;typeof _<"u"&&(_+=ne)}_e=t}return O[a>>2]=_e,0}catch(Pe){if(typeof be>"u"||Pe.name!=="ErrnoError")throw Pe;return Pe.Pa}},k:Mn},U;(async function(){var l;function e(a){var d;return U=a.exports,z=U.M,Le(),We=U.O,Ee--,(d=u.monitorRunDependencies)==null||d.call(u,Ee),Ee==0&&Se&&(a=Se,Se=null,a()),U}Ee++,(l=u.monitorRunDependencies)==null||l.call(u,Ee);var t={a:Gr};return u.instantiateWasm?new Promise(a=>{u.instantiateWasm(t,(d,_)=>{e(d),a(d.exports)})}):(Re??(Re=u.locateFile?u.locateFile("sql-wasm.wasm",k):k+"sql-wasm.wasm"),e((await ae(t)).instance))})(),u._sqlite3_free=e=>(u._sqlite3_free=U.P)(e),u._sqlite3_value_text=e=>(u._sqlite3_value_text=U.Q)(e),u._sqlite3_prepare_v2=(e,t,l,a,d)=>(u._sqlite3_prepare_v2=U.R)(e,t,l,a,d),u._sqlite3_step=e=>(u._sqlite3_step=U.S)(e),u._sqlite3_reset=e=>(u._sqlite3_reset=U.T)(e),u._sqlite3_exec=(e,t,l,a,d)=>(u._sqlite3_exec=U.U)(e,t,l,a,d),u._sqlite3_finalize=e=>(u._sqlite3_finalize=U.V)(e),u._sqlite3_column_name=(e,t)=>(u._sqlite3_column_name=U.W)(e,t),u._sqlite3_column_text=(e,t)=>(u._sqlite3_column_text=U.X)(e,t),u._sqlite3_column_type=(e,t)=>(u._sqlite3_column_type=U.Y)(e,t),u._sqlite3_errmsg=e=>(u._sqlite3_errmsg=U.Z)(e),u._sqlite3_clear_bindings=e=>(u._sqlite3_clear_bindings=U._)(e),u._sqlite3_value_blob=e=>(u._sqlite3_value_blob=U.$)(e),u._sqlite3_value_bytes=e=>(u._sqlite3_value_bytes=U.aa)(e),u._sqlite3_value_double=e=>(u._sqlite3_value_double=U.ba)(e),u._sqlite3_value_int=e=>(u._sqlite3_value_int=U.ca)(e),u._sqlite3_value_type=e=>(u._sqlite3_value_type=U.da)(e),u._sqlite3_result_blob=(e,t,l,a)=>(u._sqlite3_result_blob=U.ea)(e,t,l,a),u._sqlite3_result_double=(e,t)=>(u._sqlite3_result_double=U.fa)(e,t),u._sqlite3_result_error=(e,t,l)=>(u._sqlite3_result_error=U.ga)(e,t,l),u._sqlite3_result_int=(e,t)=>(u._sqlite3_result_int=U.ha)(e,t),u._sqlite3_result_int64=(e,t)=>(u._sqlite3_result_int64=U.ia)(e,t),u._sqlite3_result_null=e=>(u._sqlite3_result_null=U.ja)(e),u._sqlite3_result_text=(e,t,l,a)=>(u._sqlite3_result_text=U.ka)(e,t,l,a),u._sqlite3_aggregate_context=(e,t)=>(u._sqlite3_aggregate_context=U.la)(e,t),u._sqlite3_column_count=e=>(u._sqlite3_column_count=U.ma)(e),u._sqlite3_data_count=e=>(u._sqlite3_data_count=U.na)(e),u._sqlite3_column_blob=(e,t)=>(u._sqlite3_column_blob=U.oa)(e,t),u._sqlite3_column_bytes=(e,t)=>(u._sqlite3_column_bytes=U.pa)(e,t),u._sqlite3_column_double=(e,t)=>(u._sqlite3_column_double=U.qa)(e,t),u._sqlite3_bind_blob=(e,t,l,a,d)=>(u._sqlite3_bind_blob=U.ra)(e,t,l,a,d),u._sqlite3_bind_double=(e,t,l)=>(u._sqlite3_bind_double=U.sa)(e,t,l),u._sqlite3_bind_int=(e,t,l)=>(u._sqlite3_bind_int=U.ta)(e,t,l),u._sqlite3_bind_text=(e,t,l,a,d)=>(u._sqlite3_bind_text=U.ua)(e,t,l,a,d),u._sqlite3_bind_parameter_index=(e,t)=>(u._sqlite3_bind_parameter_index=U.va)(e,t),u._sqlite3_sql=e=>(u._sqlite3_sql=U.wa)(e),u._sqlite3_normalized_sql=e=>(u._sqlite3_normalized_sql=U.xa)(e),u._sqlite3_changes=e=>(u._sqlite3_changes=U.ya)(e),u._sqlite3_close_v2=e=>(u._sqlite3_close_v2=U.za)(e),u._sqlite3_create_function_v2=(e,t,l,a,d,_,q,V,ie)=>(u._sqlite3_create_function_v2=U.Aa)(e,t,l,a,d,_,q,V,ie),u._sqlite3_update_hook=(e,t,l)=>(u._sqlite3_update_hook=U.Ba)(e,t,l),u._sqlite3_open=(e,t)=>(u._sqlite3_open=U.Ca)(e,t);var xt=u._malloc=e=>(xt=u._malloc=U.Da)(e),Nt=u._free=e=>(Nt=u._free=U.Ea)(e);u._RegisterExtensionFunctions=e=>(u._RegisterExtensionFunctions=U.Fa)(e);var zn=(e,t)=>(zn=U.Ga)(e,t),Rn=(e,t)=>(Rn=U.Ha)(e,t),_t=e=>(_t=U.Ia)(e),Je=e=>(Je=U.Ja)(e),wt=()=>(wt=U.Ka)();u.stackSave=()=>wt(),u.stackRestore=e=>_t(e),u.stackAlloc=e=>Je(e),u.cwrap=(e,t,l,a)=>{var d=!l||l.every(_=>_==="number"||_==="boolean");return t!=="string"&&d&&!a?u["_"+e]:(..._)=>Jr(e,t,l,_)},u.addFunction=gt,u.removeFunction=Xe,u.UTF8ToString=Dt,u.ALLOC_NORMAL=At,u.allocate=Mt,u.allocateUTF8OnStack=Kt;function $t(){function e(){var d;if(u.calledRun=!0,!J){if(!u.noFSInit&&!pn){var t,l;pn=!0,a??(a=u.stdin),t??(t=u.stdout),l??(l=u.stderr),a?He("stdin",a):Ht("/dev/tty","/dev/stdin"),t?He("stdout",null,t):Ht("/dev/tty","/dev/stdout"),l?He("stderr",null,l):Ht("/dev/tty1","/dev/stderr"),st("/dev/stdin",0),st("/dev/stdout",1),st("/dev/stderr",1)}if(U.N(),bn=!1,(d=u.onRuntimeInitialized)==null||d.call(u),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var a=u.postRun.shift();ce.unshift(a)}pe(ce)}}if(0<Ee)Se=$t;else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)K();pe(Y),0<Ee?Se=$t:u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),e()},1)):e()}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return $t(),h}),r)};o.exports=i,o.exports.default=i})(Mr);var Ul=Mr.exports;const Ql=Il(Ul);class Wl{constructor(){this.db=null,this.sqlJs=null}async initialize(){if(!this.sqlJs){const r=window.location.protocol==="http:"?"/node_modules/sql.js/dist/sql-wasm.wasm":"./sql-wasm.wasm";this.sqlJs=await Ql({locateFile:i=>r})}}async loadFromFile(n,r){await this.initialize();try{const i=await r.readDatabase(n);if(i){const s=new Uint8Array(i);this.db=new this.sqlJs.Database(s)}else this.db=new this.sqlJs.Database;return!0}catch(i){return console.error("Error loading database:",i),this.db=new this.sqlJs.Database,!1}}createNew(){if(!this.sqlJs)throw new Error("SQL.js not initialized");this.db=new this.sqlJs.Database}createTable(n,r){if(!this.db)throw new Error("Database not initialized");const i=r.map(c=>{let f;return c.type==="number"?f="REAL":c.type==="boolean"?f="INTEGER":f="TEXT",`"${c.name}" ${f}`}).join(", "),s=`CREATE TABLE "${n}" (${i})`;this.db.run(s)}insertData(n,r,i){if(!this.db)throw new Error("Database not initialized");if(i.length===0)return;const s=r.map(p=>`"${p.name}"`).join(", "),c=r.map(()=>"?").join(", "),f=`INSERT INTO "${n}" (${s}) VALUES (${c})`,h=this.db.prepare(f);for(const p of i){const u=r.map(b=>{const v=p[b.name];return v==null?null:b.type==="boolean"?v?1:0:v});h.run(u)}h.free()}getTableNames(){if(!this.db)return[];const n=this.db.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%'");if(n.length===0)return[];const r=[];for(const i of n[0].values)r.push(i[0]);return r}getTableData(n,r=1e3,i=0){if(!this.db)return{columns:[],rows:[]};const s=this.db.exec(`SELECT * FROM "${n}" LIMIT ${r} OFFSET ${i}`);if(s.length===0)return{columns:[],rows:[]};const c=s[0].columns,f=s[0].values.map(h=>{const p={};return c.forEach((u,b)=>{p[u]=h[b]}),p});return{columns:c,rows:f}}getAllTableData(n){if(!this.db)return{columns:[],rows:[]};const r=this.db.exec(`SELECT * FROM "${n}"`);if(r.length===0)return{columns:[],rows:[]};const i=r[0].columns,s=r[0].values.map(c=>{const f={};return i.forEach((h,p)=>{f[h]=c[p]}),f});return{columns:i,rows:s}}getTableRowCount(n){if(!this.db)return 0;const r=this.db.exec(`SELECT COUNT(*) as count FROM "${n}"`);return r.length===0?0:r[0].values[0][0]}async saveToFile(n,r){if(!this.db)throw new Error("Database not initialized");const i=this.db.export(),s=Array.from(i);await r.writeDatabase(n,s)}deleteTable(n){if(!this.db)throw new Error("Database not initialized");this.db.run(`DROP TABLE IF EXISTS "${n}"`)}executeSQL(n){if(!this.db)throw new Error("Database not initialized");try{if(n.trim().toUpperCase().startsWith("SELECT")){const i=this.db.exec(n);if(i.length===0)return{type:"select",columns:[],rows:[],rowCount:0};const s=i[0].columns,c=i[0].values.map(f=>{const h={};return s.forEach((p,u)=>{h[p]=f[u]}),h});return{type:"select",columns:s,rows:c,rowCount:c.length}}else{this.db.run(n);const i=this.db.exec("SELECT changes() as count");return{type:"modify",affectedRows:i.length>0?i[0].values[0][0]:0}}}catch(r){throw new Error(`SQL execution error: ${r.message}`)}}getTableSchema(n){if(!this.db)return[];try{const r=this.db.exec(`PRAGMA table_info("${n}")`);return r.length===0?[]:r[0].values.map(i=>({name:i[1],type:i[2],notnull:i[3],defaultValue:i[4],pk:i[5]}))}catch(r){return console.error("Error getting table schema:",r),[]}}close(){this.db&&(this.db.close(),this.db=null)}}class Bl{constructor(n){this.api=n,this.logPath=null}async initialize(){this.logPath=await this.api.getDefaultLogPath()}getLogPath(){return this.logPath}async loadLog(){try{return await this.api.readLogFile(this.logPath)||""}catch(n){return console.error("Error loading log file:",n),""}}async saveLog(n){try{return await this.api.writeLogFile(this.logPath,n),!0}catch(r){return console.error("Error saving log file:",r),!1}}parseLogEntries(n){if(!n||n.trim()==="")return[];const r=n.split(`
`),i=[];let s=null;for(let c=0;c<r.length;c++){const f=r[c].trim(),h=f.match(/^\[(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})\]/);h?(s&&i.push(s),s={timestamp:h[1],lineNumber:c+1,naturalLanguage:"",sql:"",error:null,result:null}):s&&(f.startsWith("NL:")?s.naturalLanguage=f.substring(3).trim():f.startsWith("SQL:")?s.sql=f.substring(4).trim():f.startsWith("ERROR:")?s.error=f.substring(6).trim():f.startsWith("RESULT:")?s.result=f.substring(7).trim():f&&!f.startsWith("---")&&(s.sql&&!s.error&&!s.result?s.sql+=" "+f:s.error&&!s.result?s.error+=" "+f:s.result?s.result+=" "+f:!s.naturalLanguage&&!s.sql&&(s.naturalLanguage=f)))}return s&&i.push(s),i}formatLogEntry(n){let r=`[${n.timestamp}]
`;return n.naturalLanguage&&(r+=`NL: ${n.naturalLanguage}
`),n.sql&&(r+=`SQL: ${n.sql}
`),n.error&&(r+=`ERROR: ${n.error}
`),n.result&&(r+=`RESULT: ${n.result}
`),r+=`---
`,r}}class Yn{static parseSchemaLine(n){const r=[],i=n.split(","),s=["string","number","boolean"];for(const c of i){const f=c.trim();if(!f)continue;const h=f.indexOf(":");if(h>0){const p=f.substring(0,h).trim(),u=f.substring(h+1).trim().toLowerCase();if(!s.includes(u))throw new Error(`Invalid column type modifier "${u}" for column "${p}". Valid types are: string, number, boolean`);r.push({name:p,type:u})}else r.push({name:f,type:"string"})}return r}static parseCSV(n){const r=n.split(/\r?\n/).filter(c=>c.trim());if(r.length===0)throw new Error("CSV file is empty");const i=this.parseSchemaLine(r[0]),s=[];for(let c=1;c<r.length;c++){const f=this.parseCSVLine(r[c]),h={};i.forEach((p,u)=>{let b=f[u]||"";if(b=b.trim(),p.type==="number")h[p.name]=b===""?null:parseFloat(b),isNaN(h[p.name])&&(h[p.name]=null);else if(p.type==="boolean"){const v=b.toLowerCase();h[p.name]=v==="true"||v==="1"||v==="yes"||v==="y"}else h[p.name]=b}),s.push(h)}return{schema:i,data:s}}static parseCSVLine(n){const r=[];let i="",s=!1;for(let c=0;c<n.length;c++){const f=n[c];f==='"'?s&&n[c+1]==='"'?(i+='"',c++):s=!s:f===","&&!s?(r.push(i),i=""):i+=f}return r.push(i),r}static getTableNameFromPath(n){return n.split(/[/\\]/).pop().replace(/\.csv$/i,"").replace(/[^a-zA-Z0-9_]/g,"_")}}function Kn(o,n,r){const i=o.slice();return i[1]=n[r],i}function Zn(o,n,r){const i=o.slice();return i[4]=n[r],i}function xn(o,n,r){const i=o.slice();return i[4]=n[r],i}function $n(o){let n,r=o[4]+"",i;return{c(){n=y("th"),i=D(r),E(n,"class","svelte-1l2op9x")},m(s,c){W(s,n,c),m(n,i)},p(s,c){c&1&&r!==(r=s[4]+"")&&se(i,r)},d(s){s&&Q(n)}}}function er(o){let n,r=(o[1][o[4]]??"")+"",i;return{c(){n=y("td"),i=D(r),E(n,"class","svelte-1l2op9x")},m(s,c){W(s,n,c),m(n,i)},p(s,c){c&1&&r!==(r=(s[1][s[4]]??"")+"")&&se(i,r)},d(s){s&&Q(n)}}}function tr(o){let n,r,i=Te(o[0].columns),s=[];for(let c=0;c<i.length;c+=1)s[c]=er(Zn(o,i,c));return{c(){n=y("tr");for(let c=0;c<s.length;c+=1)s[c].c();r=F(),E(n,"class","svelte-1l2op9x")},m(c,f){W(c,n,f);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(n,null);m(n,r)},p(c,f){if(f&1){i=Te(c[0].columns);let h;for(h=0;h<i.length;h+=1){const p=Zn(c,i,h);s[h]?s[h].p(p,f):(s[h]=er(p),s[h].c(),s[h].m(n,r))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}},d(c){c&&Q(n),ct(s,c)}}}function Hl(o){let n,r,i,s,c,f,h=Te(o[0].columns),p=[];for(let v=0;v<h.length;v+=1)p[v]=$n(xn(o,h,v));let u=Te(o[0].rows),b=[];for(let v=0;v<u.length;v+=1)b[v]=tr(Kn(o,u,v));return{c(){n=y("div"),r=y("table"),i=y("thead"),s=y("tr");for(let v=0;v<p.length;v+=1)p[v].c();c=F(),f=y("tbody");for(let v=0;v<b.length;v+=1)b[v].c();E(s,"class","svelte-1l2op9x"),E(i,"class","svelte-1l2op9x"),E(r,"class","data-table svelte-1l2op9x"),E(n,"class","table-container svelte-1l2op9x")},m(v,S){W(v,n,S),m(n,r),m(r,i),m(i,s);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(s,null);m(r,c),m(r,f);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(f,null)},p(v,[S]){if(S&1){h=Te(v[0].columns);let w;for(w=0;w<h.length;w+=1){const C=xn(v,h,w);p[w]?p[w].p(C,S):(p[w]=$n(C),p[w].c(),p[w].m(s,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=h.length}if(S&1){u=Te(v[0].rows);let w;for(w=0;w<u.length;w+=1){const C=Kn(v,u,w);b[w]?b[w].p(C,S):(b[w]=tr(C),b[w].c(),b[w].m(f,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=u.length}},i:me,o:me,d(v){v&&Q(n),ct(p,v),ct(b,v)}}}function Xl(o,n,r){let{tableData:i={columns:[],rows:[]}}=n;return o.$$set=s=>{"tableData"in s&&r(0,i=s.tableData)},[i]}class Jl extends lt{constructor(n){super(),rt(this,n,Xl,Hl,et,{tableData:0})}}class Gl{static sqliteTypeToCsvType(n,r,i=[]){const s=n.toUpperCase();if(s==="TEXT")return"string";if(s==="REAL")return"number";if(s==="INTEGER"){if(i.length>0&&i.every(u=>u==null||u===0||u===1||u==="0"||u==="1"||u===!0||u===!1))return"boolean";const c=r.toLowerCase();return["active","enabled","is","has","can","should","flag","bool"].some(p=>c.startsWith(p)||c.includes("_"+p)||c.includes(p+"_"))?"boolean":"number"}return"string"}static formatValue(n,r){if(n==null)return"";if(r==="boolean")return n===0||n==="0"?"false":n===1||n==="1"||n?"true":"false";const i=String(n);return i.includes(",")||i.includes('"')||i.includes(`
`)||i.includes("\r")?`"${i.replace(/"/g,'""')}"`:i}static exportTableToCSV(n,r,i){if(!r||r.length===0)throw new Error("Table schema is required");if(!i||!i.rows||i.rows.length===0)return r.map(b=>{const v=this.sqliteTypeToCsvType(b.type,b.name,[]);return`${b.name}:${v}`}).join(", ")+`
`;const s=i.rows.slice(0,10),c={};r.forEach(u=>{c[u.name]=s.map(b=>b[u.name])});let p=r.map(u=>{const b=this.sqliteTypeToCsvType(u.type,u.name,c[u.name]||[]);return`${u.name}:${b}`}).join(", ")+`
`;for(const u of i.rows){const b=r.map(v=>{const S=this.sqliteTypeToCsvType(v.type,v.name,c[v.name]||[]);return this.formatValue(u[v.name],S)});p+=b.join(",")+`
`}return p}}function nr(o,n,r){const i=o.slice();return i[20]=n[r],i}function Yl(o){let n,r=Te(o[0]),i=[];for(let s=0;s<r.length;s+=1)i[s]=rr(nr(o,r,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();n=Sr()},m(s,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(s,c);W(s,n,c)},p(s,c){if(c&1){r=Te(s[0]);let f;for(f=0;f<r.length;f+=1){const h=nr(s,r,f);i[f]?i[f].p(h,c):(i[f]=rr(h),i[f].c(),i[f].m(n.parentNode,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(s){s&&Q(n),ct(i,s)}}}function Kl(o){let n;return{c(){n=y("option"),n.textContent="No tables available",n.__value="",nn(n,n.__value)},m(r,i){W(r,n,i)},p:me,d(r){r&&Q(n)}}}function rr(o){let n,r=o[20]+"",i,s;return{c(){n=y("option"),i=D(r),n.__value=s=o[20],nn(n,n.__value)},m(c,f){W(c,n,f),m(n,i)},p(c,f){f&1&&r!==(r=c[20]+"")&&se(i,r),f&1&&s!==(s=c[20])&&(n.__value=s,nn(n,n.__value))},d(c){c&&Q(n)}}}function lr(o){let n,r=o[9]?"Exporting...":"Export CSV",i,s,c,f;return{c(){n=y("button"),i=D(r),E(n,"class","export-button svelte-tz36jk"),E(n,"title","Export table to CSV"),n.disabled=s=o[9]||o[8]||!o[3]},m(h,p){W(h,n,p),m(n,i),c||(f=ve(n,"click",o[16]),c=!0)},p(h,p){p&512&&r!==(r=h[9]?"Exporting...":"Export CSV")&&se(i,r),p&776&&s!==(s=h[9]||h[8]||!h[3])&&(n.disabled=s)},d(h){h&&Q(n),c=!1,f()}}}function Zl(o){let n;return{c(){n=y("div"),n.textContent="Select a table to view",E(n,"class","empty-message svelte-tz36jk")},m(r,i){W(r,n,i)},p:me,i:me,o:me,d(r){r&&Q(n)}}}function xl(o){let n;return{c(){n=y("div"),n.textContent="Table is empty",E(n,"class","empty-message svelte-tz36jk")},m(r,i){W(r,n,i)},p:me,i:me,o:me,d(r){r&&Q(n)}}}function $l(o){let n,r,i,s,c,f,h,p,u,b,v,S,w,C,T,k=o[5]+1+"",L,N,te,$=o[6]+1+"",G,X,z,J,re,A,j,ue,R,O,Z,he=o[5]*Ge+1+"",we,ye,Le=Math.min((o[5]+1)*Ge,o[4])+"",Ee,Se,ke,Re,B,le,ae,oe,pe,ce,Y=o[2][o[1]]&&ir(o);return z=new Jl({props:{tableData:o[7]}}),{c(){n=y("div"),r=y("span"),i=D("Table: "),s=y("strong"),c=D(o[1]),f=F(),Y&&Y.c(),h=F(),p=y("span"),u=D("Rows: "),b=y("strong"),v=D(o[4]),S=F(),w=y("span"),C=D("Page: "),T=y("strong"),L=D(k),N=D(" of "),te=y("strong"),G=D($),X=F(),ht(z.$$.fragment),J=F(),re=y("div"),A=y("button"),j=D(" Previous"),R=F(),O=y("span"),Z=D("Showing "),we=D(he),ye=D(" - "),Ee=D(Le),Se=D(" of "),ke=D(o[4]),Re=F(),B=y("button"),le=D("Next "),E(s,"class","svelte-tz36jk"),E(b,"class","svelte-tz36jk"),E(T,"class","svelte-tz36jk"),E(te,"class","svelte-tz36jk"),E(n,"class","table-info svelte-tz36jk"),E(A,"class","page-button svelte-tz36jk"),A.disabled=ue=!o[11],E(O,"class","page-info svelte-tz36jk"),E(B,"class","page-button svelte-tz36jk"),B.disabled=ae=!o[10],E(re,"class","pagination svelte-tz36jk")},m(K,fe){W(K,n,fe),m(n,r),m(r,i),m(r,s),m(s,c),m(n,f),Y&&Y.m(n,null),m(n,h),m(n,p),m(p,u),m(p,b),m(b,v),m(n,S),m(n,w),m(w,C),m(w,T),m(T,L),m(w,N),m(w,te),m(te,G),W(K,X,fe),tt(z,K,fe),W(K,J,fe),W(K,re,fe),m(re,A),m(A,j),m(re,R),m(re,O),m(O,Z),m(O,we),m(O,ye),m(O,Ee),m(O,Se),m(O,ke),m(re,Re),m(re,B),m(B,le),oe=!0,pe||(ce=[ve(A,"click",o[14]),ve(B,"click",o[15])],pe=!0)},p(K,fe){(!oe||fe&2)&&se(c,K[1]),K[2][K[1]]?Y?Y.p(K,fe):(Y=ir(K),Y.c(),Y.m(n,h)):Y&&(Y.d(1),Y=null),(!oe||fe&16)&&se(v,K[4]),(!oe||fe&32)&&k!==(k=K[5]+1+"")&&se(L,k),(!oe||fe&64)&&$!==($=K[6]+1+"")&&se(G,$);const Ue={};fe&128&&(Ue.tableData=K[7]),z.$set(Ue),(!oe||fe&2048&&ue!==(ue=!K[11]))&&(A.disabled=ue),(!oe||fe&32)&&he!==(he=K[5]*Ge+1+"")&&se(we,he),(!oe||fe&48)&&Le!==(Le=Math.min((K[5]+1)*Ge,K[4])+"")&&se(Ee,Le),(!oe||fe&16)&&se(ke,K[4]),(!oe||fe&1024&&ae!==(ae=!K[10]))&&(B.disabled=ae)},i(K){oe||(ze(z.$$.fragment,K),oe=!0)},o(K){je(z.$$.fragment,K),oe=!1},d(K){K&&(Q(n),Q(X),Q(J),Q(re)),Y&&Y.d(),nt(z,K),pe=!1,Ve(ce)}}}function ei(o){let n;return{c(){n=y("div"),n.textContent="Loading table data...",E(n,"class","loading-message svelte-tz36jk")},m(r,i){W(r,n,i)},p:me,i:me,o:me,d(r){r&&Q(n)}}}function ir(o){let n,r,i,s=o[2][o[1]].split(/[/\\]/).pop()+"",c;return{c(){n=y("span"),r=D("Source: "),i=y("strong"),c=D(s),E(i,"class","svelte-tz36jk")},m(f,h){W(f,n,h),m(n,r),m(n,i),m(i,c)},p(f,h){h&6&&s!==(s=f[2][f[1]].split(/[/\\]/).pop()+"")&&se(c,s)},d(f){f&&Q(n)}}}function ti(o){let n,r,i,s,c,f,h,p,u,b,v,S,w,C,T,k,L,N;function te(A,j){return A[0].length===0?Kl:Yl}let $=te(o),G=$(o),X=o[1]&&o[3]&&lr(o);const z=[ei,$l,xl,Zl],J=[];function re(A,j){return A[8]?0:A[1]&&A[7].columns.length>0?1:A[1]?2:3}return C=re(o),T=J[C]=z[C](o),{c(){n=y("div"),r=y("header"),i=y("div"),s=y("h2"),s.textContent="Database Tables",c=F(),f=y("select"),G.c(),p=F(),u=y("div"),X&&X.c(),b=F(),v=y("button"),v.textContent="",S=F(),w=y("div"),T.c(),E(s,"class","svelte-tz36jk"),E(f,"class","table-selector svelte-tz36jk"),E(i,"class","header-left svelte-tz36jk"),E(v,"class","refresh-button svelte-tz36jk"),E(v,"title","Refresh"),E(u,"class","header-right svelte-tz36jk"),E(r,"class","viewer-header svelte-tz36jk"),E(w,"class","viewer-content svelte-tz36jk"),E(n,"class","table-viewer svelte-tz36jk")},m(A,j){W(A,n,j),m(n,r),m(r,i),m(i,s),m(i,c),m(i,f),G.m(f,null),Hn(f,o[1]||""),m(r,p),m(r,u),X&&X.m(u,null),m(u,b),m(u,v),m(n,S),m(n,w),J[C].m(w,null),k=!0,L||(N=[ve(f,"change",o[12]),ve(v,"click",o[13])],L=!0)},p(A,[j]){$===($=te(A))&&G?G.p(A,j):(G.d(1),G=$(A),G&&(G.c(),G.m(f,null))),(!k||j&3&&h!==(h=A[1]||""))&&Hn(f,A[1]||""),A[1]&&A[3]?X?X.p(A,j):(X=lr(A),X.c(),X.m(u,b)):X&&(X.d(1),X=null);let ue=C;C=re(A),C===ue?J[C].p(A,j):(Lr(),je(J[ue],1,1,()=>{J[ue]=null}),Ar(),T=J[C],T?T.p(A,j):(T=J[C]=z[C](A),T.c()),ze(T,1),T.m(w,null))},i(A){k||(ze(T),k=!0)},o(A){je(T),k=!1},d(A){A&&Q(n),G.d(),X&&X.d(),J[C].d(),L=!1,Ve(N)}}}let Ge=100;function ni(o,n,r){let i,s,c,{tables:f=[]}=n,{currentTable:h=null}=n,{dbManager:p=null}=n,{tableToCsvMap:u={}}=n,{electronAPI:b=null}=n;const v=Ot();let S={columns:[],rows:[]},w=0,C=0,T=!1,k=!1;async function L(){if(!(!h||!p)){r(8,T=!0);try{r(4,w=p.getTableRowCount(h));const z=C*Ge;r(7,S=p.getTableData(h,Ge,z))}catch(z){console.error("Error loading table data:",z)}finally{r(8,T=!1)}}}function N(z){const J=z.target.value;J&&(r(5,C=0),v("tableSelect",{table:J}))}function te(){L(),v("refresh")}function $(){C>0&&(r(5,C--,C),L())}function G(){const z=Math.ceil(w/Ge)-1;C<z&&(r(5,C++,C),L())}async function X(){if(!(!h||!p||!b||k)){r(9,k=!0);try{const z=p.getTableSchema(h);if(!z||z.length===0){alert("Unable to get table schema");return}const J=p.getAllTableData(h);if(!J||J.rows.length===0){alert("Table is empty, nothing to export");return}const re=Gl.exportTableToCSV(h,z,J),A=await b.saveFile({title:"Export Table to CSV",defaultPath:`${h}.csv`,filters:[{name:"CSV Files",extensions:["csv"]}]});if(!A)return;await b.writeCsvFile(A,re),alert(`Table "${h}" exported successfully to ${A}`)}catch(z){console.error("Error exporting table:",z),alert(`Error exporting table: ${z.message}`)}finally{r(9,k=!1)}}}return o.$$set=z=>{"tables"in z&&r(0,f=z.tables),"currentTable"in z&&r(1,h=z.currentTable),"dbManager"in z&&r(17,p=z.dbManager),"tableToCsvMap"in z&&r(2,u=z.tableToCsvMap),"electronAPI"in z&&r(3,b=z.electronAPI)},o.$$.update=()=>{o.$$.dirty&131074&&h&&p&&L(),o.$$.dirty&10&&h&&console.log("Current table set:",h,"electronAPI available:",!!b),o.$$.dirty&16&&r(6,i=Math.ceil(w/Ge)-1),o.$$.dirty&32&&r(11,s=C>0),o.$$.dirty&96&&r(10,c=C<i)},[f,h,u,b,w,C,i,S,T,k,c,s,N,te,$,G,X,p]}class ri extends lt{constructor(n){super(),rt(this,n,ni,ti,et,{tables:0,currentTable:1,dbManager:17,tableToCsvMap:2,electronAPI:3})}}function li(o){let n,r,i,s,c;return{c(){n=y("div"),r=y("div"),i=F(),s=y("p"),c=D(o[0]),E(r,"class","spinner svelte-1ywxz8e"),E(s,"class","message svelte-1ywxz8e"),E(n,"class","loading-container svelte-1ywxz8e")},m(f,h){W(f,n,h),m(n,r),m(n,i),m(n,s),m(s,c)},p(f,[h]){h&1&&se(c,f[0])},i:me,o:me,d(f){f&&Q(n)}}}function ii(o,n,r){let{message:i="Loading..."}=n;return o.$$set=s=>{"message"in s&&r(0,i=s.message)},[i]}class oi extends lt{constructor(n){super(),rt(this,n,ii,li,et,{message:0})}}function or(o,n,r){const i=o.slice();return i[7]=n[r],i}function si(o){let n;return{c(){n=y("p"),n.textContent="No CSV files specified",E(n,"class","no-files svelte-fu6li4")},m(r,i){W(r,n,i)},p:me,d(r){r&&Q(n)}}}function ai(o){let n,r=Te(o[0].csvFiles),i=[];for(let s=0;s<r.length;s+=1)i[s]=sr(or(o,r,s));return{c(){n=y("ul");for(let s=0;s<i.length;s+=1)i[s].c();E(n,"class","svelte-fu6li4")},m(s,c){W(s,n,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(n,null)},p(s,c){if(c&1){r=Te(s[0].csvFiles);let f;for(f=0;f<r.length;f+=1){const h=or(s,r,f);i[f]?i[f].p(h,c):(i[f]=sr(h),i[f].c(),i[f].m(n,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(s){s&&Q(n),ct(i,s)}}}function sr(o){let n,r,i=o[7]+"",s;return{c(){n=y("li"),r=y("code"),s=D(i),E(r,"class","svelte-fu6li4"),E(n,"class","svelte-fu6li4")},m(c,f){W(c,n,f),m(n,r),m(r,s)},p(c,f){f&1&&i!==(i=c[7]+"")&&se(s,i)},d(c){c&&Q(n)}}}function ui(o){var ae,oe,pe;let n,r,i,s,c,f,h,p,u,b,v,S,w,C,T=(((ae=o[0])==null?void 0:ae.databasePath)||"Not specified")+"",k,L,N,te,$=(((pe=(oe=o[0])==null?void 0:oe.csvFiles)==null?void 0:pe.length)||0)+"",G,X,z,J,re,A,j,ue,R,O=(o[2]||JSON.stringify(o[0],null,2))+"",Z,he,we,ye,Le,Ee,Se,ke;function Re(ce,Y){var K;return(K=ce[0])!=null&&K.csvFiles&&ce[0].csvFiles.length>0?ai:si}let B=Re(o),le=B(o);return{c(){n=y("div"),r=y("div"),i=y("h2"),i.textContent="Configuration File Preview",s=F(),c=y("p"),f=D("File: "),h=y("code"),p=D(o[1]),u=F(),b=y("div"),v=y("h3"),v.textContent="Database Path:",S=F(),w=y("div"),C=y("code"),k=D(T),L=F(),N=y("h3"),te=D("CSV Files ("),G=D($),X=D("):"),z=F(),J=y("div"),le.c(),re=F(),A=y("div"),j=y("h3"),j.textContent="Raw File Content:",ue=F(),R=y("pre"),Z=D(O),he=F(),we=y("div"),ye=y("button"),ye.textContent="Cancel",Le=F(),Ee=y("button"),Ee.textContent="Proceed with Loading",E(i,"class","svelte-fu6li4"),E(h,"class","svelte-fu6li4"),E(c,"class","config-path svelte-fu6li4"),E(v,"class","svelte-fu6li4"),E(C,"class","svelte-fu6li4"),E(w,"class","config-value svelte-fu6li4"),E(N,"class","svelte-fu6li4"),E(J,"class","csv-files-list svelte-fu6li4"),E(j,"class","svelte-fu6li4"),E(R,"class","svelte-fu6li4"),E(A,"class","raw-json svelte-fu6li4"),E(b,"class","config-display svelte-fu6li4"),E(ye,"class","button secondary svelte-fu6li4"),E(Ee,"class","button primary svelte-fu6li4"),E(we,"class","actions svelte-fu6li4"),E(r,"class","preview-content svelte-fu6li4"),E(n,"class","config-preview svelte-fu6li4")},m(ce,Y){W(ce,n,Y),m(n,r),m(r,i),m(r,s),m(r,c),m(c,f),m(c,h),m(h,p),m(r,u),m(r,b),m(b,v),m(b,S),m(b,w),m(w,C),m(C,k),m(b,L),m(b,N),m(N,te),m(N,G),m(N,X),m(b,z),m(b,J),le.m(J,null),m(b,re),m(b,A),m(A,j),m(A,ue),m(A,R),m(R,Z),m(r,he),m(r,we),m(we,ye),m(we,Le),m(we,Ee),Se||(ke=[ve(ye,"click",o[4]),ve(Ee,"click",o[3])],Se=!0)},p(ce,[Y]){var K,fe,Ue;Y&2&&se(p,ce[1]),Y&1&&T!==(T=(((K=ce[0])==null?void 0:K.databasePath)||"Not specified")+"")&&se(k,T),Y&1&&$!==($=(((Ue=(fe=ce[0])==null?void 0:fe.csvFiles)==null?void 0:Ue.length)||0)+"")&&se(G,$),B===(B=Re(ce))&&le?le.p(ce,Y):(le.d(1),le=B(ce),le&&(le.c(),le.m(J,null))),Y&5&&O!==(O=(ce[2]||JSON.stringify(ce[0],null,2))+"")&&se(Z,O)},i:me,o:me,d(ce){ce&&Q(n),le.d(),Se=!1,Ve(ke)}}}function fi(o,n,r){let{config:i=null}=n,{configPath:s=""}=n,{configManager:c=null}=n;const f=Ot();let h="";Pr(async()=>{if(c&&s)try{r(2,h=await c.readConfigFileRaw(s)||"")}catch(b){console.error("Error reading raw config:",b),r(2,h=JSON.stringify(i,null,2))}else r(2,h=JSON.stringify(i,null,2))});function p(){f("proceed")}function u(){f("cancel")}return o.$$set=b=>{"config"in b&&r(0,i=b.config),"configPath"in b&&r(1,s=b.configPath),"configManager"in b&&r(5,c=b.configManager)},[i,s,h,p,u,c]}class ci extends lt{constructor(n){super(),rt(this,n,fi,ui,et,{config:0,configPath:1,configManager:5})}}function ar(o,n,r){const i=o.slice();return i[12]=n[r],i}function hi(o){let n,r,i,s,c,f,h,p,u,b,v=o[0].length+"",S,w,C,T,k,L,N,te,$,G,X=o[2]?"Deleting...":`Delete Selected (${o[1].size})`,z,J,re,A,j=Te(o[0]),ue=[];for(let R=0;R<j.length;R+=1)ue[R]=ur(ar(o,j,R));return{c(){n=y("p"),n.textContent="The following tables already exist in the database. Select the tables you want to delete before loading new CSV files.",r=F(),i=y("div"),s=y("div"),c=y("label"),f=y("input"),h=F(),p=y("span"),u=y("strong"),b=D("Select All ("),S=D(v),w=D(" tables)"),C=F(),T=y("div");for(let R=0;R<ue.length;R+=1)ue[R].c();k=F(),L=y("div"),N=y("button"),te=D("Skip (Keep All Tables)"),$=F(),G=y("button"),z=D(X),E(n,"class","info-text svelte-byhfly"),E(f,"type","checkbox"),f.checked=o[3],E(f,"class","svelte-byhfly"),E(c,"class","checkbox-label svelte-byhfly"),E(s,"class","select-all-container svelte-byhfly"),E(T,"class","table-list svelte-byhfly"),E(i,"class","table-list-container svelte-byhfly"),E(N,"class","button secondary svelte-byhfly"),N.disabled=o[2],E(G,"class","button danger svelte-byhfly"),G.disabled=J=o[2]||!o[4],E(L,"class","actions svelte-byhfly")},m(R,O){W(R,n,O),W(R,r,O),W(R,i,O),m(i,s),m(s,c),m(c,f),m(c,h),m(c,p),m(p,u),m(u,b),m(u,S),m(u,w),m(i,C),m(i,T);for(let Z=0;Z<ue.length;Z+=1)ue[Z]&&ue[Z].m(T,null);W(R,k,O),W(R,L,O),m(L,N),m(N,te),m(L,$),m(L,G),m(G,z),re||(A=[ve(f,"change",o[6]),ve(N,"click",o[8]),ve(G,"click",o[7])],re=!0)},p(R,O){if(O&8&&(f.checked=R[3]),O&1&&v!==(v=R[0].length+"")&&se(S,v),O&35){j=Te(R[0]);let Z;for(Z=0;Z<j.length;Z+=1){const he=ar(R,j,Z);ue[Z]?ue[Z].p(he,O):(ue[Z]=ur(he),ue[Z].c(),ue[Z].m(T,null))}for(;Z<ue.length;Z+=1)ue[Z].d(1);ue.length=j.length}O&4&&(N.disabled=R[2]),O&6&&X!==(X=R[2]?"Deleting...":`Delete Selected (${R[1].size})`)&&se(z,X),O&20&&J!==(J=R[2]||!R[4])&&(G.disabled=J)},d(R){R&&(Q(n),Q(r),Q(i),Q(k),Q(L)),ct(ue,R),re=!1,Ve(A)}}}function di(o){let n,r,i,s,c,f;return{c(){n=y("div"),r=y("p"),r.textContent="No existing tables found in the database.",i=F(),s=y("button"),s.textContent="Proceed to Load CSV Files",E(r,"class","svelte-byhfly"),E(s,"class","button primary svelte-byhfly"),E(n,"class","no-tables svelte-byhfly")},m(h,p){W(h,n,p),m(n,r),m(n,i),m(n,s),c||(f=ve(s,"click",o[8]),c=!0)},p:me,d(h){h&&Q(n),c=!1,f()}}}function ur(o){let n,r,i,s,c,f,h=o[12]+"",p,u,b,v;function S(){return o[10](o[12])}return{c(){n=y("div"),r=y("label"),i=y("input"),c=F(),f=y("span"),p=D(h),u=F(),E(i,"type","checkbox"),i.checked=s=o[1].has(o[12]),E(i,"class","svelte-byhfly"),E(f,"class","table-name svelte-byhfly"),E(r,"class","checkbox-label svelte-byhfly"),E(n,"class","table-item svelte-byhfly")},m(w,C){W(w,n,C),m(n,r),m(r,i),m(r,c),m(r,f),m(f,p),m(n,u),b||(v=ve(i,"change",S),b=!0)},p(w,C){o=w,C&3&&s!==(s=o[1].has(o[12]))&&(i.checked=s),C&1&&h!==(h=o[12]+"")&&se(p,h)},d(w){w&&Q(n),b=!1,v()}}}function mi(o){let n,r,i,s;function c(p,u){return p[0].length===0?di:hi}let f=c(o),h=f(o);return{c(){n=y("div"),r=y("div"),i=y("h2"),i.textContent="Existing Database Tables",s=F(),h.c(),E(i,"class","svelte-byhfly"),E(r,"class","manager-content svelte-byhfly"),E(n,"class","table-manager svelte-byhfly")},m(p,u){W(p,n,u),m(n,r),m(r,i),m(r,s),h.m(r,null)},p(p,[u]){f===(f=c(p))&&h?h.p(p,u):(h.d(1),h=f(p),h&&(h.c(),h.m(r,null)))},i:me,o:me,d(p){p&&Q(n),h.d()}}}function pi(o,n,r){let i,s,{tables:c=[]}=n,{dbManager:f=null}=n;const h=Ot();let p=!1,u=new Set;function b(T){u.has(T)?u.delete(T):u.add(T),r(1,u)}function v(){u.size===c.length?u.clear():r(1,u=new Set(c)),r(1,u)}async function S(){if(u.size===0){h("proceed");return}r(2,p=!0);try{for(const T of u)f&&f.db&&f.db.run(`DROP TABLE IF EXISTS "${T}"`);h("tablesDeleted")}catch(T){console.error("Error deleting tables:",T)}finally{r(2,p=!1)}}function w(){h("proceed")}const C=T=>b(T);return o.$$set=T=>{"tables"in T&&r(0,c=T.tables),"dbManager"in T&&r(9,f=T.dbManager)},o.$$.update=()=>{o.$$.dirty&2&&r(4,i=u.size>0),o.$$.dirty&3&&r(3,s=c.length>0&&u.size===c.length)},[c,u,p,s,i,b,v,S,w,f,C]}class bi extends lt{constructor(n){super(),rt(this,n,pi,mi,et,{tables:0,dbManager:9})}}function fr(o,n,r){const i=o.slice();return i[8]=n[r],i[10]=r,i}function cr(o){let n,r,i,s,c,f,h;return{c(){n=y("div"),r=y("pre"),i=D(o[1]),s=F(),c=y("button"),c.textContent="",E(r,"class","svelte-115fefa"),E(c,"class","svelte-115fefa"),E(n,"class","error-banner svelte-115fefa")},m(p,u){W(p,n,u),m(n,r),m(r,i),m(n,s),m(n,c),f||(h=ve(c,"click",o[4]),f=!0)},p(p,u){u&2&&se(i,p[1])},d(p){p&&Q(n),f=!1,h()}}}function gi(o){let n=[],r=new Map,i,s=Te(o[0]);const c=f=>f[10];for(let f=0;f<s.length;f+=1){let h=fr(o,s,f),p=c(h);r.set(p,n[f]=gr(p,h))}return{c(){for(let f=0;f<n.length;f+=1)n[f].c();i=Sr()},m(f,h){for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(f,h);W(f,i,h)},p(f,h){h&1&&(s=Te(f[0]),n=zl(n,h,c,1,f,s,r,i.parentNode,Nl,gr,i,fr))},d(f){f&&Q(i);for(let h=0;h<n.length;h+=1)n[h].d(f)}}}function _i(o){let n;return{c(){n=y("div"),n.textContent="No log entries yet. Execute some commands to see them here.",E(n,"class","empty-message svelte-115fefa")},m(r,i){W(r,n,i)},p:me,d(r){r&&Q(n)}}}function hr(o){let n;return{c(){n=y("span"),n.textContent="ERROR",E(n,"class","error-badge svelte-115fefa")},m(r,i){W(r,n,i)},d(r){r&&Q(n)}}}function dr(o){let n,r,i,s=o[8].naturalLanguage+"",c;return{c(){n=y("div"),r=y("strong"),r.textContent="NL:",i=F(),c=D(s),E(r,"class","svelte-115fefa"),E(n,"class","entry-line svelte-115fefa")},m(f,h){W(f,n,h),m(n,r),m(n,i),m(n,c)},p(f,h){h&1&&s!==(s=f[8].naturalLanguage+"")&&se(c,s)},d(f){f&&Q(n)}}}function mr(o){let n,r,i,s,c=o[8].sql+"",f;return{c(){n=y("div"),r=y("strong"),r.textContent="SQL:",i=F(),s=y("code"),f=D(c),E(r,"class","svelte-115fefa"),E(s,"class","svelte-115fefa"),E(n,"class","entry-line svelte-115fefa")},m(h,p){W(h,n,p),m(n,r),m(n,i),m(n,s),m(s,f)},p(h,p){p&1&&c!==(c=h[8].sql+"")&&se(f,c)},d(h){h&&Q(n)}}}function pr(o){let n,r,i,s=o[8].error+"",c;return{c(){n=y("div"),r=y("strong"),r.textContent="ERROR:",i=F(),c=D(s),E(r,"class","svelte-115fefa"),E(n,"class","entry-line error svelte-115fefa")},m(f,h){W(f,n,h),m(n,r),m(n,i),m(n,c)},p(f,h){h&1&&s!==(s=f[8].error+"")&&se(c,s)},d(f){f&&Q(n)}}}function br(o){let n,r,i,s=o[8].result+"",c;return{c(){n=y("div"),r=y("strong"),r.textContent="RESULT:",i=F(),c=D(s),E(r,"class","svelte-115fefa"),E(n,"class","entry-line result svelte-115fefa")},m(f,h){W(f,n,h),m(n,r),m(n,i),m(n,c)},p(f,h){h&1&&s!==(s=f[8].result+"")&&se(c,s)},d(f){f&&Q(n)}}}function gr(o,n){let r,i,s,c,f=n[8].timestamp+"",h,p,u,b,v,S,w,C,T,k=n[8].error&&hr(),L=n[8].naturalLanguage&&dr(n),N=n[8].sql&&mr(n),te=n[8].error&&pr(n),$=n[8].result&&br(n);return{key:o,first:null,c(){r=y("div"),i=y("div"),s=y("span"),c=D("["),h=D(f),p=D("]"),u=F(),k&&k.c(),b=F(),L&&L.c(),v=F(),N&&N.c(),S=F(),te&&te.c(),w=F(),$&&$.c(),C=F(),E(s,"class","timestamp svelte-115fefa"),E(i,"class","entry-header svelte-115fefa"),E(r,"class",T="log-entry "+(n[8].error?"has-error":"")+" svelte-115fefa"),this.first=r},m(G,X){W(G,r,X),m(r,i),m(i,s),m(s,c),m(s,h),m(s,p),m(i,u),k&&k.m(i,null),m(r,b),L&&L.m(r,null),m(r,v),N&&N.m(r,null),m(r,S),te&&te.m(r,null),m(r,w),$&&$.m(r,null),m(r,C)},p(G,X){n=G,X&1&&f!==(f=n[8].timestamp+"")&&se(h,f),n[8].error?k||(k=hr(),k.c(),k.m(i,null)):k&&(k.d(1),k=null),n[8].naturalLanguage?L?L.p(n,X):(L=dr(n),L.c(),L.m(r,v)):L&&(L.d(1),L=null),n[8].sql?N?N.p(n,X):(N=mr(n),N.c(),N.m(r,S)):N&&(N.d(1),N=null),n[8].error?te?te.p(n,X):(te=pr(n),te.c(),te.m(r,w)):te&&(te.d(1),te=null),n[8].result?$?$.p(n,X):($=br(n),$.c(),$.m(r,C)):$&&($.d(1),$=null),X&1&&T!==(T="log-entry "+(n[8].error?"has-error":"")+" svelte-115fefa")&&E(r,"class",T)},d(G){G&&Q(r),k&&k.d(),L&&L.d(),N&&N.d(),te&&te.d(),$&&$.d()}}}function wi(o){let n,r,i,s,c,f,h,p,u,b,v,S,w=o[1]&&cr(o);function C(L,N){return L[0].length===0?_i:gi}let T=C(o),k=T(o);return{c(){n=y("div"),r=y("header"),i=y("h2"),i.textContent="SQL Command Log",s=F(),c=y("div"),f=y("button"),f.textContent="Refresh",h=F(),w&&w.c(),p=F(),u=y("div"),b=y("div"),k.c(),E(i,"class","svelte-115fefa"),E(f,"class","button refresh svelte-115fefa"),E(c,"class","header-actions svelte-115fefa"),E(r,"class","log-header svelte-115fefa"),E(b,"class","log-display svelte-115fefa"),E(u,"class","log-content svelte-115fefa"),E(n,"class","log-viewer svelte-115fefa")},m(L,N){W(L,n,N),m(n,r),m(r,i),m(r,s),m(r,c),m(c,f),m(n,h),w&&w.m(n,null),m(n,p),m(n,u),m(u,b),k.m(b,null),v||(S=ve(f,"click",o[2]),v=!0)},p(L,[N]){L[1]?w?w.p(L,N):(w=cr(L),w.c(),w.m(n,p)):w&&(w.d(1),w=null),T===(T=C(L))&&k?k.p(L,N):(k.d(1),k=T(L),k&&(k.c(),k.m(b,null)))},i:me,o:me,d(L){L&&Q(n),w&&w.d(),k.d(),v=!1,S()}}}function vi(o,n,r){let{logManager:i=null}=n;Ot();let s="",c=[],f="";async function h(){if(i)try{s=await i.loadLog(),p()}catch(b){console.error("Error loading log:",b),r(1,f=`Error loading log: ${b.message}`)}}function p(){i&&r(0,c=i.parseLogEntries(s))}const u=()=>r(1,f="");return o.$$set=b=>{"logManager"in b&&r(3,i=b.logManager)},o.$$.update=()=>{o.$$.dirty&8&&i&&h()},[c,f,h,i,u]}class yi extends lt{constructor(n){super(),rt(this,n,vi,wi,et,{logManager:3})}}const{window:Ei}=Sl;function _r(o){let n,r,i;return{c(){n=y("div"),r=D("Version "),i=D(o[12]),E(n,"class","version-banner svelte-7zqrgv")},m(s,c){W(s,n,c),m(n,r),m(n,i)},p(s,c){c[0]&4096&&se(i,s[12])},d(s){s&&Q(n)}}}function wr(o){let n,r,i,s=o[13].connected?"":"",c,f,h,p=o[13].message+"",u,b,v,S,w,C,T,k=o[13].suggestion&&vr(o);return{c(){n=y("div"),r=y("div"),i=y("span"),c=D(s),f=F(),h=y("span"),u=D(p),b=F(),k&&k.c(),v=F(),S=y("button"),S.textContent="",E(i,"class","llm-status-icon svelte-7zqrgv"),E(h,"class","llm-status-message svelte-7zqrgv"),E(r,"class","llm-status-content svelte-7zqrgv"),E(S,"class","llm-status-close svelte-7zqrgv"),E(S,"title","Dismiss"),E(n,"class",w="llm-status-banner "+(o[13].connected?"connected":"disconnected")+" svelte-7zqrgv")},m(L,N){W(L,n,N),m(n,r),m(r,i),m(i,c),m(r,f),m(r,h),m(h,u),m(r,b),k&&k.m(r,null),m(n,v),m(n,S),C||(T=ve(S,"click",o[30]),C=!0)},p(L,N){N[0]&8192&&s!==(s=L[13].connected?"":"")&&se(c,s),N[0]&8192&&p!==(p=L[13].message+"")&&se(u,p),L[13].suggestion?k?k.p(L,N):(k=vr(L),k.c(),k.m(r,null)):k&&(k.d(1),k=null),N[0]&8192&&w!==(w="llm-status-banner "+(L[13].connected?"connected":"disconnected")+" svelte-7zqrgv")&&E(n,"class",w)},d(L){L&&Q(n),k&&k.d(),C=!1,T()}}}function vr(o){let n,r,i=o[13].suggestion+"",s,c;return{c(){n=y("span"),r=D("("),s=D(i),c=D(")"),E(n,"class","llm-status-suggestion svelte-7zqrgv")},m(f,h){W(f,n,h),m(n,r),m(n,s),m(n,c)},p(f,h){h[0]&8192&&i!==(i=f[13].suggestion+"")&&se(s,i)},d(f){f&&Q(n)}}}function yr(o){let n,r,i,s,c,f;return{c(){n=y("div"),r=D(o[11]),i=F(),s=y("button"),s.textContent="",E(s,"class","svelte-7zqrgv"),E(n,"class","error-banner svelte-7zqrgv")},m(h,p){W(h,n,p),m(n,r),m(n,i),m(n,s),c||(f=ve(s,"click",o[31]),c=!0)},p(h,p){p[0]&2048&&se(r,h[11])},d(h){h&&Q(n),c=!1,f()}}}function ki(o){let n,r,i,s,c,f,h,p,u,b;return h=new yi({props:{logManager:o[5]}}),h.$on("refresh",o[24]),{c(){n=y("div"),r=y("div"),i=y("button"),i.textContent="Table View",s=F(),c=y("button"),c.textContent="Log View",f=F(),ht(h.$$.fragment),E(i,"class","toggle-button svelte-7zqrgv"),E(c,"class","toggle-button active svelte-7zqrgv"),E(r,"class","view-toggle svelte-7zqrgv"),E(n,"class","viewer-container svelte-7zqrgv")},m(v,S){W(v,n,S),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),tt(h,n,null),p=!0,u||(b=ve(i,"click",o[25]),u=!0)},p(v,S){const w={};S[0]&32&&(w.logManager=v[5]),h.$set(w)},i(v){p||(ze(h.$$.fragment,v),p=!0)},o(v){je(h.$$.fragment,v),p=!1},d(v){v&&Q(n),nt(h),u=!1,b()}}}function qi(o){let n,r,i,s,c,f,h,p,u,b,v,S=o[2]&&window.electronAPI&&Er(o);return p=new ri({props:{tables:o[8],currentTable:o[2],dbManager:o[0],tableToCsvMap:o[9],electronAPI:window.electronAPI}}),p.$on("tableSelect",o[23]),p.$on("refresh",o[24]),{c(){n=y("div"),r=y("div"),i=y("button"),i.textContent="Table View",s=F(),c=y("button"),c.textContent="Log View",f=F(),S&&S.c(),h=F(),ht(p.$$.fragment),E(i,"class","toggle-button active svelte-7zqrgv"),E(c,"class","toggle-button svelte-7zqrgv"),E(r,"class","view-toggle svelte-7zqrgv"),E(n,"class","viewer-container svelte-7zqrgv")},m(w,C){W(w,n,C),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),S&&S.m(n,null),m(n,h),tt(p,n,null),u=!0,b||(v=ve(c,"click",o[25]),b=!0)},p(w,C){w[2]&&window.electronAPI?S?S.p(w,C):(S=Er(w),S.c(),S.m(n,h)):S&&(S.d(1),S=null);const T={};C[0]&256&&(T.tables=w[8]),C[0]&4&&(T.currentTable=w[2]),C[0]&1&&(T.dbManager=w[0]),C[0]&512&&(T.tableToCsvMap=w[9]),p.$set(T)},i(w){u||(ze(p.$$.fragment,w),u=!0)},o(w){je(p.$$.fragment,w),u=!1},d(w){w&&Q(n),S&&S.d(),nt(p),b=!1,v()}}}function Si(o){let n,r;return n=new oi({props:{message:o[10]}}),{c(){ht(n.$$.fragment)},m(i,s){tt(n,i,s),r=!0},p(i,s){const c={};s[0]&1024&&(c.message=i[10]),n.$set(c)},i(i){r||(ze(n.$$.fragment,i),r=!0)},o(i){je(n.$$.fragment,i),r=!1},d(i){nt(n,i)}}}function Ci(o){let n,r;return n=new ci({props:{config:o[6],configPath:o[7],configManager:o[4]}}),n.$on("proceed",o[21]),n.$on("cancel",o[22]),{c(){ht(n.$$.fragment)},m(i,s){tt(n,i,s),r=!0},p(i,s){const c={};s[0]&64&&(c.config=i[6]),s[0]&128&&(c.configPath=i[7]),s[0]&16&&(c.configManager=i[4]),n.$set(c)},i(i){r||(ze(n.$$.fragment,i),r=!0)},o(i){je(n.$$.fragment,i),r=!1},d(i){nt(n,i)}}}function Pi(o){let n,r;return n=new bi({props:{tables:o[8],dbManager:o[0]}}),n.$on("tablesDeleted",o[20]),n.$on("proceed",o[21]),{c(){ht(n.$$.fragment)},m(i,s){tt(n,i,s),r=!0},p(i,s){const c={};s[0]&256&&(c.tables=i[8]),s[0]&1&&(c.dbManager=i[0]),n.$set(c)},i(i){r||(ze(n.$$.fragment,i),r=!0)},o(i){je(n.$$.fragment,i),r=!1},d(i){nt(n,i)}}}function Er(o){let n;function r(c,f){return c[16]?Mi:c[19]?Ai:c[3].length===0?Li:Ti}let i=r(o),s=i(o);return{c(){n=y("div"),s.c(),E(n,"class","commands-panel svelte-7zqrgv")},m(c,f){W(c,n,f),s.m(n,null)},p(c,f){i===(i=r(c))&&s?s.p(c,f):(s.d(1),s=i(c),s&&(s.c(),s.m(n,null)))},d(c){c&&Q(n),s.d()}}}function Ti(o){let n,r,i=o[3].length+"",s,c;return{c(){n=y("div"),r=D("All commands completed ("),s=D(i),c=D(" total)"),E(n,"class","commands-complete svelte-7zqrgv")},m(f,h){W(f,n,h),m(n,r),m(n,s),m(n,c)},p(f,h){h[0]&8&&i!==(i=f[3].length+"")&&se(s,i)},d(f){f&&Q(n)}}}function Li(o){let n;return{c(){n=y("div"),n.textContent="No commands loaded. Create a commands.txt file in the application directory.",E(n,"class","commands-info svelte-7zqrgv")},m(r,i){W(r,n,i)},p:me,d(r){r&&Q(n)}}}function Ai(o){let n,r,i,s,c,f,h,p,u,b,v=o[15]?"Executing...":"Execute Next Command",S,w,C;return{c(){n=y("div"),r=y("div"),i=D("Next Command ("),s=D(o[18]),c=D("):"),f=F(),h=y("div"),p=D(o[17]),u=F(),b=y("button"),S=D(v),E(r,"class","command-label svelte-7zqrgv"),E(h,"class","command-text svelte-7zqrgv"),E(b,"class","execute-next-button svelte-7zqrgv"),b.disabled=o[15],E(b,"title","Execute this command"),E(n,"class","next-command-display svelte-7zqrgv")},m(T,k){W(T,n,k),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),m(n,h),m(h,p),m(n,u),m(n,b),m(b,S),w||(C=ve(b,"click",o[26]),w=!0)},p(T,k){k[0]&262144&&se(s,T[18]),k[0]&131072&&se(p,T[17]),k[0]&32768&&v!==(v=T[15]?"Executing...":"Execute Next Command")&&se(S,v),k[0]&32768&&(b.disabled=T[15])},d(T){T&&Q(n),w=!1,C()}}}function Mi(o){let n,r;return{c(){n=y("div"),r=D(o[16]),E(n,"class","commands-error svelte-7zqrgv")},m(i,s){W(i,n,s),m(n,r)},p(i,s){s[0]&65536&&se(r,i[16])},d(i){i&&Q(n)}}}function Ni(o){let n,r,i,s,c,f,h,p,u,b=o[12]&&_r(o),v=o[14]&&o[13]&&wr(o),S=o[11]&&yr(o);const w=[Pi,Ci,Si,qi,ki],C=[];function T(k,L){return k[1]==="tableManager"?0:k[1]==="configPreview"?1:k[1]==="loading"?2:k[1]==="viewer"?3:k[1]==="logView"?4:-1}return~(c=T(o))&&(f=C[c]=w[c](o)),{c(){n=y("div"),b&&b.c(),r=F(),v&&v.c(),i=F(),S&&S.c(),s=F(),f&&f.c(),E(n,"class","app svelte-7zqrgv")},m(k,L){W(k,n,L),b&&b.m(n,null),m(n,r),v&&v.m(n,null),m(n,i),S&&S.m(n,null),m(n,s),~c&&C[c].m(n,null),h=!0,p||(u=ve(Ei,"beforeunload",o[29]),p=!0)},p(k,L){k[12]?b?b.p(k,L):(b=_r(k),b.c(),b.m(n,r)):b&&(b.d(1),b=null),k[14]&&k[13]?v?v.p(k,L):(v=wr(k),v.c(),v.m(n,i)):v&&(v.d(1),v=null),k[11]?S?S.p(k,L):(S=yr(k),S.c(),S.m(n,s)):S&&(S.d(1),S=null);let N=c;c=T(k),c===N?~c&&C[c].p(k,L):(f&&(Lr(),je(C[N],1,1,()=>{C[N]=null}),Ar()),~c?(f=C[c],f?f.p(k,L):(f=C[c]=w[c](k),f.c()),ze(f,1),f.m(n,null)):f=null)},i(k){h||(ze(f),h=!0)},o(k){je(f),h=!1},d(k){k&&Q(n),b&&b.d(),v&&v.d(),S&&S.d(),~c&&C[c].d(),p=!1,u()}}}function zi(o,n,r){let i,s,c,f,h,p,u="loading",b=null,v=null,S=[],w={},C=null,T="",k="",L="",N=null,te=!0;Pr(async()=>{if(window.addEventListener("llm-status",B=>{r(13,N=B.detail),console.log("LLM Status:",N)}),console.log("App mounted, checking for electronAPI..."),console.log("window.electronAPI:",window.electronAPI),setTimeout(async()=>{if(!N&&window.electronAPI&&window.electronAPI.testOllamaConnection)try{const B=await window.electronAPI.testOllamaConnection();r(13,N={connected:B.success,message:B.success?"Ollama connected successfully":`Ollama not available: ${B.error||B.message||"Connection failed"}`,host:B.host||"localhost",port:B.port||"11434",error:B.error,suggestion:B.suggestion})}catch(B){r(13,N={connected:!1,message:`Failed to test Ollama connection: ${B.message}`})}},1e3),window.electronAPI)try{window.electronAPI.getAppVersion&&(r(12,L=await window.electronAPI.getAppVersion()),console.log(`Application version: ${L}`)),r(4,f=new Dl(window.electronAPI)),await f.initialize(),r(0,h=new Wl),await h.initialize(),r(5,p=new Bl(window.electronAPI)),await p.initialize(),console.log("Initialization complete"),await $()}catch(B){console.error("Initialization error:",B),r(11,k=`Initialization error: ${B.message}`)}else console.error("Electron API not available"),r(11,k="Electron API not available. Please run this application in Electron.")});async function $(){try{if(r(10,T="Loading database..."),r(7,v=f.getDefaultConfigPath()),r(6,b=await f.loadConfig(v)),b||(await f.createDefaultConfig(),r(6,b=await f.loadConfig(v))),!b||!f.validateConfig(b)){r(11,k="Invalid configuration file");return}await h.loadFromFile(b.databasePath,window.electronAPI),r(8,S=h.getTableNames()),r(1,u="tableManager"),r(10,T="")}catch(B){r(11,k=`Error loading config: ${B.message}`),console.error(B)}}async function G(){h&&b&&await h.saveToFile(b.databasePath,window.electronAPI),h&&r(8,S=h.getTableNames()),X()}function X(){r(1,u="loading"),z()}async function z(){if(!b||!b.csvFiles||b.csvFiles.length===0){r(8,S=h.getTableNames()),S.length>0&&r(2,C=S[0]),r(1,u="viewer"),r(10,T="");return}r(10,T="Checking CSV files...");const B=new Set(h.getTableNames());r(9,w={});let le=0,ae=0;for(let oe=0;oe<b.csvFiles.length;oe++){const pe=b.csvFiles[oe],ce=Yn.getTableNameFromPath(pe);if(B.has(ce)){console.log(`Table ${ce} already exists, skipping CSV file ${pe}`),ae++,r(9,w[ce]=pe,w);continue}r(10,T=`Loading ${pe}... (${oe+1}/${b.csvFiles.length})`);try{const Y=await window.electronAPI.readCsvFile(pe),{schema:K,data:fe}=Yn.parseCSV(Y);r(9,w[ce]=pe,w),h.createTable(ce,K),h.insertData(ce,K,fe),le++,B.add(ce)}catch(Y){console.error(`Error loading CSV file ${pe}:`,Y),r(11,k=`Error loading ${pe}: ${Y.message}`)}}if(le>0&&(r(10,T="Saving database..."),await h.saveToFile(b.databasePath,window.electronAPI)),r(8,S=h.getTableNames()),S.length>0&&(r(2,C=S[0]),A()),ae>0){const oe=`Loaded ${le} file(s), skipped ${ae} file(s) (tables already exist)`;console.log(oe),k||setTimeout(()=>{},100)}r(1,u="viewer"),r(10,T="")}function J(){r(1,u="startup"),r(6,b=null),r(7,v=null)}function re(B){var ae;const le=(ae=B.detail)==null?void 0:ae.table;le&&(r(2,C=le),A())}function A(){h&&C&&h.getTableSchema(C)}function j(){h&&(r(8,S=h.getTableNames()),S.length>0&&!S.includes(C)?(r(2,C=S[0]),A()):C&&A())}function ue(){u==="viewer"?r(1,u="logView"):u==="logView"&&r(1,u="viewer")}async function R(B){const le=B.detail;if(!p)return;const ae=p.formatLogEntry(le),oe=await p.loadLog(),pe=oe+(oe?`
`:"")+ae;await p.saveLog(pe)}let O=[],Z=0,he=!1,we=null,ye=!1;async function Le(){if(!window.electronAPI){r(3,O=[]),r(16,we="Electron API not available"),r(28,ye=!1);return}try{const le=(await window.electronAPI.readCommandsFile()).split(`
`).map(ae=>ae.trim()).filter(ae=>ae.length>0&&!ae.startsWith("#")&&!ae.startsWith("["));r(3,O=le),r(16,we=null),r(28,ye=!0),Z>=O.length&&r(27,Z=O.length),O.length===0&&r(16,we="No commands found in commands.txt (empty file or only comments)")}catch(B){console.error("Error loading commands:",B),r(3,O=[]),r(16,we=`Error reading commands.txt: ${B.message}`),r(28,ye=!1)}}async function Ee(){if(!window.electronAPI||!h||!C){r(11,k="Electron API, database, or table not available");return}if(!(he||!i)){r(15,he=!0),r(11,k=""),r(16,we=null);try{let B=h.getTableSchema(C);if(!B||B.length===0){r(11,k="Unable to get table schema"),r(15,he=!1);return}const le=i;console.log(`Processing command ${Z+1}/${O.length}: ${le}`);let ae=null;try{const Y=await window.electronAPI.getSqlForCommand(le);Y&&Y.trim()!==""&&(ae=Y.trim(),console.log(`Using existing SQL for command: ${ae}`))}catch(Y){console.warn("Error checking for existing SQL:",Y)}if(!ae)try{if(ae=await window.electronAPI.translateToSQL(le,C,B),!ae||ae.trim()==="")throw new Error("Empty SQL returned from translation");console.log(`Generated new SQL for command: ${ae}`)}catch(Y){const K=Y.message;console.error(`Error translating command ${Z+1}:`,K);const fe=new Date().toISOString().replace("T"," ").substring(0,19);await R({detail:{naturalLanguage:le,sql:null,error:K,result:null,timestamp:fe}}),r(11,k=`Error translating command ${Z+1} ("${le}"): ${K}`),r(15,he=!1);return}let oe=null,pe=null;try{oe=h.executeSQL(ae),b&&oe.type==="modify"&&(await h.saveToFile(b.databasePath,window.electronAPI),j(),A())}catch(Y){pe=Y.message||"SQL execution failed",console.error(`Error executing command ${Z+1}:`,pe);const K=new Date().toISOString().replace("T"," ").substring(0,19);await R({detail:{naturalLanguage:le,sql:ae,error:pe,result:null,timestamp:K}}),r(11,k=`Error executing command ${Z+1} ("${le}"): ${pe}`),r(15,he=!1);return}const ce=new Date().toISOString().replace("T"," ").substring(0,19);await R({detail:{naturalLanguage:le,sql:ae,error:null,result:oe?oe.type==="select"?`Returned ${oe.rowCount} row(s)`:`Affected ${oe.affectedRows} row(s)`:null,timestamp:ce}});try{const Y=await window.electronAPI.getSqlForCommand(le);!Y||Y.trim()===""?(await window.electronAPI.insertSqlIntoCommandsFile(le,ae),console.log(`SQL inserted into commands.txt after command: ${le}`)):console.log("SQL already exists for command, skipping insertion"),await Le()}catch(Y){console.error("Error inserting SQL into commands.txt:",Y)}r(27,Z=Z+1),console.log(`Command ${Z}/${O.length} completed, moving to next`)}catch(B){console.error("Error executing command:",B),r(11,k=`Error executing command: ${B.message}`)}finally{r(15,he=!1)}}}const Se=()=>{h&&h.close()},ke=()=>r(14,te=!1),Re=()=>r(11,k="");return o.$$.update=()=>{o.$$.dirty[0]&134217736&&r(17,i=Z<O.length?O[Z]:null),o.$$.dirty[0]&134217736&&r(19,s=Z<O.length),o.$$.dirty[0]&134217736&&r(18,c=O.length>0?`${Z+1} / ${O.length}`:"0 / 0"),o.$$.dirty[0]&268435462&&u==="viewer"&&C&&window.electronAPI&&!ye&&Le(),o.$$.dirty[0]&5&&C&&h&&A()},[h,u,C,O,f,p,b,v,S,w,T,k,L,N,te,he,we,i,c,s,G,X,J,re,j,ue,Ee,Z,ye,Se,ke,Re]}class Ri extends lt{constructor(n){super(),rt(this,n,zi,Ni,et,{},null,[-1,-1])}}new Ri({target:document.getElementById("app")});
