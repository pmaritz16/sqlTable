var yl=Object.defineProperty;var kl=(s,n,r)=>n in s?yl(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r;var Fe=(s,n,r)=>kl(s,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function fe(){}function kr(s){return s()}function Bn(){return Object.create(null)}function Ae(s){s.forEach(kr)}function Er(s){return typeof s=="function"}function Ze(s,n){return s!=s?n==n:s!==n||s&&typeof s=="object"||typeof s=="function"}function El(s){return Object.keys(s).length===0}const Sl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function m(s,n){s.appendChild(n)}function Q(s,n,r){s.insertBefore(n,r||null)}function U(s){s.parentNode&&s.parentNode.removeChild(s)}function ht(s,n){for(let r=0;r<s.length;r+=1)s[r]&&s[r].d(n)}function k(s){return document.createElement(s)}function W(s){return document.createTextNode(s)}function I(){return W(" ")}function Sr(){return W("")}function de(s,n,r,i){return s.addEventListener(n,r,i),()=>s.removeEventListener(n,r,i)}function y(s,n,r){r==null?s.removeAttribute(n):s.getAttribute(n)!==r&&s.setAttribute(n,r)}function Ll(s){return Array.from(s.childNodes)}function se(s,n){n=""+n,s.data!==n&&(s.data=n)}function it(s,n){s.value=n??""}function Hn(s,n,r){for(let i=0;i<s.options.length;i+=1){const o=s.options[i];if(o.__value===n){o.selected=!0;return}}s.selectedIndex=-1}function Pl(s,n,{bubbles:r=!1,cancelable:i=!1}={}){return new CustomEvent(s,{detail:n,bubbles:r,cancelable:i})}let kt;function yt(s){kt=s}function Lr(){if(!kt)throw new Error("Function called outside component initialization");return kt}function Pr(s){Lr().$$.on_mount.push(s)}function Et(){const s=Lr();return(n,r,{cancelable:i=!1}={})=>{const o=s.$$.callbacks[n];if(o){const c=Pl(n,r,{cancelable:i});return o.slice().forEach(f=>{f.call(s,c)}),!c.defaultPrevented}return!0}}const ct=[],Xn=[];let dt=[];const Jn=[],ql=Promise.resolve();let rn=!1;function Cl(){rn||(rn=!0,ql.then(qr))}function ln(s){dt.push(s)}const nn=new Set;let ft=0;function qr(){if(ft!==0)return;const s=kt;do{try{for(;ft<ct.length;){const n=ct[ft];ft++,yt(n),Tl(n.$$)}}catch(n){throw ct.length=0,ft=0,n}for(yt(null),ct.length=0,ft=0;Xn.length;)Xn.pop()();for(let n=0;n<dt.length;n+=1){const r=dt[n];nn.has(r)||(nn.add(r),r())}dt.length=0}while(ct.length);for(;Jn.length;)Jn.pop()();rn=!1,nn.clear(),yt(s)}function Tl(s){if(s.fragment!==null){s.update(),Ae(s.before_update);const n=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,n),s.after_update.forEach(ln)}}function Al(s){const n=[],r=[];dt.forEach(i=>s.indexOf(i)===-1?n.push(i):r.push(i)),r.forEach(i=>i()),dt=n}const jt=new Set;let lt;function Cr(){lt={r:0,c:[],p:lt}}function Tr(){lt.r||Ae(lt.c),lt=lt.p}function Te(s,n){s&&s.i&&(jt.delete(s),s.i(n))}function je(s,n,r,i){if(s&&s.o){if(jt.has(s))return;jt.add(s),lt.c.push(()=>{jt.delete(s),i&&(r&&s.d(1),i())}),s.o(n)}else i&&i()}function qe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Ml(s,n){s.d(1),n.delete(s.key)}function Nl(s,n,r,i,o,c,f,d,b,u,v,w){let P=s.length,_=c.length,S=P;const T={};for(;S--;)T[s[S].key]=S;const L=[],F=new Map,M=new Map,O=[];for(S=_;S--;){const Z=w(o,c,S),D=r(Z);let N=f.get(D);N?O.push(()=>N.p(Z,n)):(N=u(D,Z),N.c()),F.set(D,L[S]=N),D in T&&M.set(D,Math.abs(S-T[D]))}const q=new Set,j=new Set;function K(Z){Te(Z,1),Z.m(d,v),f.set(Z.key,Z),v=Z.first,_--}for(;P&&_;){const Z=L[_-1],D=s[P-1],N=Z.key,J=D.key;Z===D?(v=Z.first,P--,_--):F.has(J)?!f.has(N)||q.has(N)?K(Z):j.has(J)?P--:M.get(N)>M.get(J)?(j.add(N),K(Z)):(q.add(J),P--):(b(D,f),P--)}for(;P--;){const Z=s[P];F.has(Z.key)||b(Z,f)}for(;_;)K(L[_-1]);return Ae(O),L}function st(s){s&&s.c()}function Ye(s,n,r){const{fragment:i,after_update:o}=s.$$;i&&i.m(n,r),ln(()=>{const c=s.$$.on_mount.map(kr).filter(Er);s.$$.on_destroy?s.$$.on_destroy.push(...c):Ae(c),s.$$.on_mount=[]}),o.forEach(ln)}function Ke(s,n){const r=s.$$;r.fragment!==null&&(Al(r.after_update),Ae(r.on_destroy),r.fragment&&r.fragment.d(n),r.on_destroy=r.fragment=null,r.ctx=[])}function Rl(s,n){s.$$.dirty[0]===-1&&(ct.push(s),Cl(),s.$$.dirty.fill(0)),s.$$.dirty[n/31|0]|=1<<n%31}function xe(s,n,r,i,o,c,f=null,d=[-1]){const b=kt;yt(s);const u=s.$$={fragment:null,ctx:[],props:c,update:fe,not_equal:o,bound:Bn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(b?b.$$.context:[])),callbacks:Bn(),dirty:d,skip_bound:!1,root:n.target||b.$$.root};f&&f(u.root);let v=!1;if(u.ctx=r?r(s,n.props||{},(w,P,..._)=>{const S=_.length?_[0]:P;return u.ctx&&o(u.ctx[w],u.ctx[w]=S)&&(!u.skip_bound&&u.bound[w]&&u.bound[w](S),v&&Rl(s,w)),P}):[],u.update(),v=!0,Ae(u.before_update),u.fragment=i?i(u.ctx):!1,n.target){if(n.hydrate){const w=Ll(n.target);u.fragment&&u.fragment.l(w),w.forEach(U)}else u.fragment&&u.fragment.c();n.intro&&Te(s.$$.fragment),Ye(s,n.target,n.anchor),qr()}yt(b)}class $e{constructor(){Fe(this,"$$");Fe(this,"$$set")}$destroy(){Ke(this,1),this.$destroy=fe}$on(n,r){if(!Er(r))return fe;const i=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return i.push(r),()=>{const o=i.indexOf(r);o!==-1&&i.splice(o,1)}}$set(n){this.$$set&&!El(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Ol="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ol);class Dl{constructor(n){this.api=n,this.defaultConfigPath=null,this.defaultConfig={databasePath:"",csvFiles:[]}}async initialize(){this.defaultConfigPath=await this.api.getDefaultConfigPath();const n=await this.api.getDefaultDatabasePath();this.defaultConfig.databasePath=n}getDefaultConfigPath(){return this.defaultConfigPath}async createDefaultConfig(){try{return await this.api.createDefaultConfig(this.defaultConfig)}catch(n){return console.error("Error creating default config:",n),!1}}async loadConfig(n){try{return await this.api.loadConfig(n)}catch(r){return console.error("Error loading config:",r),null}}async saveConfig(n,r){try{return await this.api.saveConfig(n,r),!0}catch(i){return console.error("Error saving config:",i),!1}}validateConfig(n){return!(!n||!n.databasePath||!Array.isArray(n.csvFiles))}async selectConfigFile(){try{return await this.api.selectConfigFile({title:"Select Config File",filters:[{name:"JSON",extensions:["json"]}]})}catch(n){return console.error("Error selecting config file:",n),null}}async readConfigFileRaw(n){try{return await this.api.readConfigFileRaw(n)}catch(r){return console.error("Error reading config file raw:",r),null}}}function jl(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Il(s){if(s.__esModule)return s;var n=s.default;if(typeof n=="function"){var r=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var o=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return s[i]}})}),r}var Ar={exports:{}};const Fl={},zl=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"})),Gn=Il(zl);(function(s,n){var r=void 0,i=function(o){return r||(r=new Promise(function(c,f){var d=typeof o<"u"?o:{},b=d.onAbort;d.onAbort=function(e){f(new Error(e)),b&&b(e)},d.postRun=d.postRun||[],d.postRun.push(function(){c(d)}),s=void 0;var u;u||(u=typeof d<"u"?d:{});var v=typeof window=="object",w=typeof WorkerGlobalScope<"u",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";u.onRuntimeInitialized=function(){function e(p,C){switch(typeof C){case"boolean":vl(p,C?1:0);break;case"number":pl(p,C);break;case"string":gl(p,C,-1,-1);break;case"object":if(C===null)Un(p);else if(C.length!=null){var z=Rt(C,Nt);_l(p,z,C.length,-1),Ot(z)}else Dt(p,"Wrong API use : tried to return a value of an unknown type ("+C+").",-1);break;default:Un(p)}}function t(p,C){for(var z=[],G=0;G<p;G+=1){var x=ae(C+4*G,"i32"),ue=cl(x);if(ue===1||ue===2)x=bl(x);else if(ue===3)x=hl(x);else if(ue===4){ue=x,x=dl(ue),ue=ml(ue);for(var Oe=new Uint8Array(x),Re=0;Re<x;Re+=1)Oe[Re]=J[ue+Re];x=Oe}else x=null;z.push(x)}return z}function l(p,C){this.Qa=p,this.db=C,this.Oa=1,this.lb=[]}function a(p,C){if(this.db=C,C=bt(p)+1,this.eb=$t(C),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Ve(p,Y,this.eb,C),this.kb=this.eb,this.Za=this.pb=null}function h(p){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),p!=null){var C=this.filename,z="/",G=C;if(z&&(z=typeof z=="string"?z:Qt(z),G=C?Ft(z+"/"+C):z),C=hn(!0,!0),G=Qr(G,C),p){if(typeof p=="string"){z=Array(p.length);for(var x=0,ue=p.length;x<ue;++x)z[x]=p.charCodeAt(x);p=z}Ct(G,C|146),z=ut(G,577),An(z,p,0,p.length,0),Jt(z),Ct(G,C)}}this.handleError(H(this.filename,g)),this.db=ae(g,"i32"),Vn(this.db),this.fb={},this.Sa={}}var g=Je(4),E=u.cwrap,H=E("sqlite3_open","number",["string","number"]),te=E("sqlite3_close_v2","number",["number"]),ee=E("sqlite3_exec","number",["number","string","number","number","number"]),_e=E("sqlite3_changes","number",["number"]),Pe=E("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Dn=E("sqlite3_sql","string",["number"]),Gr=E("sqlite3_normalized_sql","string",["number"]),jn=E("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Yr=E("sqlite3_bind_text","number",["number","number","number","number","number"]),In=E("sqlite3_bind_blob","number",["number","number","number","number","number"]),Kr=E("sqlite3_bind_double","number",["number","number","number"]),Zr=E("sqlite3_bind_int","number",["number","number","number"]),xr=E("sqlite3_bind_parameter_index","number",["number","string"]),$r=E("sqlite3_step","number",["number"]),el=E("sqlite3_errmsg","string",["number"]),tl=E("sqlite3_column_count","number",["number"]),nl=E("sqlite3_data_count","number",["number"]),rl=E("sqlite3_column_double","number",["number","number"]),Fn=E("sqlite3_column_text","string",["number","number"]),ll=E("sqlite3_column_blob","number",["number","number"]),il=E("sqlite3_column_bytes","number",["number","number"]),sl=E("sqlite3_column_type","number",["number","number"]),ol=E("sqlite3_column_name","string",["number","number"]),al=E("sqlite3_reset","number",["number"]),ul=E("sqlite3_clear_bindings","number",["number"]),fl=E("sqlite3_finalize","number",["number"]),zn=E("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),cl=E("sqlite3_value_type","number",["number"]),dl=E("sqlite3_value_bytes","number",["number"]),hl=E("sqlite3_value_text","string",["number"]),ml=E("sqlite3_value_blob","number",["number"]),bl=E("sqlite3_value_double","number",["number"]),pl=E("sqlite3_result_double","",["number","number"]),Un=E("sqlite3_result_null","",["number"]),gl=E("sqlite3_result_text","",["number","string","number","number"]),_l=E("sqlite3_result_blob","",["number","number","number","number"]),vl=E("sqlite3_result_int","",["number","number"]),Dt=E("sqlite3_result_error","",["number","string","number"]),Qn=E("sqlite3_aggregate_context","number",["number","number"]),Vn=E("RegisterExtensionFunctions","number",["number"]),Wn=E("sqlite3_update_hook","number",["number","number","number"]);l.prototype.bind=function(p){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(p)?this.Cb(p):p!=null&&typeof p=="object"?this.Db(p):!0},l.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var p=$r(this.Qa);switch(p){case 100:return!0;case 101:return!1;default:throw this.db.handleError(p)}},l.prototype.wb=function(p){return p==null&&(p=this.Oa,this.Oa+=1),rl(this.Qa,p)},l.prototype.Gb=function(p){if(p==null&&(p=this.Oa,this.Oa+=1),p=Fn(this.Qa,p),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(p)},l.prototype.Hb=function(p){return p==null&&(p=this.Oa,this.Oa+=1),Fn(this.Qa,p)},l.prototype.getBlob=function(p){p==null&&(p=this.Oa,this.Oa+=1);var C=il(this.Qa,p);p=ll(this.Qa,p);for(var z=new Uint8Array(C),G=0;G<C;G+=1)z[G]=J[p+G];return z},l.prototype.get=function(p,C){C=C||{},p!=null&&this.bind(p)&&this.step(),p=[];for(var z=nl(this.Qa),G=0;G<z;G+=1)switch(sl(this.Qa,G)){case 1:var x=C.useBigInt?this.Gb(G):this.wb(G);p.push(x);break;case 2:p.push(this.wb(G));break;case 3:p.push(this.Hb(G));break;case 4:p.push(this.getBlob(G));break;default:p.push(null)}return p},l.prototype.getColumnNames=function(){for(var p=[],C=tl(this.Qa),z=0;z<C;z+=1)p.push(ol(this.Qa,z));return p},l.prototype.getAsObject=function(p,C){p=this.get(p,C),C=this.getColumnNames();for(var z={},G=0;G<C.length;G+=1)z[C[G]]=p[G];return z},l.prototype.getSQL=function(){return Dn(this.Qa)},l.prototype.getNormalizedSQL=function(){return Gr(this.Qa)},l.prototype.run=function(p){return p!=null&&this.bind(p),this.step(),this.reset()},l.prototype.sb=function(p,C){C==null&&(C=this.Oa,this.Oa+=1),p=fn(p);var z=Rt(p,Nt);this.lb.push(z),this.db.handleError(Yr(this.Qa,C,z,p.length-1,0))},l.prototype.Bb=function(p,C){C==null&&(C=this.Oa,this.Oa+=1);var z=Rt(p,Nt);this.lb.push(z),this.db.handleError(In(this.Qa,C,z,p.length,0))},l.prototype.rb=function(p,C){C==null&&(C=this.Oa,this.Oa+=1),this.db.handleError((p===(p|0)?Zr:Kr)(this.Qa,C,p))},l.prototype.Eb=function(p){p==null&&(p=this.Oa,this.Oa+=1),In(this.Qa,p,0,0,0)},l.prototype.tb=function(p,C){switch(C==null&&(C=this.Oa,this.Oa+=1),typeof p){case"string":this.sb(p,C);return;case"number":this.rb(p,C);return;case"bigint":this.sb(p.toString(),C);return;case"boolean":this.rb(p+0,C);return;case"object":if(p===null){this.Eb(C);return}if(p.length!=null){this.Bb(p,C);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+p+")."},l.prototype.Db=function(p){var C=this;return Object.keys(p).forEach(function(z){var G=xr(C.Qa,z);G!==0&&C.tb(p[z],G)}),!0},l.prototype.Cb=function(p){for(var C=0;C<p.length;C+=1)this.tb(p[C],C+1);return!0},l.prototype.reset=function(){return this.freemem(),ul(this.Qa)===0&&al(this.Qa)===0},l.prototype.freemem=function(){for(var p;(p=this.lb.pop())!==void 0;)Ot(p)},l.prototype.free=function(){this.freemem();var p=fl(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,p},a.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var p=wt(),C=Je(4);mt(g),mt(C);try{this.db.handleError(jn(this.db.db,this.kb,-1,g,C)),this.kb=ae(C,"i32");var z=ae(g,"i32");return z===0?(this.mb(),{done:!0}):(this.Za=new l(z,this.db),this.db.fb[z]=this.Za,{value:this.Za,done:!1})}catch(G){throw this.pb=It(this.kb),this.mb(),G}finally{vt(p)}},a.prototype.mb=function(){Ot(this.eb),this.eb=null},a.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:It(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(a.prototype[Symbol.iterator]=function(){return this}),h.prototype.run=function(p,C){if(!this.db)throw"Database closed";if(C){p=this.prepare(p,C);try{p.step()}finally{p.free()}}else this.handleError(ee(this.db,p,0,0,g));return this},h.prototype.exec=function(p,C,z){if(!this.db)throw"Database closed";var G=wt(),x=null;try{var ue=Zt(p),Oe=Je(4);for(p=[];ae(ue,"i8")!==0;){mt(g),mt(Oe),this.handleError(jn(this.db,ue,-1,g,Oe));var Re=ae(g,"i32");if(ue=ae(Oe,"i32"),Re!==0){var Ce=null;for(x=new l(Re,this),C!=null&&x.bind(C);x.step();)Ce===null&&(Ce={columns:x.getColumnNames(),values:[]},p.push(Ce)),Ce.values.push(x.get(null,z));x.free()}}return p}catch(De){throw x&&x.free(),De}finally{vt(G)}},h.prototype.each=function(p,C,z,G,x){typeof C=="function"&&(G=z,z=C,C=void 0),p=this.prepare(p,C);try{for(;p.step();)z(p.getAsObject(null,x))}finally{p.free()}if(typeof G=="function")return G()},h.prototype.prepare=function(p,C){if(mt(g),this.handleError(Pe(this.db,p,-1,g,0)),p=ae(g,"i32"),p===0)throw"Nothing to prepare";var z=new l(p,this);return C!=null&&z.bind(C),this.fb[p]=z},h.prototype.iterateStatements=function(p){return new a(p,this)},h.prototype.export=function(){Object.values(this.fb).forEach(function(C){C.free()}),Object.values(this.Sa).forEach(Xe),this.Sa={},this.handleError(te(this.db));var p=Vr(this.filename);return this.handleError(H(this.filename,g)),this.db=ae(g,"i32"),Vn(this.db),p},h.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(p){p.free()}),Object.values(this.Sa).forEach(Xe),this.Sa={},this.Ya&&(Xe(this.Ya),this.Ya=void 0),this.handleError(te(this.db)),Ln("/"+this.filename),this.db=null)},h.prototype.handleError=function(p){if(p===0)return null;throw p=el(this.db),Error(p)},h.prototype.getRowsModified=function(){return _e(this.db)},h.prototype.create_function=function(p,C){Object.prototype.hasOwnProperty.call(this.Sa,p)&&(Xe(this.Sa[p]),delete this.Sa[p]);var z=_t(function(G,x,ue){x=t(x,ue);try{var Oe=C.apply(null,x)}catch(Re){Dt(G,Re,-1);return}e(G,Oe)},"viii");return this.Sa[p]=z,this.handleError(zn(this.db,p,C.length,1,0,z,0,0,0)),this},h.prototype.create_aggregate=function(p,C){var z=C.init||function(){return null},G=C.finalize||function(Ce){return Ce},x=C.step;if(!x)throw"An aggregate function must have a step function in "+p;var ue={};Object.hasOwnProperty.call(this.Sa,p)&&(Xe(this.Sa[p]),delete this.Sa[p]),C=p+"__finalize",Object.hasOwnProperty.call(this.Sa,C)&&(Xe(this.Sa[C]),delete this.Sa[C]);var Oe=_t(function(Ce,De,tn){var rt=Qn(Ce,1);Object.hasOwnProperty.call(ue,rt)||(ue[rt]=z()),De=t(De,tn),De=[ue[rt]].concat(De);try{ue[rt]=x.apply(null,De)}catch(wl){delete ue[rt],Dt(Ce,wl,-1)}},"viii"),Re=_t(function(Ce){var De=Qn(Ce,1);try{var tn=G(ue[De])}catch(rt){delete ue[De],Dt(Ce,rt,-1);return}e(Ce,tn),delete ue[De]},"vi");return this.Sa[p]=Oe,this.Sa[C]=Re,this.handleError(zn(this.db,p,x.length-1,1,0,0,Oe,Re,0)),this},h.prototype.updateHook=function(p){this.Ya&&(Wn(this.db,0,0),Xe(this.Ya),this.Ya=void 0),p&&(this.Ya=_t(function(C,z,G,x,ue){switch(z){case 18:C="insert";break;case 23:C="update";break;case 9:C="delete";break;default:throw"unknown operationCode in updateHook callback: "+z}if(G=G?ge(Y,G):"",x=x?ge(Y,x):"",ue>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";p(C,G,x,Number(ue))},"viiiij"),Wn(this.db,this.Ya,0))},u.Database=h};var _={...u},S="./this.program",T=(e,t)=>{throw t},L="",F,M;if(P){var O=Gn;L=__dirname+"/",M=e=>(e=be(e)?new URL(e):e,O.readFileSync(e)),F=async e=>(e=be(e)?new URL(e):e,O.readFileSync(e,void 0)),!u.thisProgram&&1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),s.exports=u,T=(e,t)=>{throw process.exitCode=e,t}}else(v||w)&&(w?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),L=L.startsWith("blob:")?"":L.slice(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),w&&(M=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),F=async e=>{if(be(e))return new Promise((l,a)=>{var h=new XMLHttpRequest;h.open("GET",e,!0),h.responseType="arraybuffer",h.onload=()=>{h.status==200||h.status==0&&h.response?l(h.response):a(h.status)},h.onerror=a,h.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var q=u.print||console.log.bind(console),j=u.printErr||console.error.bind(console);Object.assign(u,_),_=null,u.thisProgram&&(S=u.thisProgram);var K=u.wasmBinary,Z,D=!1,N,J,Y,ie,R,V,ne,B,le,be=e=>e.startsWith("file://");function ce(){var e=Z.buffer;u.HEAP8=J=new Int8Array(e),u.HEAP16=ie=new Int16Array(e),u.HEAPU8=Y=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAP32=R=new Int32Array(e),u.HEAPU32=V=new Uint32Array(e),u.HEAPF32=ne=new Float32Array(e),u.HEAPF64=le=new Float64Array(e),u.HEAP64=B=new BigInt64Array(e),u.HEAPU64=new BigUint64Array(e)}var oe=0,pe=null;function we(e){var t;throw(t=u.onAbort)==null||t.call(u,e),e="Aborted("+e+")",j(e),D=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var Me;async function ke(e){if(!K)try{var t=await F(e);return new Uint8Array(t)}catch{}if(e==Me&&K)e=new Uint8Array(K);else if(M)e=M(e);else throw"both async and sync fetching of the wasm failed";return e}async function Ee(e,t){try{var l=await ke(e);return await WebAssembly.instantiate(l,t)}catch(a){j(`failed to asynchronously prepare wasm: ${a}`),we(a)}}async function ze(e){var t=Me;if(!K&&typeof WebAssembly.instantiateStreaming=="function"&&!be(t)&&!P)try{var l=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(l,e)}catch(a){j(`wasm streaming compile failed: ${a}`),j("falling back to ArrayBuffer instantiation")}return Ee(t,e)}class ye{constructor(t){Fe(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var Ue=e=>{for(;0<e.length;)e.shift()(u)},ve=[],he=[],re=()=>{var e=u.preRun.shift();he.unshift(e)};function ae(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return J[e];case"i8":return J[e];case"i16":return ie[e>>1];case"i32":return R[e>>2];case"i64":return B[e>>3];case"float":return ne[e>>2];case"double":return le[e>>3];case"*":return V[e>>2];default:we(`invalid type for getValue: ${t}`)}}var Qe=u.noExitRuntime||!0;function mt(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":J[e]=0;break;case"i8":J[e]=0;break;case"i16":ie[e>>1]=0;break;case"i32":R[e>>2]=0;break;case"i64":B[e>>3]=BigInt(0);break;case"float":ne[e>>2]=0;break;case"double":le[e>>3]=0;break;case"*":V[e>>2]=0;break;default:we(`invalid type for setValue: ${t}`)}}var sn=typeof TextDecoder<"u"?new TextDecoder:void 0,ge=(e,t=0,l=NaN)=>{var a=t+l;for(l=t;e[l]&&!(l>=a);)++l;if(16<l-t&&e.buffer&&sn)return sn.decode(e.subarray(t,l));for(a="";t<l;){var h=e[t++];if(h&128){var g=e[t++]&63;if((h&224)==192)a+=String.fromCharCode((h&31)<<6|g);else{var E=e[t++]&63;h=(h&240)==224?(h&15)<<12|g<<6|E:(h&7)<<18|g<<12|E<<6|e[t++]&63,65536>h?a+=String.fromCharCode(h):(h-=65536,a+=String.fromCharCode(55296|h>>10,56320|h&1023))}}else a+=String.fromCharCode(h)}return a},It=(e,t)=>e?ge(Y,e,t):"",on=(e,t)=>{for(var l=0,a=e.length-1;0<=a;a--){var h=e[a];h==="."?e.splice(a,1):h===".."?(e.splice(a,1),l++):l&&(e.splice(a,1),l--)}if(t)for(;l;l--)e.unshift("..");return e},Ft=e=>{var t=e.charAt(0)==="/",l=e.slice(-1)==="/";return(e=on(e.split("/").filter(a=>!!a),!t).join("/"))||t||(e="."),e&&l&&(e+="/"),(t?"/":"")+e},an=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},St=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],Mr=()=>{if(P){var e=Gn;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},un=e=>{(un=Mr())(e)},Nr=(...e)=>{for(var t="",l=!1,a=e.length-1;-1<=a&&!l;a--){if(l=0<=a?e[a]:"/",typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";t=l+"/"+t,l=l.charAt(0)==="/"}return t=on(t.split("/").filter(h=>!!h),!l).join("/"),(l?"/":"")+t||"."},zt=[],bt=e=>{for(var t=0,l=0;l<e.length;++l){var a=e.charCodeAt(l);127>=a?t++:2047>=a?t+=2:55296<=a&&57343>=a?(t+=4,++l):t+=3}return t},Ve=(e,t,l,a)=>{if(!(0<a))return 0;var h=l;a=l+a-1;for(var g=0;g<e.length;++g){var E=e.charCodeAt(g);if(55296<=E&&57343>=E){var H=e.charCodeAt(++g);E=65536+((E&1023)<<10)|H&1023}if(127>=E){if(l>=a)break;t[l++]=E}else{if(2047>=E){if(l+1>=a)break;t[l++]=192|E>>6}else{if(65535>=E){if(l+2>=a)break;t[l++]=224|E>>12}else{if(l+3>=a)break;t[l++]=240|E>>18,t[l++]=128|E>>12&63}t[l++]=128|E>>6&63}t[l++]=128|E&63}}return t[l]=0,l-h},fn=(e,t)=>{var l=Array(bt(e)+1);return e=Ve(e,l,0,l.length),t&&(l.length=e),l},cn=[];function dn(e,t){cn[e]={input:[],output:[],cb:t},Ht(e,Rr)}var Rr={open(e){var t=cn[e.node.rdev];if(!t)throw new A(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,l,a){if(!e.tty||!e.tty.cb.xb)throw new A(60);for(var h=0,g=0;g<a;g++){try{var E=e.tty.cb.xb(e.tty)}catch{throw new A(29)}if(E===void 0&&h===0)throw new A(6);if(E==null)break;h++,t[l+g]=E}return h&&(e.node.atime=Date.now()),h},write(e,t,l,a){if(!e.tty||!e.tty.cb.qb)throw new A(60);try{for(var h=0;h<a;h++)e.tty.cb.qb(e.tty,t[l+h])}catch{throw new A(29)}return a&&(e.node.mtime=e.node.ctime=Date.now()),h}},Or={xb(){e:{if(!zt.length){var e=null;if(P){var t=Buffer.alloc(256),l=0,a=process.stdin.fd;try{l=O.readSync(a,t,0,256)}catch(h){if(h.toString().includes("EOF"))l=0;else throw h}0<l&&(e=t.slice(0,l).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}zt=fn(e,!0)}e=zt.shift()}return e},qb(e,t){t===null||t===10?(q(ge(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(q(ge(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Dr={qb(e,t){t===null||t===10?(j(ge(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(j(ge(e.output)),e.output=[])}},$={Wa:null,Xa(){return $.createNode(null,"/",16895,0)},createNode(e,t,l,a){if((l&61440)===24576||(l&61440)===4096)throw new A(63);return $.Wa||($.Wa={dir:{node:{Ta:$.La.Ta,Ua:$.La.Ua,lookup:$.La.lookup,hb:$.La.hb,rename:$.La.rename,unlink:$.La.unlink,rmdir:$.La.rmdir,readdir:$.La.readdir,symlink:$.La.symlink},stream:{Va:$.Ma.Va}},file:{node:{Ta:$.La.Ta,Ua:$.La.Ua},stream:{Va:$.Ma.Va,read:$.Ma.read,write:$.Ma.write,ib:$.Ma.ib,jb:$.Ma.jb}},link:{node:{Ta:$.La.Ta,Ua:$.La.Ua,readlink:$.La.readlink},stream:{}},ub:{node:{Ta:$.La.Ta,Ua:$.La.Ua},stream:Ur}}),l=_n(e,t,l,a),Le(l.mode)?(l.La=$.Wa.dir.node,l.Ma=$.Wa.dir.stream,l.Na={}):(l.mode&61440)===32768?(l.La=$.Wa.file.node,l.Ma=$.Wa.file.stream,l.Ra=0,l.Na=null):(l.mode&61440)===40960?(l.La=$.Wa.link.node,l.Ma=$.Wa.link.stream):(l.mode&61440)===8192&&(l.La=$.Wa.ub.node,l.Ma=$.Wa.ub.stream),l.atime=l.mtime=l.ctime=Date.now(),e&&(e.Na[t]=l,e.atime=e.mtime=e.ctime=l.atime),l},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Le(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var l of["mode","atime","mtime","ctime"])t[l]!=null&&(e[l]=t[l]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(l=e.Na,e.Na=new Uint8Array(t),l&&e.Na.set(l.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw $.vb},hb(e,t,l,a){return $.createNode(e,t,l,a)},rename(e,t,l){try{var a=et(t,l)}catch{}if(a){if(Le(e.mode))for(var h in a.Na)throw new A(55);Wt(a)}delete e.parent.Na[e.name],t.Na[l]=e,e.name=l,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var l=et(e,t),a;for(a in l.Na)throw new A(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,l){return e=$.createNode(e,t,41471,0),e.link=l,e},readlink(e){if((e.mode&61440)!==40960)throw new A(28);return e.link}},Ma:{read(e,t,l,a,h){var g=e.node.Na;if(h>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-h,a),8<e&&g.subarray)t.set(g.subarray(h,h+e),l);else for(a=0;a<e;a++)t[l+a]=g[h+a];return e},write(e,t,l,a,h,g){if(t.buffer===J.buffer&&(g=!1),!a)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(g)return e.Na=t.subarray(l,l+a),e.Ra=a;if(e.Ra===0&&h===0)return e.Na=t.slice(l,l+a),e.Ra=a;if(h+a<=e.Ra)return e.Na.set(t.subarray(l,l+a),h),a}g=h+a;var E=e.Na?e.Na.length:0;if(E>=g||(g=Math.max(g,E*(1048576>E?2:1.125)>>>0),E!=0&&(g=Math.max(g,256)),E=e.Na,e.Na=new Uint8Array(g),0<e.Ra&&e.Na.set(E.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(l,l+a),h);else for(g=0;g<a;g++)e.Na[h+g]=t[l+g];return e.Ra=Math.max(e.Ra,h+a),a},Va(e,t,l){if(l===1?t+=e.position:l===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new A(28);return t},ib(e,t,l,a,h){if((e.node.mode&61440)!==32768)throw new A(43);if(e=e.node.Na,h&2||!e||e.buffer!==J.buffer){h=!0,a=65536*Math.ceil(t/65536);var g=Rn(65536,a);if(g&&Y.fill(0,g,g+a),a=g,!a)throw new A(48);e&&((0<l||l+t<e.length)&&(e.subarray?e=e.subarray(l,l+t):e=Array.prototype.slice.call(e,l,l+t)),J.set(e,a))}else h=!1,a=e.byteOffset;return{Kb:a,Ab:h}},jb(e,t,l,a){return $.Ma.write(e,t,0,a,l,!1),0}}},hn=(e,t)=>{var l=0;return e&&(l|=365),t&&(l|=146),l},Ut=null,mn={},ot=[],jr=1,Be=null,bn=!1,pn=!0,gn={},A=class{constructor(e){Fe(this,"name","ErrnoError");this.Pa=e}},Ir=class{constructor(){Fe(this,"gb",{});Fe(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},Fr=class{constructor(e,t,l,a){Fe(this,"La",{});Fe(this,"Ma",{});Fe(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=jr++,this.name=t,this.mode=l,this.rdev=a,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function Ne(e,t={}){if(!e)throw new A(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var l=0;e:for(;40>l;l++){e=e.split("/").filter(H=>!!H);for(var a=Ut,h="/",g=0;g<e.length;g++){var E=g===e.length-1;if(E&&t.parent)break;if(e[g]!==".")if(e[g]==="..")h=an(h),a=a.parent;else{h=Ft(h+"/"+e[g]);try{a=et(a,e[g])}catch(H){if((H==null?void 0:H.Pa)===44&&E&&t.Jb)return{path:h};throw H}if(!a.ab||E&&!t.nb||(a=a.ab.root),(a.mode&61440)===40960&&(!E||t.$a)){if(!a.La.readlink)throw new A(52);a=a.La.readlink(a),a.charAt(0)==="/"||(a=an(h)+"/"+a),e=a+"/"+e.slice(g+1).join("/");continue e}}}return{path:h,node:a}}throw new A(32)}function Qt(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Vt(e,t){for(var l=0,a=0;a<t.length;a++)l=(l<<5)-l+t.charCodeAt(a)|0;return(e+l>>>0)%Be.length}function Wt(e){var t=Vt(e.parent.id,e.name);if(Be[t]===e)Be[t]=e.bb;else for(t=Be[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function et(e,t){var l=Le(e.mode)?(l=at(e,"x"))?l:e.La.lookup?0:2:54;if(l)throw new A(l);for(l=Be[Vt(e.id,t)];l;l=l.bb){var a=l.name;if(l.parent.id===e.id&&a===t)return l}return e.La.lookup(e,t)}function _n(e,t,l,a){return e=new Fr(e,t,l,a),t=Vt(e.parent.id,e.name),e.bb=Be[t],Be[t]=e}function Le(e){return(e&61440)===16384}function vn(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function at(e,t){if(pn)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function wn(e,t){if(!Le(e.mode))return 54;try{return et(e,t),20}catch{}return at(e,"wx")}function yn(e,t,l){try{var a=et(e,t)}catch(h){return h.Pa}if(e=at(e,"wx"))return e;if(l){if(!Le(a.mode))return 54;if(a===a.parent||Qt(a)==="/")return 10}else if(Le(a.mode))return 31;return 0}function Lt(e){if(!e)throw new A(63);return e}function Se(e){if(e=ot[e],!e)throw new A(8);return e}function kn(e,t=-1){if(e=Object.assign(new Ir,e),t==-1)e:{for(t=0;4096>=t;t++)if(!ot[t])break e;throw new A(33)}return e.fd=t,ot[t]=e}function zr(e,t=-1){var l,a;return e=kn(e,t),(a=(l=e.Ma)==null?void 0:l.Rb)==null||a.call(l,e),e}function Bt(e,t,l){var a=e==null?void 0:e.Ma.Ua;e=a?e:t,a??(a=t.La.Ua),Lt(a),a(e,l)}var Ur={open(e){var t,l;e.Ma=mn[e.node.rdev].Ma,(l=(t=e.Ma).open)==null||l.call(t,e)},Va(){throw new A(70)}};function Ht(e,t){mn[e]={Ma:t}}function En(e,t){var l=t==="/";if(l&&Ut)throw new A(10);if(!l&&t){var a=Ne(t,{nb:!1});if(t=a.path,a=a.node,a.ab)throw new A(10);if(!Le(a.mode))throw new A(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,l?Ut=e:a&&(a.ab=t,a.Xa&&a.Xa.Ib.push(t))}function Pt(e,t,l){var a=Ne(e,{parent:!0}).node;if(e=St(e),!e)throw new A(28);if(e==="."||e==="..")throw new A(20);var h=wn(a,e);if(h)throw new A(h);if(!a.La.hb)throw new A(63);return a.La.hb(a,e,t,l)}function Qr(e,t=438){return Pt(e,t&4095|32768,0)}function Ie(e,t=511){return Pt(e,t&1023|16384,0)}function qt(e,t,l){typeof l>"u"&&(l=t,t=438),Pt(e,t|8192,l)}function Xt(e,t){if(!Nr(e))throw new A(44);var l=Ne(t,{parent:!0}).node;if(!l)throw new A(44);t=St(t);var a=wn(l,t);if(a)throw new A(a);if(!l.La.symlink)throw new A(63);l.La.symlink(l,t,e)}function Sn(e){var t=Ne(e,{parent:!0}).node;e=St(e);var l=et(t,e),a=yn(t,e,!0);if(a)throw new A(a);if(!t.La.rmdir)throw new A(63);if(l.ab)throw new A(10);t.La.rmdir(t,e),Wt(l)}function Ln(e){var t=Ne(e,{parent:!0}).node;if(!t)throw new A(44);e=St(e);var l=et(t,e),a=yn(t,e,!1);if(a)throw new A(a);if(!t.La.unlink)throw new A(63);if(l.ab)throw new A(10);t.La.unlink(t,e),Wt(l)}function pt(e,t){return e=Ne(e,{$a:!t}).node,Lt(e.La.Ta)(e)}function Pn(e,t,l,a){Bt(e,t,{mode:l&4095|t.mode&-4096,ctime:Date.now(),Fb:a})}function Ct(e,t){e=typeof e=="string"?Ne(e,{$a:!0}).node:e,Pn(null,e,t)}function qn(e,t,l){if(Le(t.mode))throw new A(31);if((t.mode&61440)!==32768)throw new A(28);var a=at(t,"w");if(a)throw new A(a);Bt(e,t,{size:l,timestamp:Date.now()})}function ut(e,t,l=438){if(e==="")throw new A(44);if(typeof t=="string"){var a={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof a>"u")throw Error(`Unknown file open mode: ${t}`);t=a}if(l=t&64?l&4095|32768:0,typeof e=="object")a=e;else{var h=e.endsWith("/");e=Ne(e,{$a:!(t&131072),Jb:!0}),a=e.node,e=e.path}var g=!1;if(t&64)if(a){if(t&128)throw new A(20)}else{if(h)throw new A(31);a=Pt(e,l|511,0),g=!0}if(!a)throw new A(44);if((a.mode&61440)===8192&&(t&=-513),t&65536&&!Le(a.mode))throw new A(54);if(!g&&(h=a?(a.mode&61440)===40960?32:Le(a.mode)&&(vn(t)!=="r"||t&576)?31:at(a,vn(t)):44))throw new A(h);return t&512&&!g&&(h=a,h=typeof h=="string"?Ne(h,{$a:!0}).node:h,qn(null,h,0)),t&=-131713,h=kn({node:a,path:Qt(a),flags:t,seekable:!0,position:0,Ma:a.Ma,Lb:[],error:!1}),h.Ma.open&&h.Ma.open(h),g&&Ct(a,l&511),!u.logReadFiles||t&1||e in gn||(gn[e]=1),h}function Jt(e){if(e.fd===null)throw new A(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{ot[e.fd]=null}e.fd=null}function Cn(e,t,l){if(e.fd===null)throw new A(8);if(!e.seekable||!e.Ma.Va)throw new A(70);if(l!=0&&l!=1&&l!=2)throw new A(28);e.position=e.Ma.Va(e,t,l),e.Lb=[]}function Tn(e,t,l,a,h){if(0>a||0>h)throw new A(28);if(e.fd===null)throw new A(8);if((e.flags&2097155)===1)throw new A(8);if(Le(e.node.mode))throw new A(31);if(!e.Ma.read)throw new A(28);var g=typeof h<"u";if(!g)h=e.position;else if(!e.seekable)throw new A(70);return t=e.Ma.read(e,t,l,a,h),g||(e.position+=t),t}function An(e,t,l,a,h){if(0>a||0>h)throw new A(28);if(e.fd===null)throw new A(8);if(!(e.flags&2097155))throw new A(8);if(Le(e.node.mode))throw new A(31);if(!e.Ma.write)throw new A(28);e.seekable&&e.flags&1024&&Cn(e,0,2);var g=typeof h<"u";if(!g)h=e.position;else if(!e.seekable)throw new A(70);return t=e.Ma.write(e,t,l,a,h,void 0),g||(e.position+=t),t}function Vr(e){var t,l=ut(e,l||0);e=pt(e).size;var a=new Uint8Array(e);return Tn(l,a,0,e,0),t=a,Jt(l),t}function He(e,t,l){e=Ft("/dev/"+e);var a=hn(!!t,!!l);He.yb??(He.yb=64);var h=He.yb++<<8|0;Ht(h,{open(g){g.seekable=!1},close(){var g;(g=l==null?void 0:l.buffer)!=null&&g.length&&l(10)},read(g,E,H,te){for(var ee=0,_e=0;_e<te;_e++){try{var Pe=t()}catch{throw new A(29)}if(Pe===void 0&&ee===0)throw new A(6);if(Pe==null)break;ee++,E[H+_e]=Pe}return ee&&(g.node.atime=Date.now()),ee},write(g,E,H,te){for(var ee=0;ee<te;ee++)try{l(E[H+ee])}catch{throw new A(29)}return te&&(g.node.mtime=g.node.ctime=Date.now()),ee}}),qt(e,a,h)}var me={};function tt(e,t,l){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":Se(e).path,t.length==0){if(!l)throw new A(44);return e}return e+"/"+t}function Tt(e,t){R[e>>2]=t.dev,R[e+4>>2]=t.mode,V[e+8>>2]=t.nlink,R[e+12>>2]=t.uid,R[e+16>>2]=t.gid,R[e+20>>2]=t.rdev,B[e+24>>3]=BigInt(t.size),R[e+32>>2]=4096,R[e+36>>2]=t.blocks;var l=t.atime.getTime(),a=t.mtime.getTime(),h=t.ctime.getTime();return B[e+40>>3]=BigInt(Math.floor(l/1e3)),V[e+48>>2]=l%1e3*1e6,B[e+56>>3]=BigInt(Math.floor(a/1e3)),V[e+64>>2]=a%1e3*1e6,B[e+72>>3]=BigInt(Math.floor(h/1e3)),V[e+80>>2]=h%1e3*1e6,B[e+88>>3]=BigInt(t.ino),0}var At=void 0,Mt=()=>{var e=R[+At>>2];return At+=4,e},Gt=0,Wr=[0,31,60,91,121,152,182,213,244,274,305,335],Br=[0,31,59,90,120,151,181,212,243,273,304,334],gt={},Mn=e=>{var t;N=e,Qe||0<Gt||((t=u.onExit)==null||t.call(u,e),D=!0),T(e,new ye(e))},Hr=e=>{if(!D)try{if(e(),!(Qe||0<Gt))try{N=e=N,Mn(e)}catch(t){t instanceof ye||t=="unwind"||T(1,t)}}catch(t){t instanceof ye||t=="unwind"||T(1,t)}},Yt={},Nn=()=>{if(!Kt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"},t;for(t in Yt)Yt[t]===void 0?delete e[t]:e[t]=Yt[t];var l=[];for(t in e)l.push(`${t}=${e[t]}`);Kt=l}return Kt},Kt,Zt=e=>{var t=bt(e)+1,l=Je(t);return Ve(e,Y,l,t),l},Xr=(e,t,l,a)=>{var h={string:ee=>{var _e=0;return ee!=null&&ee!==0&&(_e=Zt(ee)),_e},array:ee=>{var _e=Je(ee.length);return J.set(ee,_e),_e}};e=u["_"+e];var g=[],E=0;if(a)for(var H=0;H<a.length;H++){var te=h[l[H]];te?(E===0&&(E=wt()),g[H]=te(a[H])):g[H]=a[H]}return l=e(...g),l=function(ee){return E!==0&&vt(E),t==="string"?ee?ge(Y,ee):"":t==="boolean"?!!ee:ee}(l)},Nt=0,Rt=(e,t)=>(t=t==1?Je(e.length):$t(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),Y.set(e,t),t),nt,xt=[],We,Xe=e=>{nt.delete(We.get(e)),We.set(e,null),xt.push(e)},_t=(e,t)=>{if(!nt){nt=new WeakMap;var l=We.length;if(nt)for(var a=0;a<0+l;a++){var h=We.get(a);h&&nt.set(h,a)}}if(l=nt.get(e)||0)return l;if(xt.length)l=xt.pop();else{try{We.grow(1)}catch(te){throw te instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":te}l=We.length-1}try{We.set(l,e)}catch(te){if(!(te instanceof TypeError))throw te;if(typeof WebAssembly.Function=="function"){var g=WebAssembly.Function;a={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},h={parameters:[],results:t[0]=="v"?[]:[a[t[0]]]};for(var E=1;E<t.length;++E)h.parameters.push(a[t[E]]);t=new g(h,e)}else{a=[1],h=t.slice(0,1),t=t.slice(1),E={i:127,p:127,j:126,f:125,d:124,e:111},a.push(96);var H=t.length;128>H?a.push(H):a.push(H%128|128,H>>7);for(g of t)a.push(E[g]);h=="v"?a.push(0):a.push(1,E[h]),t=[0,97,115,109,1,0,0,0,1],g=a.length,128>g?t.push(g):t.push(g%128|128,g>>7),t.push(...a),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}We.set(l,t)}return nt.set(e,l),l};Be=Array(4096),En($,"/"),Ie("/tmp"),Ie("/home"),Ie("/home/web_user"),function(){Ie("/dev"),Ht(259,{read:()=>0,write:(a,h,g,E)=>E,Va:()=>0}),qt("/dev/null",259),dn(1280,Or),dn(1536,Dr),qt("/dev/tty",1280),qt("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,l=()=>(t===0&&(un(e),t=e.byteLength),e[--t]);He("random",l),He("urandom",l),Ie("/dev/shm"),Ie("/dev/shm/tmp")}(),function(){Ie("/proc");var e=Ie("/proc/self");Ie("/proc/self/fd"),En({Xa(){var t=_n(e,"fd",16895,73);return t.Ma={Va:$.Ma.Va},t.La={lookup(l,a){l=+a;var h=Se(l);return l={parent:null,Xa:{zb:"fake"},La:{readlink:()=>h.path},id:l+1},l.parent=l},readdir(){return Array.from(ot.entries()).filter(([,l])=>l).map(([l])=>l.toString())}},t}},"/proc/self/fd")}(),$.vb=new A(44),$.vb.stack="<generic error, no stack>";var Jr={a:(e,t,l,a)=>we(`Assertion failed: ${e?ge(Y,e):""}, at: `+[t?t?ge(Y,t):"":"unknown filename",l,a?a?ge(Y,a):"":"unknown function"]),i:function(e,t){try{return e=e?ge(Y,e):"",Ct(e,t),0}catch(l){if(typeof me>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},L:function(e,t,l){try{if(t=t?ge(Y,t):"",t=tt(e,t),l&-8)return-28;var a=Ne(t,{$a:!0}).node;return a?(e="",l&4&&(e+="r"),l&2&&(e+="w"),l&1&&(e+="x"),e&&at(a,e)?-2:0):-44}catch(h){if(typeof me>"u"||h.name!=="ErrnoError")throw h;return-h.Pa}},j:function(e,t){try{var l=Se(e);return Pn(l,l.node,t,!1),0}catch(a){if(typeof me>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},h:function(e){try{var t=Se(e);return Bt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(l){if(typeof me>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},b:function(e,t,l){At=l;try{var a=Se(e);switch(t){case 0:var h=Mt();if(0>h)break;for(;ot[h];)h++;return zr(a,h).fd;case 1:case 2:return 0;case 3:return a.flags;case 4:return h=Mt(),a.flags|=h,0;case 12:return h=Mt(),ie[h+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(g){if(typeof me>"u"||g.name!=="ErrnoError")throw g;return-g.Pa}},g:function(e,t){try{var l=Se(e),a=l.node,h=l.Ma.Ta;e=h?l:a,h??(h=a.La.Ta),Lt(h);var g=h(e);return Tt(t,g)}catch(E){if(typeof me>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var l=Se(e);if(0>t||!(l.flags&2097155))throw new A(28);return qn(l,l.node,t),0}catch(a){if(typeof me>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},G:function(e,t){try{if(t===0)return-28;var l=bt("/")+1;return t<l?-68:(Ve("/",Y,e,t),l)}catch(a){if(typeof me>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},K:function(e,t){try{return e=e?ge(Y,e):"",Tt(t,pt(e,!0))}catch(l){if(typeof me>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},C:function(e,t,l){try{return t=t?ge(Y,t):"",t=tt(e,t),Ie(t,l),0}catch(a){if(typeof me>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},J:function(e,t,l,a){try{t=t?ge(Y,t):"";var h=a&256;return t=tt(e,t,a&4096),Tt(l,h?pt(t,!0):pt(t))}catch(g){if(typeof me>"u"||g.name!=="ErrnoError")throw g;return-g.Pa}},x:function(e,t,l,a){At=a;try{t=t?ge(Y,t):"",t=tt(e,t);var h=a?Mt():0;return ut(t,l,h).fd}catch(g){if(typeof me>"u"||g.name!=="ErrnoError")throw g;return-g.Pa}},v:function(e,t,l,a){try{if(t=t?ge(Y,t):"",t=tt(e,t),0>=a)return-28;var h=Ne(t).node;if(!h)throw new A(44);if(!h.La.readlink)throw new A(28);var g=h.La.readlink(h),E=Math.min(a,bt(g)),H=J[l+E];return Ve(g,Y,l,a+1),J[l+E]=H,E}catch(te){if(typeof me>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},u:function(e){try{return e=e?ge(Y,e):"",Sn(e),0}catch(t){if(typeof me>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?ge(Y,e):"",Tt(t,pt(e))}catch(l){if(typeof me>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},r:function(e,t,l){try{return t=t?ge(Y,t):"",t=tt(e,t),l===0?Ln(t):l===512?Sn(t):we("Invalid flags passed to unlinkat"),0}catch(a){if(typeof me>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},q:function(e,t,l){try{t=t?ge(Y,t):"",t=tt(e,t,!0);var a=Date.now(),h,g;if(l){var E=V[l>>2]+4294967296*R[l+4>>2],H=R[l+8>>2];H==1073741823?h=a:H==1073741822?h=null:h=1e3*E+H/1e6,l+=16,E=V[l>>2]+4294967296*R[l+4>>2],H=R[l+8>>2],H==1073741823?g=a:H==1073741822?g=null:g=1e3*E+H/1e6}else g=h=a;if((g??h)!==null){e=h;var te=Ne(t,{$a:!0}).node;Lt(te.La.Ua)(te,{atime:e,mtime:g})}return 0}catch(ee){if(typeof me>"u"||ee.name!=="ErrnoError")throw ee;return-ee.Pa}},m:()=>we(""),l:()=>{Qe=!1,Gt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),R[t>>2]=e.getSeconds(),R[t+4>>2]=e.getMinutes(),R[t+8>>2]=e.getHours(),R[t+12>>2]=e.getDate(),R[t+16>>2]=e.getMonth(),R[t+20>>2]=e.getFullYear()-1900,R[t+24>>2]=e.getDay();var l=e.getFullYear();R[t+28>>2]=(l%4!==0||l%100===0&&l%400!==0?Br:Wr)[e.getMonth()]+e.getDate()-1|0,R[t+36>>2]=-(60*e.getTimezoneOffset()),l=new Date(e.getFullYear(),6,1).getTimezoneOffset();var a=new Date(e.getFullYear(),0,1).getTimezoneOffset();R[t+32>>2]=(l!=a&&e.getTimezoneOffset()==Math.min(a,l))|0},y:function(e,t,l,a,h,g,E){h=-9007199254740992>h||9007199254740992<h?NaN:Number(h);try{if(isNaN(h))return 61;var H=Se(a);if(t&2&&!(l&2)&&(H.flags&2097155)!==2)throw new A(2);if((H.flags&2097155)===1)throw new A(2);if(!H.Ma.ib)throw new A(43);if(!e)throw new A(28);var te=H.Ma.ib(H,e,h,t,l),ee=te.Kb;return R[g>>2]=te.Ab,V[E>>2]=ee,0}catch(_e){if(typeof me>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Pa}},z:function(e,t,l,a,h,g){g=-9007199254740992>g||9007199254740992<g?NaN:Number(g);try{var E=Se(h);if(l&2){if(l=g,(E.node.mode&61440)!==32768)throw new A(43);if(!(a&2)){var H=Y.slice(e,e+t);E.Ma.jb&&E.Ma.jb(E,H,l,t,a)}}}catch(te){if(typeof me>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},n:(e,t)=>{if(gt[e]&&(clearTimeout(gt[e].id),delete gt[e]),!t)return 0;var l=setTimeout(()=>{delete gt[e],Hr(()=>On(e,performance.now()))},t);return gt[e]={id:l,Xb:t},0},B:(e,t,l,a)=>{var h=new Date().getFullYear(),g=new Date(h,0,1).getTimezoneOffset();h=new Date(h,6,1).getTimezoneOffset(),V[e>>2]=60*Math.max(g,h),R[t>>2]=+(g!=h),t=E=>{var H=Math.abs(E);return`UTC${0<=E?"-":"+"}${String(Math.floor(H/60)).padStart(2,"0")}${String(H%60).padStart(2,"0")}`},e=t(g),t=t(h),h<g?(Ve(e,Y,l,17),Ve(t,Y,a,17)):(Ve(e,Y,a,17),Ve(t,Y,l,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=Y.length;if(e>>>=0,2147483648<e)return!1;for(var l=1;4>=l;l*=2){var a=t*(1+.2/l);a=Math.min(a,e+100663296);e:{a=(Math.min(2147483648,65536*Math.ceil(Math.max(e,a)/65536))-Z.buffer.byteLength+65535)/65536|0;try{Z.grow(a),ce();var h=1;break e}catch{}h=void 0}if(h)return!0}return!1},E:(e,t)=>{var l=0;return Nn().forEach((a,h)=>{var g=t+l;for(h=V[e+4*h>>2]=g,g=0;g<a.length;++g)J[h++]=a.charCodeAt(g);J[h]=0,l+=a.length+1}),0},F:(e,t)=>{var l=Nn();V[e>>2]=l.length;var a=0;return l.forEach(h=>a+=h.length+1),V[t>>2]=a,0},e:function(e){try{var t=Se(e);return Jt(t),0}catch(l){if(typeof me>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},p:function(e,t){try{var l=Se(e);return J[t]=l.tty?2:Le(l.mode)?3:(l.mode&61440)===40960?7:4,ie[t+2>>1]=0,B[t+8>>3]=BigInt(0),B[t+16>>3]=BigInt(0),0}catch(a){if(typeof me>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},w:function(e,t,l,a){try{e:{var h=Se(e);e=t;for(var g,E=t=0;E<l;E++){var H=V[e>>2],te=V[e+4>>2];e+=8;var ee=Tn(h,J,H,te,g);if(0>ee){var _e=-1;break e}if(t+=ee,ee<te)break;typeof g<"u"&&(g+=ee)}_e=t}return V[a>>2]=_e,0}catch(Pe){if(typeof me>"u"||Pe.name!=="ErrnoError")throw Pe;return Pe.Pa}},D:function(e,t,l,a){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var h=Se(e);return Cn(h,t,l),B[a>>3]=BigInt(h.position),h.ob&&t===0&&l===0&&(h.ob=null),0}catch(g){if(typeof me>"u"||g.name!=="ErrnoError")throw g;return g.Pa}},I:function(e){var l;try{var t=Se(e);return(l=t.Ma)!=null&&l.fsync?t.Ma.fsync(t):0}catch(a){if(typeof me>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},t:function(e,t,l,a){try{e:{var h=Se(e);e=t;for(var g,E=t=0;E<l;E++){var H=V[e>>2],te=V[e+4>>2];e+=8;var ee=An(h,J,H,te,g);if(0>ee){var _e=-1;break e}if(t+=ee,ee<te)break;typeof g<"u"&&(g+=ee)}_e=t}return V[a>>2]=_e,0}catch(Pe){if(typeof me>"u"||Pe.name!=="ErrnoError")throw Pe;return Pe.Pa}},k:Mn},X;(async function(){var l;function e(a){var h;return X=a.exports,Z=X.M,ce(),We=X.O,oe--,(h=u.monitorRunDependencies)==null||h.call(u,oe),oe==0&&pe&&(a=pe,pe=null,a()),X}oe++,(l=u.monitorRunDependencies)==null||l.call(u,oe);var t={a:Jr};return u.instantiateWasm?new Promise(a=>{u.instantiateWasm(t,(h,g)=>{e(h),a(h.exports)})}):(Me??(Me=u.locateFile?u.locateFile("sql-wasm.wasm",L):L+"sql-wasm.wasm"),e((await ze(t)).instance))})(),u._sqlite3_free=e=>(u._sqlite3_free=X.P)(e),u._sqlite3_value_text=e=>(u._sqlite3_value_text=X.Q)(e),u._sqlite3_prepare_v2=(e,t,l,a,h)=>(u._sqlite3_prepare_v2=X.R)(e,t,l,a,h),u._sqlite3_step=e=>(u._sqlite3_step=X.S)(e),u._sqlite3_reset=e=>(u._sqlite3_reset=X.T)(e),u._sqlite3_exec=(e,t,l,a,h)=>(u._sqlite3_exec=X.U)(e,t,l,a,h),u._sqlite3_finalize=e=>(u._sqlite3_finalize=X.V)(e),u._sqlite3_column_name=(e,t)=>(u._sqlite3_column_name=X.W)(e,t),u._sqlite3_column_text=(e,t)=>(u._sqlite3_column_text=X.X)(e,t),u._sqlite3_column_type=(e,t)=>(u._sqlite3_column_type=X.Y)(e,t),u._sqlite3_errmsg=e=>(u._sqlite3_errmsg=X.Z)(e),u._sqlite3_clear_bindings=e=>(u._sqlite3_clear_bindings=X._)(e),u._sqlite3_value_blob=e=>(u._sqlite3_value_blob=X.$)(e),u._sqlite3_value_bytes=e=>(u._sqlite3_value_bytes=X.aa)(e),u._sqlite3_value_double=e=>(u._sqlite3_value_double=X.ba)(e),u._sqlite3_value_int=e=>(u._sqlite3_value_int=X.ca)(e),u._sqlite3_value_type=e=>(u._sqlite3_value_type=X.da)(e),u._sqlite3_result_blob=(e,t,l,a)=>(u._sqlite3_result_blob=X.ea)(e,t,l,a),u._sqlite3_result_double=(e,t)=>(u._sqlite3_result_double=X.fa)(e,t),u._sqlite3_result_error=(e,t,l)=>(u._sqlite3_result_error=X.ga)(e,t,l),u._sqlite3_result_int=(e,t)=>(u._sqlite3_result_int=X.ha)(e,t),u._sqlite3_result_int64=(e,t)=>(u._sqlite3_result_int64=X.ia)(e,t),u._sqlite3_result_null=e=>(u._sqlite3_result_null=X.ja)(e),u._sqlite3_result_text=(e,t,l,a)=>(u._sqlite3_result_text=X.ka)(e,t,l,a),u._sqlite3_aggregate_context=(e,t)=>(u._sqlite3_aggregate_context=X.la)(e,t),u._sqlite3_column_count=e=>(u._sqlite3_column_count=X.ma)(e),u._sqlite3_data_count=e=>(u._sqlite3_data_count=X.na)(e),u._sqlite3_column_blob=(e,t)=>(u._sqlite3_column_blob=X.oa)(e,t),u._sqlite3_column_bytes=(e,t)=>(u._sqlite3_column_bytes=X.pa)(e,t),u._sqlite3_column_double=(e,t)=>(u._sqlite3_column_double=X.qa)(e,t),u._sqlite3_bind_blob=(e,t,l,a,h)=>(u._sqlite3_bind_blob=X.ra)(e,t,l,a,h),u._sqlite3_bind_double=(e,t,l)=>(u._sqlite3_bind_double=X.sa)(e,t,l),u._sqlite3_bind_int=(e,t,l)=>(u._sqlite3_bind_int=X.ta)(e,t,l),u._sqlite3_bind_text=(e,t,l,a,h)=>(u._sqlite3_bind_text=X.ua)(e,t,l,a,h),u._sqlite3_bind_parameter_index=(e,t)=>(u._sqlite3_bind_parameter_index=X.va)(e,t),u._sqlite3_sql=e=>(u._sqlite3_sql=X.wa)(e),u._sqlite3_normalized_sql=e=>(u._sqlite3_normalized_sql=X.xa)(e),u._sqlite3_changes=e=>(u._sqlite3_changes=X.ya)(e),u._sqlite3_close_v2=e=>(u._sqlite3_close_v2=X.za)(e),u._sqlite3_create_function_v2=(e,t,l,a,h,g,E,H,te)=>(u._sqlite3_create_function_v2=X.Aa)(e,t,l,a,h,g,E,H,te),u._sqlite3_update_hook=(e,t,l)=>(u._sqlite3_update_hook=X.Ba)(e,t,l),u._sqlite3_open=(e,t)=>(u._sqlite3_open=X.Ca)(e,t);var $t=u._malloc=e=>($t=u._malloc=X.Da)(e),Ot=u._free=e=>(Ot=u._free=X.Ea)(e);u._RegisterExtensionFunctions=e=>(u._RegisterExtensionFunctions=X.Fa)(e);var Rn=(e,t)=>(Rn=X.Ga)(e,t),On=(e,t)=>(On=X.Ha)(e,t),vt=e=>(vt=X.Ia)(e),Je=e=>(Je=X.Ja)(e),wt=()=>(wt=X.Ka)();u.stackSave=()=>wt(),u.stackRestore=e=>vt(e),u.stackAlloc=e=>Je(e),u.cwrap=(e,t,l,a)=>{var h=!l||l.every(g=>g==="number"||g==="boolean");return t!=="string"&&h&&!a?u["_"+e]:(...g)=>Xr(e,t,l,g)},u.addFunction=_t,u.removeFunction=Xe,u.UTF8ToString=It,u.ALLOC_NORMAL=Nt,u.allocate=Rt,u.allocateUTF8OnStack=Zt;function en(){function e(){var h;if(u.calledRun=!0,!D){if(!u.noFSInit&&!bn){var t,l;bn=!0,a??(a=u.stdin),t??(t=u.stdout),l??(l=u.stderr),a?He("stdin",a):Xt("/dev/tty","/dev/stdin"),t?He("stdout",null,t):Xt("/dev/tty","/dev/stdout"),l?He("stderr",null,l):Xt("/dev/tty1","/dev/stderr"),ut("/dev/stdin",0),ut("/dev/stdout",1),ut("/dev/stderr",1)}if(X.N(),pn=!1,(h=u.onRuntimeInitialized)==null||h.call(u),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var a=u.postRun.shift();ve.unshift(a)}Ue(ve)}}if(0<oe)pe=en;else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)re();Ue(he),0<oe?pe=en:u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),e()},1)):e()}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return en(),d}),r)};s.exports=i,s.exports.default=i})(Ar);var Ul=Ar.exports;const Ql=jl(Ul);class Vl{constructor(){this.db=null,this.sqlJs=null}async initialize(){if(!this.sqlJs){const r=window.location.protocol==="http:"?"/node_modules/sql.js/dist/sql-wasm.wasm":"./sql-wasm.wasm";this.sqlJs=await Ql({locateFile:i=>r})}}async loadFromFile(n,r){await this.initialize();try{const i=await r.readDatabase(n);if(i){const o=new Uint8Array(i);this.db=new this.sqlJs.Database(o)}else this.db=new this.sqlJs.Database;return!0}catch(i){return console.error("Error loading database:",i),this.db=new this.sqlJs.Database,!1}}createNew(){if(!this.sqlJs)throw new Error("SQL.js not initialized");this.db=new this.sqlJs.Database}createTable(n,r){if(!this.db)throw new Error("Database not initialized");const i=r.map(c=>{let f;return c.type==="number"?f="REAL":c.type==="boolean"?f="INTEGER":f="TEXT",`"${c.name}" ${f}`}).join(", "),o=`CREATE TABLE "${n}" (${i})`;this.db.run(o)}insertData(n,r,i){if(!this.db)throw new Error("Database not initialized");if(i.length===0)return;const o=r.map(b=>`"${b.name}"`).join(", "),c=r.map(()=>"?").join(", "),f=`INSERT INTO "${n}" (${o}) VALUES (${c})`,d=this.db.prepare(f);for(const b of i){const u=r.map(v=>{const w=b[v.name];return w==null?null:v.type==="boolean"?w?1:0:w});d.run(u)}d.free()}getTableNames(){if(!this.db)return[];const n=this.db.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%'");if(n.length===0)return[];const r=[];for(const i of n[0].values)r.push(i[0]);return r}getTableData(n,r=1e3,i=0){if(!this.db)return{columns:[],rows:[]};const o=this.db.exec(`SELECT * FROM "${n}" LIMIT ${r} OFFSET ${i}`);if(o.length===0)return{columns:[],rows:[]};const c=o[0].columns,f=o[0].values.map(d=>{const b={};return c.forEach((u,v)=>{b[u]=d[v]}),b});return{columns:c,rows:f}}getTableRowCount(n){if(!this.db)return 0;const r=this.db.exec(`SELECT COUNT(*) as count FROM "${n}"`);return r.length===0?0:r[0].values[0][0]}async saveToFile(n,r){if(!this.db)throw new Error("Database not initialized");const i=this.db.export(),o=Array.from(i);await r.writeDatabase(n,o)}deleteTable(n){if(!this.db)throw new Error("Database not initialized");this.db.run(`DROP TABLE IF EXISTS "${n}"`)}executeSQL(n){if(!this.db)throw new Error("Database not initialized");try{if(n.trim().toUpperCase().startsWith("SELECT")){const i=this.db.exec(n);if(i.length===0)return{type:"select",columns:[],rows:[],rowCount:0};const o=i[0].columns,c=i[0].values.map(f=>{const d={};return o.forEach((b,u)=>{d[b]=f[u]}),d});return{type:"select",columns:o,rows:c,rowCount:c.length}}else{this.db.run(n);const i=this.db.exec("SELECT changes() as count");return{type:"modify",affectedRows:i.length>0?i[0].values[0][0]:0}}}catch(r){throw new Error(`SQL execution error: ${r.message}`)}}getTableSchema(n){if(!this.db)return[];try{const r=this.db.exec(`PRAGMA table_info("${n}")`);return r.length===0?[]:r[0].values.map(i=>({name:i[1],type:i[2],notnull:i[3],defaultValue:i[4],pk:i[5]}))}catch(r){return console.error("Error getting table schema:",r),[]}}close(){this.db&&(this.db.close(),this.db=null)}}class Wl{constructor(n){this.api=n,this.logPath=null}async initialize(){this.logPath=await this.api.getDefaultLogPath()}getLogPath(){return this.logPath}async loadLog(){try{return await this.api.readLogFile(this.logPath)||""}catch(n){return console.error("Error loading log file:",n),""}}async saveLog(n){try{return await this.api.writeLogFile(this.logPath,n),!0}catch(r){return console.error("Error saving log file:",r),!1}}parseLogEntries(n){if(!n||n.trim()==="")return[];const r=n.split(`
`),i=[];let o=null;for(let c=0;c<r.length;c++){const f=r[c].trim(),d=f.match(/^\[(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})\]/);d?(o&&i.push(o),o={timestamp:d[1],lineNumber:c+1,naturalLanguage:"",sql:"",error:null,result:null}):o&&(f.startsWith("NL:")?o.naturalLanguage=f.substring(3).trim():f.startsWith("SQL:")?o.sql=f.substring(4).trim():f.startsWith("ERROR:")?o.error=f.substring(6).trim():f.startsWith("RESULT:")?o.result=f.substring(7).trim():f&&!f.startsWith("---")&&(o.sql&&!o.error&&!o.result?o.sql+=" "+f:o.error&&!o.result?o.error+=" "+f:o.result?o.result+=" "+f:!o.naturalLanguage&&!o.sql&&(o.naturalLanguage=f)))}return o&&i.push(o),i}formatLogEntry(n){let r=`[${n.timestamp}]
`;return n.naturalLanguage&&(r+=`NL: ${n.naturalLanguage}
`),n.sql&&(r+=`SQL: ${n.sql}
`),n.error&&(r+=`ERROR: ${n.error}
`),n.result&&(r+=`RESULT: ${n.result}
`),r+=`---
`,r}}class Yn{static parseSchemaLine(n){const r=[],i=n.split(","),o=["string","number","boolean"];for(const c of i){const f=c.trim();if(!f)continue;const d=f.indexOf(":");if(d>0){const b=f.substring(0,d).trim(),u=f.substring(d+1).trim().toLowerCase();if(!o.includes(u))throw new Error(`Invalid column type modifier "${u}" for column "${b}". Valid types are: string, number, boolean`);r.push({name:b,type:u})}else r.push({name:f,type:"string"})}return r}static parseCSV(n){const r=n.split(/\r?\n/).filter(c=>c.trim());if(r.length===0)throw new Error("CSV file is empty");const i=this.parseSchemaLine(r[0]),o=[];for(let c=1;c<r.length;c++){const f=this.parseCSVLine(r[c]),d={};i.forEach((b,u)=>{let v=f[u]||"";if(v=v.trim(),b.type==="number")d[b.name]=v===""?null:parseFloat(v),isNaN(d[b.name])&&(d[b.name]=null);else if(b.type==="boolean"){const w=v.toLowerCase();d[b.name]=w==="true"||w==="1"||w==="yes"||w==="y"}else d[b.name]=v}),o.push(d)}return{schema:i,data:o}}static parseCSVLine(n){const r=[];let i="",o=!1;for(let c=0;c<n.length;c++){const f=n[c];f==='"'?o&&n[c+1]==='"'?(i+='"',c++):o=!o:f===","&&!o?(r.push(i),i=""):i+=f}return r.push(i),r}static getTableNameFromPath(n){return n.split(/[/\\]/).pop().replace(/\.csv$/i,"").replace(/[^a-zA-Z0-9_]/g,"_")}}function Kn(s,n,r){const i=s.slice();return i[1]=n[r],i}function Zn(s,n,r){const i=s.slice();return i[4]=n[r],i}function xn(s,n,r){const i=s.slice();return i[4]=n[r],i}function $n(s){let n,r=s[4]+"",i;return{c(){n=k("th"),i=W(r),y(n,"class","svelte-1l2op9x")},m(o,c){Q(o,n,c),m(n,i)},p(o,c){c&1&&r!==(r=o[4]+"")&&se(i,r)},d(o){o&&U(n)}}}function er(s){let n,r=(s[1][s[4]]??"")+"",i;return{c(){n=k("td"),i=W(r),y(n,"class","svelte-1l2op9x")},m(o,c){Q(o,n,c),m(n,i)},p(o,c){c&1&&r!==(r=(o[1][o[4]]??"")+"")&&se(i,r)},d(o){o&&U(n)}}}function tr(s){let n,r,i=qe(s[0].columns),o=[];for(let c=0;c<i.length;c+=1)o[c]=er(Zn(s,i,c));return{c(){n=k("tr");for(let c=0;c<o.length;c+=1)o[c].c();r=I(),y(n,"class","svelte-1l2op9x")},m(c,f){Q(c,n,f);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(n,null);m(n,r)},p(c,f){if(f&1){i=qe(c[0].columns);let d;for(d=0;d<i.length;d+=1){const b=Zn(c,i,d);o[d]?o[d].p(b,f):(o[d]=er(b),o[d].c(),o[d].m(n,r))}for(;d<o.length;d+=1)o[d].d(1);o.length=i.length}},d(c){c&&U(n),ht(o,c)}}}function Bl(s){let n,r,i,o,c,f,d=qe(s[0].columns),b=[];for(let w=0;w<d.length;w+=1)b[w]=$n(xn(s,d,w));let u=qe(s[0].rows),v=[];for(let w=0;w<u.length;w+=1)v[w]=tr(Kn(s,u,w));return{c(){n=k("div"),r=k("table"),i=k("thead"),o=k("tr");for(let w=0;w<b.length;w+=1)b[w].c();c=I(),f=k("tbody");for(let w=0;w<v.length;w+=1)v[w].c();y(o,"class","svelte-1l2op9x"),y(i,"class","svelte-1l2op9x"),y(r,"class","data-table svelte-1l2op9x"),y(n,"class","table-container svelte-1l2op9x")},m(w,P){Q(w,n,P),m(n,r),m(r,i),m(i,o);for(let _=0;_<b.length;_+=1)b[_]&&b[_].m(o,null);m(r,c),m(r,f);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(f,null)},p(w,[P]){if(P&1){d=qe(w[0].columns);let _;for(_=0;_<d.length;_+=1){const S=xn(w,d,_);b[_]?b[_].p(S,P):(b[_]=$n(S),b[_].c(),b[_].m(o,null))}for(;_<b.length;_+=1)b[_].d(1);b.length=d.length}if(P&1){u=qe(w[0].rows);let _;for(_=0;_<u.length;_+=1){const S=Kn(w,u,_);v[_]?v[_].p(S,P):(v[_]=tr(S),v[_].c(),v[_].m(f,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=u.length}},i:fe,o:fe,d(w){w&&U(n),ht(b,w),ht(v,w)}}}function Hl(s,n,r){let{tableData:i={columns:[],rows:[]}}=n;return s.$$set=o=>{"tableData"in o&&r(0,i=o.tableData)},[i]}class Xl extends $e{constructor(n){super(),xe(this,n,Hl,Bl,Ze,{tableData:0})}}function nr(s,n,r){const i=s.slice();return i[17]=n[r],i}function Jl(s){let n,r=qe(s[0]),i=[];for(let o=0;o<r.length;o+=1)i[o]=rr(nr(s,r,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();n=Sr()},m(o,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(o,c);Q(o,n,c)},p(o,c){if(c&1){r=qe(o[0]);let f;for(f=0;f<r.length;f+=1){const d=nr(o,r,f);i[f]?i[f].p(d,c):(i[f]=rr(d),i[f].c(),i[f].m(n.parentNode,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(o){o&&U(n),ht(i,o)}}}function Gl(s){let n;return{c(){n=k("option"),n.textContent="No tables available",n.__value="",it(n,n.__value)},m(r,i){Q(r,n,i)},p:fe,d(r){r&&U(n)}}}function rr(s){let n,r=s[17]+"",i,o;return{c(){n=k("option"),i=W(r),n.__value=o=s[17],it(n,n.__value)},m(c,f){Q(c,n,f),m(n,i)},p(c,f){f&1&&r!==(r=c[17]+"")&&se(i,r),f&1&&o!==(o=c[17])&&(n.__value=o,it(n,n.__value))},d(c){c&&U(n)}}}function Yl(s){let n;return{c(){n=k("div"),n.textContent="Select a table to view",y(n,"class","empty-message svelte-1gxjolo")},m(r,i){Q(r,n,i)},p:fe,i:fe,o:fe,d(r){r&&U(n)}}}function Kl(s){let n;return{c(){n=k("div"),n.textContent="Table is empty",y(n,"class","empty-message svelte-1gxjolo")},m(r,i){Q(r,n,i)},p:fe,i:fe,o:fe,d(r){r&&U(n)}}}function Zl(s){let n,r,i,o,c,f,d,b,u,v,w,P,_,S,T,L=s[4]+1+"",F,M,O,q=s[5]+1+"",j,K,Z,D,N,J,Y,ie,R,V,ne,B=s[4]*Ge+1+"",le,be,ce=Math.min((s[4]+1)*Ge,s[3])+"",oe,pe,we,Me,ke,Ee,ze,ye,Ue,ve,he=s[2][s[1]]&&lr(s);return Z=new Xl({props:{tableData:s[6]}}),{c(){n=k("div"),r=k("span"),i=W("Table: "),o=k("strong"),c=W(s[1]),f=I(),he&&he.c(),d=I(),b=k("span"),u=W("Rows: "),v=k("strong"),w=W(s[3]),P=I(),_=k("span"),S=W("Page: "),T=k("strong"),F=W(L),M=W(" of "),O=k("strong"),j=W(q),K=I(),st(Z.$$.fragment),D=I(),N=k("div"),J=k("button"),Y=W(" Previous"),R=I(),V=k("span"),ne=W("Showing "),le=W(B),be=W(" - "),oe=W(ce),pe=W(" of "),we=W(s[3]),Me=I(),ke=k("button"),Ee=W("Next "),y(o,"class","svelte-1gxjolo"),y(v,"class","svelte-1gxjolo"),y(T,"class","svelte-1gxjolo"),y(O,"class","svelte-1gxjolo"),y(n,"class","table-info svelte-1gxjolo"),y(J,"class","page-button svelte-1gxjolo"),J.disabled=ie=!s[9],y(V,"class","page-info svelte-1gxjolo"),y(ke,"class","page-button svelte-1gxjolo"),ke.disabled=ze=!s[8],y(N,"class","pagination svelte-1gxjolo")},m(re,ae){Q(re,n,ae),m(n,r),m(r,i),m(r,o),m(o,c),m(n,f),he&&he.m(n,null),m(n,d),m(n,b),m(b,u),m(b,v),m(v,w),m(n,P),m(n,_),m(_,S),m(_,T),m(T,F),m(_,M),m(_,O),m(O,j),Q(re,K,ae),Ye(Z,re,ae),Q(re,D,ae),Q(re,N,ae),m(N,J),m(J,Y),m(N,R),m(N,V),m(V,ne),m(V,le),m(V,be),m(V,oe),m(V,pe),m(V,we),m(N,Me),m(N,ke),m(ke,Ee),ye=!0,Ue||(ve=[de(J,"click",s[12]),de(ke,"click",s[13])],Ue=!0)},p(re,ae){(!ye||ae&2)&&se(c,re[1]),re[2][re[1]]?he?he.p(re,ae):(he=lr(re),he.c(),he.m(n,d)):he&&(he.d(1),he=null),(!ye||ae&8)&&se(w,re[3]),(!ye||ae&16)&&L!==(L=re[4]+1+"")&&se(F,L),(!ye||ae&32)&&q!==(q=re[5]+1+"")&&se(j,q);const Qe={};ae&64&&(Qe.tableData=re[6]),Z.$set(Qe),(!ye||ae&512&&ie!==(ie=!re[9]))&&(J.disabled=ie),(!ye||ae&16)&&B!==(B=re[4]*Ge+1+"")&&se(le,B),(!ye||ae&24)&&ce!==(ce=Math.min((re[4]+1)*Ge,re[3])+"")&&se(oe,ce),(!ye||ae&8)&&se(we,re[3]),(!ye||ae&256&&ze!==(ze=!re[8]))&&(ke.disabled=ze)},i(re){ye||(Te(Z.$$.fragment,re),ye=!0)},o(re){je(Z.$$.fragment,re),ye=!1},d(re){re&&(U(n),U(K),U(D),U(N)),he&&he.d(),Ke(Z,re),Ue=!1,Ae(ve)}}}function xl(s){let n;return{c(){n=k("div"),n.textContent="Loading table data...",y(n,"class","loading-message svelte-1gxjolo")},m(r,i){Q(r,n,i)},p:fe,i:fe,o:fe,d(r){r&&U(n)}}}function lr(s){let n,r,i,o=s[2][s[1]].split(/[/\\]/).pop()+"",c;return{c(){n=k("span"),r=W("Source: "),i=k("strong"),c=W(o),y(i,"class","svelte-1gxjolo")},m(f,d){Q(f,n,d),m(n,r),m(n,i),m(i,c)},p(f,d){d&6&&o!==(o=f[2][f[1]].split(/[/\\]/).pop()+"")&&se(c,o)},d(f){f&&U(n)}}}function $l(s){let n,r,i,o,c,f,d,b,u,v,w,P,_,S,T,L,F;function M(D,N){return D[0].length===0?Gl:Jl}let O=M(s),q=O(s);const j=[xl,Zl,Kl,Yl],K=[];function Z(D,N){return D[7]?0:D[1]&&D[6].columns.length>0?1:D[1]?2:3}return _=Z(s),S=K[_]=j[_](s),{c(){n=k("div"),r=k("header"),i=k("div"),o=k("h2"),o.textContent="Database Tables",c=I(),f=k("select"),q.c(),b=I(),u=k("div"),v=k("button"),v.textContent="",w=I(),P=k("div"),S.c(),y(o,"class","svelte-1gxjolo"),y(f,"class","table-selector svelte-1gxjolo"),y(i,"class","header-left svelte-1gxjolo"),y(v,"class","refresh-button svelte-1gxjolo"),y(v,"title","Refresh"),y(u,"class","header-right svelte-1gxjolo"),y(r,"class","viewer-header svelte-1gxjolo"),y(P,"class","viewer-content svelte-1gxjolo"),y(n,"class","table-viewer svelte-1gxjolo")},m(D,N){Q(D,n,N),m(n,r),m(r,i),m(i,o),m(i,c),m(i,f),q.m(f,null),Hn(f,s[1]||""),m(r,b),m(r,u),m(u,v),m(n,w),m(n,P),K[_].m(P,null),T=!0,L||(F=[de(f,"change",s[10]),de(v,"click",s[11])],L=!0)},p(D,[N]){O===(O=M(D))&&q?q.p(D,N):(q.d(1),q=O(D),q&&(q.c(),q.m(f,null))),(!T||N&3&&d!==(d=D[1]||""))&&Hn(f,D[1]||"");let J=_;_=Z(D),_===J?K[_].p(D,N):(Cr(),je(K[J],1,1,()=>{K[J]=null}),Tr(),S=K[_],S?S.p(D,N):(S=K[_]=j[_](D),S.c()),Te(S,1),S.m(P,null))},i(D){T||(Te(S),T=!0)},o(D){je(S),T=!1},d(D){D&&U(n),q.d(),K[_].d(),L=!1,Ae(F)}}}let Ge=100;function ei(s,n,r){let i,o,c,{tables:f=[]}=n,{currentTable:d=null}=n,{dbManager:b=null}=n,{tableToCsvMap:u={}}=n;const v=Et();let w={columns:[],rows:[]},P=0,_=0,S=!1;async function T(){if(!(!d||!b)){r(7,S=!0);try{r(3,P=b.getTableRowCount(d));const q=_*Ge;r(6,w=b.getTableData(d,Ge,q))}catch(q){console.error("Error loading table data:",q)}finally{r(7,S=!1)}}}function L(q){const j=q.target.value;j&&(r(4,_=0),v("tableSelect",{table:j}))}function F(){T(),v("refresh")}function M(){_>0&&(r(4,_--,_),T())}function O(){const q=Math.ceil(P/Ge)-1;_<q&&(r(4,_++,_),T())}return s.$$set=q=>{"tables"in q&&r(0,f=q.tables),"currentTable"in q&&r(1,d=q.currentTable),"dbManager"in q&&r(14,b=q.dbManager),"tableToCsvMap"in q&&r(2,u=q.tableToCsvMap)},s.$$.update=()=>{s.$$.dirty&16386&&d&&b&&T(),s.$$.dirty&8&&r(5,i=Math.ceil(P/Ge)-1),s.$$.dirty&16&&r(9,o=_>0),s.$$.dirty&48&&r(8,c=_<i)},[f,d,u,P,_,i,w,S,c,o,L,F,M,O,b]}class ti extends $e{constructor(n){super(),xe(this,n,ei,$l,Ze,{tables:0,currentTable:1,dbManager:14,tableToCsvMap:2})}}function ni(s){let n,r,i,o,c;return{c(){n=k("div"),r=k("div"),i=I(),o=k("p"),c=W(s[0]),y(r,"class","spinner svelte-1ywxz8e"),y(o,"class","message svelte-1ywxz8e"),y(n,"class","loading-container svelte-1ywxz8e")},m(f,d){Q(f,n,d),m(n,r),m(n,i),m(n,o),m(o,c)},p(f,[d]){d&1&&se(c,f[0])},i:fe,o:fe,d(f){f&&U(n)}}}function ri(s,n,r){let{message:i="Loading..."}=n;return s.$$set=o=>{"message"in o&&r(0,i=o.message)},[i]}class li extends $e{constructor(n){super(),xe(this,n,ri,ni,Ze,{message:0})}}function ir(s,n,r){const i=s.slice();return i[7]=n[r],i}function ii(s){let n;return{c(){n=k("p"),n.textContent="No CSV files specified",y(n,"class","no-files svelte-fu6li4")},m(r,i){Q(r,n,i)},p:fe,d(r){r&&U(n)}}}function si(s){let n,r=qe(s[0].csvFiles),i=[];for(let o=0;o<r.length;o+=1)i[o]=sr(ir(s,r,o));return{c(){n=k("ul");for(let o=0;o<i.length;o+=1)i[o].c();y(n,"class","svelte-fu6li4")},m(o,c){Q(o,n,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(n,null)},p(o,c){if(c&1){r=qe(o[0].csvFiles);let f;for(f=0;f<r.length;f+=1){const d=ir(o,r,f);i[f]?i[f].p(d,c):(i[f]=sr(d),i[f].c(),i[f].m(n,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(o){o&&U(n),ht(i,o)}}}function sr(s){let n,r,i=s[7]+"",o;return{c(){n=k("li"),r=k("code"),o=W(i),y(r,"class","svelte-fu6li4"),y(n,"class","svelte-fu6li4")},m(c,f){Q(c,n,f),m(n,r),m(r,o)},p(c,f){f&1&&i!==(i=c[7]+"")&&se(o,i)},d(c){c&&U(n)}}}function oi(s){var ze,ye,Ue;let n,r,i,o,c,f,d,b,u,v,w,P,_,S,T=(((ze=s[0])==null?void 0:ze.databasePath)||"Not specified")+"",L,F,M,O,q=(((Ue=(ye=s[0])==null?void 0:ye.csvFiles)==null?void 0:Ue.length)||0)+"",j,K,Z,D,N,J,Y,ie,R,V=(s[2]||JSON.stringify(s[0],null,2))+"",ne,B,le,be,ce,oe,pe,we;function Me(ve,he){var re;return(re=ve[0])!=null&&re.csvFiles&&ve[0].csvFiles.length>0?si:ii}let ke=Me(s),Ee=ke(s);return{c(){n=k("div"),r=k("div"),i=k("h2"),i.textContent="Configuration File Preview",o=I(),c=k("p"),f=W("File: "),d=k("code"),b=W(s[1]),u=I(),v=k("div"),w=k("h3"),w.textContent="Database Path:",P=I(),_=k("div"),S=k("code"),L=W(T),F=I(),M=k("h3"),O=W("CSV Files ("),j=W(q),K=W("):"),Z=I(),D=k("div"),Ee.c(),N=I(),J=k("div"),Y=k("h3"),Y.textContent="Raw File Content:",ie=I(),R=k("pre"),ne=W(V),B=I(),le=k("div"),be=k("button"),be.textContent="Cancel",ce=I(),oe=k("button"),oe.textContent="Proceed with Loading",y(i,"class","svelte-fu6li4"),y(d,"class","svelte-fu6li4"),y(c,"class","config-path svelte-fu6li4"),y(w,"class","svelte-fu6li4"),y(S,"class","svelte-fu6li4"),y(_,"class","config-value svelte-fu6li4"),y(M,"class","svelte-fu6li4"),y(D,"class","csv-files-list svelte-fu6li4"),y(Y,"class","svelte-fu6li4"),y(R,"class","svelte-fu6li4"),y(J,"class","raw-json svelte-fu6li4"),y(v,"class","config-display svelte-fu6li4"),y(be,"class","button secondary svelte-fu6li4"),y(oe,"class","button primary svelte-fu6li4"),y(le,"class","actions svelte-fu6li4"),y(r,"class","preview-content svelte-fu6li4"),y(n,"class","config-preview svelte-fu6li4")},m(ve,he){Q(ve,n,he),m(n,r),m(r,i),m(r,o),m(r,c),m(c,f),m(c,d),m(d,b),m(r,u),m(r,v),m(v,w),m(v,P),m(v,_),m(_,S),m(S,L),m(v,F),m(v,M),m(M,O),m(M,j),m(M,K),m(v,Z),m(v,D),Ee.m(D,null),m(v,N),m(v,J),m(J,Y),m(J,ie),m(J,R),m(R,ne),m(r,B),m(r,le),m(le,be),m(le,ce),m(le,oe),pe||(we=[de(be,"click",s[4]),de(oe,"click",s[3])],pe=!0)},p(ve,[he]){var re,ae,Qe;he&2&&se(b,ve[1]),he&1&&T!==(T=(((re=ve[0])==null?void 0:re.databasePath)||"Not specified")+"")&&se(L,T),he&1&&q!==(q=(((Qe=(ae=ve[0])==null?void 0:ae.csvFiles)==null?void 0:Qe.length)||0)+"")&&se(j,q),ke===(ke=Me(ve))&&Ee?Ee.p(ve,he):(Ee.d(1),Ee=ke(ve),Ee&&(Ee.c(),Ee.m(D,null))),he&5&&V!==(V=(ve[2]||JSON.stringify(ve[0],null,2))+"")&&se(ne,V)},i:fe,o:fe,d(ve){ve&&U(n),Ee.d(),pe=!1,Ae(we)}}}function ai(s,n,r){let{config:i=null}=n,{configPath:o=""}=n,{configManager:c=null}=n;const f=Et();let d="";Pr(async()=>{if(c&&o)try{r(2,d=await c.readConfigFileRaw(o)||"")}catch(v){console.error("Error reading raw config:",v),r(2,d=JSON.stringify(i,null,2))}else r(2,d=JSON.stringify(i,null,2))});function b(){f("proceed")}function u(){f("cancel")}return s.$$set=v=>{"config"in v&&r(0,i=v.config),"configPath"in v&&r(1,o=v.configPath),"configManager"in v&&r(5,c=v.configManager)},[i,o,d,b,u,c]}class ui extends $e{constructor(n){super(),xe(this,n,ai,oi,Ze,{config:0,configPath:1,configManager:5})}}function or(s,n,r){const i=s.slice();return i[12]=n[r],i}function fi(s){let n,r,i,o,c,f,d,b,u,v,w=s[0].length+"",P,_,S,T,L,F,M,O,q,j,K=s[2]?"Deleting...":`Delete Selected (${s[1].size})`,Z,D,N,J,Y=qe(s[0]),ie=[];for(let R=0;R<Y.length;R+=1)ie[R]=ar(or(s,Y,R));return{c(){n=k("p"),n.textContent="The following tables already exist in the database. Select the tables you want to delete before loading new CSV files.",r=I(),i=k("div"),o=k("div"),c=k("label"),f=k("input"),d=I(),b=k("span"),u=k("strong"),v=W("Select All ("),P=W(w),_=W(" tables)"),S=I(),T=k("div");for(let R=0;R<ie.length;R+=1)ie[R].c();L=I(),F=k("div"),M=k("button"),O=W("Skip (Keep All Tables)"),q=I(),j=k("button"),Z=W(K),y(n,"class","info-text svelte-byhfly"),y(f,"type","checkbox"),f.checked=s[3],y(f,"class","svelte-byhfly"),y(c,"class","checkbox-label svelte-byhfly"),y(o,"class","select-all-container svelte-byhfly"),y(T,"class","table-list svelte-byhfly"),y(i,"class","table-list-container svelte-byhfly"),y(M,"class","button secondary svelte-byhfly"),M.disabled=s[2],y(j,"class","button danger svelte-byhfly"),j.disabled=D=s[2]||!s[4],y(F,"class","actions svelte-byhfly")},m(R,V){Q(R,n,V),Q(R,r,V),Q(R,i,V),m(i,o),m(o,c),m(c,f),m(c,d),m(c,b),m(b,u),m(u,v),m(u,P),m(u,_),m(i,S),m(i,T);for(let ne=0;ne<ie.length;ne+=1)ie[ne]&&ie[ne].m(T,null);Q(R,L,V),Q(R,F,V),m(F,M),m(M,O),m(F,q),m(F,j),m(j,Z),N||(J=[de(f,"change",s[6]),de(M,"click",s[8]),de(j,"click",s[7])],N=!0)},p(R,V){if(V&8&&(f.checked=R[3]),V&1&&w!==(w=R[0].length+"")&&se(P,w),V&35){Y=qe(R[0]);let ne;for(ne=0;ne<Y.length;ne+=1){const B=or(R,Y,ne);ie[ne]?ie[ne].p(B,V):(ie[ne]=ar(B),ie[ne].c(),ie[ne].m(T,null))}for(;ne<ie.length;ne+=1)ie[ne].d(1);ie.length=Y.length}V&4&&(M.disabled=R[2]),V&6&&K!==(K=R[2]?"Deleting...":`Delete Selected (${R[1].size})`)&&se(Z,K),V&20&&D!==(D=R[2]||!R[4])&&(j.disabled=D)},d(R){R&&(U(n),U(r),U(i),U(L),U(F)),ht(ie,R),N=!1,Ae(J)}}}function ci(s){let n,r,i,o,c,f;return{c(){n=k("div"),r=k("p"),r.textContent="No existing tables found in the database.",i=I(),o=k("button"),o.textContent="Proceed to Load CSV Files",y(r,"class","svelte-byhfly"),y(o,"class","button primary svelte-byhfly"),y(n,"class","no-tables svelte-byhfly")},m(d,b){Q(d,n,b),m(n,r),m(n,i),m(n,o),c||(f=de(o,"click",s[8]),c=!0)},p:fe,d(d){d&&U(n),c=!1,f()}}}function ar(s){let n,r,i,o,c,f,d=s[12]+"",b,u,v,w;function P(){return s[10](s[12])}return{c(){n=k("div"),r=k("label"),i=k("input"),c=I(),f=k("span"),b=W(d),u=I(),y(i,"type","checkbox"),i.checked=o=s[1].has(s[12]),y(i,"class","svelte-byhfly"),y(f,"class","table-name svelte-byhfly"),y(r,"class","checkbox-label svelte-byhfly"),y(n,"class","table-item svelte-byhfly")},m(_,S){Q(_,n,S),m(n,r),m(r,i),m(r,c),m(r,f),m(f,b),m(n,u),v||(w=de(i,"change",P),v=!0)},p(_,S){s=_,S&3&&o!==(o=s[1].has(s[12]))&&(i.checked=o),S&1&&d!==(d=s[12]+"")&&se(b,d)},d(_){_&&U(n),v=!1,w()}}}function di(s){let n,r,i,o;function c(b,u){return b[0].length===0?ci:fi}let f=c(s),d=f(s);return{c(){n=k("div"),r=k("div"),i=k("h2"),i.textContent="Existing Database Tables",o=I(),d.c(),y(i,"class","svelte-byhfly"),y(r,"class","manager-content svelte-byhfly"),y(n,"class","table-manager svelte-byhfly")},m(b,u){Q(b,n,u),m(n,r),m(r,i),m(r,o),d.m(r,null)},p(b,[u]){f===(f=c(b))&&d?d.p(b,u):(d.d(1),d=f(b),d&&(d.c(),d.m(r,null)))},i:fe,o:fe,d(b){b&&U(n),d.d()}}}function hi(s,n,r){let i,o,{tables:c=[]}=n,{dbManager:f=null}=n;const d=Et();let b=!1,u=new Set;function v(T){u.has(T)?u.delete(T):u.add(T),r(1,u)}function w(){u.size===c.length?u.clear():r(1,u=new Set(c)),r(1,u)}async function P(){if(u.size===0){d("proceed");return}r(2,b=!0);try{for(const T of u)f&&f.db&&f.db.run(`DROP TABLE IF EXISTS "${T}"`);d("tablesDeleted")}catch(T){console.error("Error deleting tables:",T)}finally{r(2,b=!1)}}function _(){d("proceed")}const S=T=>v(T);return s.$$set=T=>{"tables"in T&&r(0,c=T.tables),"dbManager"in T&&r(9,f=T.dbManager)},s.$$.update=()=>{s.$$.dirty&2&&r(4,i=u.size>0),s.$$.dirty&3&&r(3,o=c.length>0&&u.size===c.length)},[c,u,b,o,i,v,w,P,_,f,S]}class mi extends $e{constructor(n){super(),xe(this,n,hi,di,Ze,{tables:0,dbManager:9})}}function bi(s){let n;return{c(){n=W("Execute")},m(r,i){Q(r,n,i)},d(r){r&&U(n)}}}function pi(s){let n;return{c(){n=W("Executing...")},m(r,i){Q(r,n,i)},d(r){r&&U(n)}}}function gi(s){let n;return{c(){n=W("Translating...")},m(r,i){Q(r,n,i)},d(r){r&&U(n)}}}function ur(s){let n;return{c(){n=k("p"),n.textContent="Select a table first to enter commands",y(n,"class","hint svelte-w5anpw")},m(r,i){Q(r,n,i)},d(r){r&&U(n)}}}function _i(s){let n,r,i,o,c,f,d,b,u,v,w,P,_,S,T;function L(q,j){return q[3]?gi:q[4]?pi:bi}let F=L(s),M=F(s),O=!s[0]&&ur();return{c(){n=k("div"),r=k("div"),i=k("label"),i.textContent="Natural Language Command:",o=I(),c=k("div"),f=k("input"),b=I(),u=k("button"),M.c(),w=I(),O&&O.c(),P=I(),_=k("p"),_.textContent="Press Ctrl+Enter to submit",y(i,"for","command-input"),y(i,"class","svelte-w5anpw"),y(f,"id","command-input"),y(f,"type","text"),y(f,"placeholder","Enter a command in natural language (e.g., 'show all rows', 'count records', 'find rows where column = value')"),f.disabled=d=s[1]||!s[0]||s[3]||s[4],y(f,"class","command-field svelte-w5anpw"),u.disabled=v=s[1]||!s[0]||!s[2].trim()||s[3]||s[4],y(u,"class","submit-button svelte-w5anpw"),y(c,"class","input-wrapper svelte-w5anpw"),y(_,"class","hint svelte-w5anpw"),y(r,"class","input-container svelte-w5anpw"),y(n,"class","command-input svelte-w5anpw")},m(q,j){Q(q,n,j),m(n,r),m(r,i),m(r,o),m(r,c),m(c,f),it(f,s[2]),m(c,b),m(c,u),M.m(u,null),m(r,w),O&&O.m(r,null),m(r,P),m(r,_),S||(T=[de(f,"input",s[9]),de(f,"keydown",s[6]),de(u,"click",s[5])],S=!0)},p(q,[j]){j&27&&d!==(d=q[1]||!q[0]||q[3]||q[4])&&(f.disabled=d),j&4&&f.value!==q[2]&&it(f,q[2]),F!==(F=L(q))&&(M.d(1),M=F(q),M&&(M.c(),M.m(u,null))),j&31&&v!==(v=q[1]||!q[0]||!q[2].trim()||q[3]||q[4])&&(u.disabled=v),q[0]?O&&(O.d(1),O=null):O||(O=ur(),O.c(),O.m(r,P))},i:fe,o:fe,d(q){q&&U(n),M.d(),O&&O.d(),S=!1,Ae(T)}}}function vi(s,n,r){let{currentTable:i=null}=n,{tableSchema:o=[]}=n,{electronAPI:c=null}=n,{disabled:f=!1}=n;const d=Et();let b="",u=!1,v=!1;async function w(){if(!b.trim()||!i||f)return;r(3,u=!0);let S="",T=null;try{S=await c.translateToSQL(b.trim(),i,o)}catch(L){T=L.message||"Failed to translate command to SQL",console.error("Translation error:",L)}finally{r(3,u=!1)}if(T){d("commandResult",{naturalLanguage:b,sql:"",error:T,timestamp:new Date().toISOString().replace("T"," ").substring(0,19)}),r(2,b="");return}r(4,v=!0),d("executeSQL",{sql:S,naturalLanguage:b}),r(4,v=!1),r(2,b="")}function P(S){S.key==="Enter"&&(S.ctrlKey||S.metaKey)&&(S.preventDefault(),w())}function _(){b=this.value,r(2,b)}return s.$$set=S=>{"currentTable"in S&&r(0,i=S.currentTable),"tableSchema"in S&&r(7,o=S.tableSchema),"electronAPI"in S&&r(8,c=S.electronAPI),"disabled"in S&&r(1,f=S.disabled)},[i,f,b,u,v,w,P,o,c,_]}class wi extends $e{constructor(n){super(),xe(this,n,vi,_i,Ze,{currentTable:0,tableSchema:7,electronAPI:8,disabled:1})}}function fr(s,n,r){const i=s.slice();return i[22]=n[r],i[24]=r,i}function yi(s){let n,r,i,o=s[5]?"Executing...":"Execute from Selected",c,f,d,b;return{c(){n=k("button"),n.textContent="Edit",r=I(),i=k("button"),c=W(o),y(n,"class","button edit svelte-1v9fgyi"),y(i,"class","button execute svelte-1v9fgyi"),i.disabled=f=s[4]===null||!s[0]||s[5]},m(u,v){Q(u,n,v),Q(u,r,v),Q(u,i,v),m(i,c),d||(b=[de(n,"click",s[8]),de(i,"click",s[12])],d=!0)},p(u,v){v&32&&o!==(o=u[5]?"Executing...":"Execute from Selected")&&se(c,o),v&49&&f!==(f=u[4]===null||!u[0]||u[5])&&(i.disabled=f)},d(u){u&&(U(n),U(r),U(i)),d=!1,Ae(b)}}}function ki(s){let n,r,i,o,c;return{c(){n=k("button"),n.textContent="Save",r=I(),i=k("button"),i.textContent="Cancel",y(n,"class","button save svelte-1v9fgyi"),y(i,"class","button cancel svelte-1v9fgyi")},m(f,d){Q(f,n,d),Q(f,r,d),Q(f,i,d),o||(c=[de(n,"click",s[10]),de(i,"click",s[9])],o=!0)},p:fe,d(f){f&&(U(n),U(r),U(i)),o=!1,Ae(c)}}}function cr(s){let n,r,i,o,c,f,d;return{c(){n=k("div"),r=k("pre"),i=W(s[6]),o=I(),c=k("button"),c.textContent="",y(r,"class","svelte-1v9fgyi"),y(c,"class","svelte-1v9fgyi"),y(n,"class","error-banner svelte-1v9fgyi")},m(b,u){Q(b,n,u),m(n,r),m(r,i),m(n,o),m(n,c),f||(d=de(c,"click",s[16]),f=!0)},p(b,u){u&64&&se(i,b[6])},d(b){b&&U(n),f=!1,d()}}}function Ei(s){let n;function r(c,f){return c[3].length===0?Pi:Li}let i=r(s),o=i(s);return{c(){n=k("div"),o.c(),y(n,"class","log-display svelte-1v9fgyi")},m(c,f){Q(c,n,f),o.m(n,null)},p(c,f){i===(i=r(c))&&o?o.p(c,f):(o.d(1),o=i(c),o&&(o.c(),o.m(n,null)))},d(c){c&&U(n),o.d()}}}function Si(s){let n,r,i;return{c(){n=k("textarea"),y(n,"class","log-editor svelte-1v9fgyi"),y(n,"placeholder","Log file content...")},m(o,c){Q(o,n,c),it(n,s[2]),r||(i=de(n,"input",s[17]),r=!0)},p(o,c){c&4&&it(n,o[2])},d(o){o&&U(n),r=!1,i()}}}function Li(s){let n=[],r=new Map,i,o=qe(s[3]);const c=f=>f[24];for(let f=0;f<o.length;f+=1){let d=fr(s,o,f),b=c(d);r.set(b,n[f]=gr(b,d))}return{c(){for(let f=0;f<n.length;f+=1)n[f].c();i=Sr()},m(f,d){for(let b=0;b<n.length;b+=1)n[b]&&n[b].m(f,d);Q(f,i,d)},p(f,d){d&2072&&(o=qe(f[3]),n=Nl(n,d,c,1,f,o,r,i.parentNode,Ml,gr,i,fr))},d(f){f&&U(i);for(let d=0;d<n.length;d+=1)n[d].d(f)}}}function Pi(s){let n;return{c(){n=k("div"),n.textContent="No log entries yet. Execute some commands to see them here.",y(n,"class","empty-message svelte-1v9fgyi")},m(r,i){Q(r,n,i)},p:fe,d(r){r&&U(n)}}}function dr(s){let n;return{c(){n=k("span"),n.textContent="ERROR",y(n,"class","error-badge svelte-1v9fgyi")},m(r,i){Q(r,n,i)},d(r){r&&U(n)}}}function hr(s){let n,r,i,o=s[22].naturalLanguage+"",c;return{c(){n=k("div"),r=k("strong"),r.textContent="NL:",i=I(),c=W(o),y(r,"class","svelte-1v9fgyi"),y(n,"class","entry-line svelte-1v9fgyi")},m(f,d){Q(f,n,d),m(n,r),m(n,i),m(n,c)},p(f,d){d&8&&o!==(o=f[22].naturalLanguage+"")&&se(c,o)},d(f){f&&U(n)}}}function mr(s){let n,r,i,o,c=s[22].sql+"",f;return{c(){n=k("div"),r=k("strong"),r.textContent="SQL:",i=I(),o=k("code"),f=W(c),y(r,"class","svelte-1v9fgyi"),y(o,"class","svelte-1v9fgyi"),y(n,"class","entry-line svelte-1v9fgyi")},m(d,b){Q(d,n,b),m(n,r),m(n,i),m(n,o),m(o,f)},p(d,b){b&8&&c!==(c=d[22].sql+"")&&se(f,c)},d(d){d&&U(n)}}}function br(s){let n,r,i,o=s[22].error+"",c;return{c(){n=k("div"),r=k("strong"),r.textContent="ERROR:",i=I(),c=W(o),y(r,"class","svelte-1v9fgyi"),y(n,"class","entry-line error svelte-1v9fgyi")},m(f,d){Q(f,n,d),m(n,r),m(n,i),m(n,c)},p(f,d){d&8&&o!==(o=f[22].error+"")&&se(c,o)},d(f){f&&U(n)}}}function pr(s){let n,r,i,o=s[22].result+"",c;return{c(){n=k("div"),r=k("strong"),r.textContent="RESULT:",i=I(),c=W(o),y(r,"class","svelte-1v9fgyi"),y(n,"class","entry-line result svelte-1v9fgyi")},m(f,d){Q(f,n,d),m(n,r),m(n,i),m(n,c)},p(f,d){d&8&&o!==(o=f[22].result+"")&&se(c,o)},d(f){f&&U(n)}}}function gr(s,n){let r,i,o,c,f=n[22].timestamp+"",d,b,u,v,w,P,_,S,T,L,F,M=n[22].error&&dr(),O=n[22].naturalLanguage&&hr(n),q=n[22].sql&&mr(n),j=n[22].error&&br(n),K=n[22].result&&pr(n);function Z(){return n[18](n[24])}return{key:s,first:null,c(){r=k("div"),i=k("div"),o=k("span"),c=W("["),d=W(f),b=W("]"),u=I(),M&&M.c(),v=I(),O&&O.c(),w=I(),q&&q.c(),P=I(),j&&j.c(),_=I(),K&&K.c(),S=I(),y(o,"class","timestamp svelte-1v9fgyi"),y(i,"class","entry-header svelte-1v9fgyi"),y(r,"class",T="log-entry "+(n[4]===n[24]?"selected":"")+" "+(n[22].error?"has-error":"")+" svelte-1v9fgyi"),this.first=r},m(D,N){Q(D,r,N),m(r,i),m(i,o),m(o,c),m(o,d),m(o,b),m(i,u),M&&M.m(i,null),m(r,v),O&&O.m(r,null),m(r,w),q&&q.m(r,null),m(r,P),j&&j.m(r,null),m(r,_),K&&K.m(r,null),m(r,S),L||(F=de(r,"click",Z),L=!0)},p(D,N){n=D,N&8&&f!==(f=n[22].timestamp+"")&&se(d,f),n[22].error?M||(M=dr(),M.c(),M.m(i,null)):M&&(M.d(1),M=null),n[22].naturalLanguage?O?O.p(n,N):(O=hr(n),O.c(),O.m(r,w)):O&&(O.d(1),O=null),n[22].sql?q?q.p(n,N):(q=mr(n),q.c(),q.m(r,P)):q&&(q.d(1),q=null),n[22].error?j?j.p(n,N):(j=br(n),j.c(),j.m(r,_)):j&&(j.d(1),j=null),n[22].result?K?K.p(n,N):(K=pr(n),K.c(),K.m(r,S)):K&&(K.d(1),K=null),N&24&&T!==(T="log-entry "+(n[4]===n[24]?"selected":"")+" "+(n[22].error?"has-error":"")+" svelte-1v9fgyi")&&y(r,"class",T)},d(D){D&&U(r),M&&M.d(),O&&O.d(),q&&q.d(),j&&j.d(),K&&K.d(),L=!1,F()}}}function qi(s){let n,r,i,o,c,f,d,b,u,v,w,P;function _(q,j){return q[1]?ki:yi}let S=_(s),T=S(s),L=s[6]&&cr(s);function F(q,j){return q[1]?Si:Ei}let M=F(s),O=M(s);return{c(){n=k("div"),r=k("header"),i=k("h2"),i.textContent="SQL Command Log",o=I(),c=k("div"),T.c(),f=I(),d=k("button"),d.textContent="Refresh",b=I(),L&&L.c(),u=I(),v=k("div"),O.c(),y(i,"class","svelte-1v9fgyi"),y(d,"class","button refresh svelte-1v9fgyi"),y(c,"class","header-actions svelte-1v9fgyi"),y(r,"class","log-header svelte-1v9fgyi"),y(v,"class","log-content svelte-1v9fgyi"),y(n,"class","log-viewer svelte-1v9fgyi")},m(q,j){Q(q,n,j),m(n,r),m(r,i),m(r,o),m(r,c),T.m(c,null),m(c,f),m(c,d),m(n,b),L&&L.m(n,null),m(n,u),m(n,v),O.m(v,null),w||(P=de(d,"click",s[7]),w=!0)},p(q,[j]){S===(S=_(q))&&T?T.p(q,j):(T.d(1),T=S(q),T&&(T.c(),T.m(c,f))),q[6]?L?L.p(q,j):(L=cr(q),L.c(),L.m(n,u)):L&&(L.d(1),L=null),M===(M=F(q))&&O?O.p(q,j):(O.d(1),O=M(q),O&&(O.c(),O.m(v,null)))},i:fe,o:fe,d(q){q&&U(n),T.d(),L&&L.d(),O.d(),w=!1,P()}}}function Ci(s,n,r){let{logManager:i=null}=n,{dbManager:o=null}=n,{currentTable:c=null}=n,{electronAPI:f=null}=n;const d=Et();let b="",u=!1,v="",w=[],P=null,_=!1,S="";async function T(){if(i)try{b=await i.loadLog(),r(2,v=b),L()}catch(N){console.error("Error loading log:",N),r(6,S=`Error loading log: ${N.message}`)}}function L(){i&&r(3,w=i.parseLogEntries(b))}function F(){r(1,u=!0),r(2,v=b)}function M(){r(1,u=!1),r(2,v=b),r(6,S="")}async function O(){if(i)try{await i.saveLog(v),b=v,L(),r(1,u=!1),r(6,S="")}catch(N){console.error("Error saving log:",N),r(6,S=`Error saving log: ${N.message}`)}}function q(N){r(4,P=N)}async function j(){if(P===null||!o||!c){r(6,S="Please select an entry and ensure a table is selected");return}r(5,_=!0),r(6,S="");const N=w.slice(P),J=[];for(let V=0;V<N.length;V++){const ne=N[V];if(!ne.sql||ne.sql.trim()===""){J.push(ne);continue}const B={...ne};try{const le=o.executeSQL(ne.sql);B.result=le.type==="select"?`Returned ${le.rowCount} row(s)`:`Affected ${le.affectedRows} row(s)`,B.error=null}catch(le){B.error=le.message,B.result=null,r(6,S+=`Error executing entry ${P+V+1}: ${le.message}
`)}J.push(B)}const R=[...w.slice(0,P),...J].map(V=>i.formatLogEntry(V)).join(`
`);i&&(b=R,r(2,v=R),await i.saveLog(R),L()),r(5,_=!1),d("refresh")}const K=()=>r(6,S="");function Z(){v=this.value,r(2,v)}const D=N=>q(N);return s.$$set=N=>{"logManager"in N&&r(13,i=N.logManager),"dbManager"in N&&r(14,o=N.dbManager),"currentTable"in N&&r(0,c=N.currentTable),"electronAPI"in N&&r(15,f=N.electronAPI)},s.$$.update=()=>{s.$$.dirty&8192&&i&&T()},[c,u,v,w,P,_,S,T,F,M,O,q,j,i,o,f,K,Z,D]}class Ti extends $e{constructor(n){super(),xe(this,n,Ci,qi,Ze,{logManager:13,dbManager:14,currentTable:0,electronAPI:15})}}const{window:Ai}=Sl;function _r(s){let n,r,i;return{c(){n=k("div"),r=W("Version "),i=W(s[11]),y(n,"class","version-banner svelte-skzjgk")},m(o,c){Q(o,n,c),m(n,r),m(n,i)},p(o,c){c&2048&&se(i,o[11])},d(o){o&&U(n)}}}function vr(s){let n,r,i,o=s[13].connected?"":"",c,f,d,b=s[13].message+"",u,v,w,P,_,S,T,L=s[13].suggestion&&wr(s);return{c(){n=k("div"),r=k("div"),i=k("span"),c=W(o),f=I(),d=k("span"),u=W(b),v=I(),L&&L.c(),w=I(),P=k("button"),P.textContent="",y(i,"class","llm-status-icon svelte-skzjgk"),y(d,"class","llm-status-message svelte-skzjgk"),y(r,"class","llm-status-content svelte-skzjgk"),y(P,"class","llm-status-close svelte-skzjgk"),y(P,"title","Dismiss"),y(n,"class",_="llm-status-banner "+(s[13].connected?"connected":"disconnected")+" svelte-skzjgk")},m(F,M){Q(F,n,M),m(n,r),m(r,i),m(i,c),m(r,f),m(r,d),m(d,u),m(r,v),L&&L.m(r,null),m(n,w),m(n,P),S||(T=de(P,"click",s[23]),S=!0)},p(F,M){M&8192&&o!==(o=F[13].connected?"":"")&&se(c,o),M&8192&&b!==(b=F[13].message+"")&&se(u,b),F[13].suggestion?L?L.p(F,M):(L=wr(F),L.c(),L.m(r,null)):L&&(L.d(1),L=null),M&8192&&_!==(_="llm-status-banner "+(F[13].connected?"connected":"disconnected")+" svelte-skzjgk")&&y(n,"class",_)},d(F){F&&U(n),L&&L.d(),S=!1,T()}}}function wr(s){let n,r,i=s[13].suggestion+"",o,c;return{c(){n=k("span"),r=W("("),o=W(i),c=W(")"),y(n,"class","llm-status-suggestion svelte-skzjgk")},m(f,d){Q(f,n,d),m(n,r),m(n,o),m(n,c)},p(f,d){d&8192&&i!==(i=f[13].suggestion+"")&&se(o,i)},d(f){f&&U(n)}}}function yr(s){let n,r,i,o,c,f;return{c(){n=k("div"),r=W(s[10]),i=I(),o=k("button"),o.textContent="",y(o,"class","svelte-skzjgk"),y(n,"class","error-banner svelte-skzjgk")},m(d,b){Q(d,n,b),m(n,r),m(n,i),m(n,o),c||(f=de(o,"click",s[24]),c=!0)},p(d,b){b&1024&&se(r,d[10])},d(d){d&&U(n),c=!1,f()}}}function Mi(s){let n,r,i,o,c,f,d,b,u,v;return d=new Ti({props:{logManager:s[3],dbManager:s[0],currentTable:s[1],electronAPI:window.electronAPI}}),d.$on("refresh",s[19]),{c(){n=k("div"),r=k("div"),i=k("button"),i.textContent="Table View",o=I(),c=k("button"),c.textContent="Log View",f=I(),st(d.$$.fragment),y(i,"class","toggle-button svelte-skzjgk"),y(c,"class","toggle-button active svelte-skzjgk"),y(r,"class","view-toggle svelte-skzjgk"),y(n,"class","viewer-container svelte-skzjgk")},m(w,P){Q(w,n,P),m(n,r),m(r,i),m(r,o),m(r,c),m(n,f),Ye(d,n,null),b=!0,u||(v=de(i,"click",s[20]),u=!0)},p(w,P){const _={};P&8&&(_.logManager=w[3]),P&1&&(_.dbManager=w[0]),P&2&&(_.currentTable=w[1]),d.$set(_)},i(w){b||(Te(d.$$.fragment,w),b=!0)},o(w){je(d.$$.fragment,w),b=!1},d(w){w&&U(n),Ke(d),u=!1,v()}}}function Ni(s){let n,r,i,o,c,f,d,b,u,v,w,P;return d=new wi({props:{currentTable:s[1],tableSchema:s[12],electronAPI:window.electronAPI}}),d.$on("executeSQL",s[21]),u=new ti({props:{tables:s[7],currentTable:s[1],dbManager:s[0],tableToCsvMap:s[8]}}),u.$on("tableSelect",s[18]),u.$on("refresh",s[19]),{c(){n=k("div"),r=k("div"),i=k("button"),i.textContent="Table View",o=I(),c=k("button"),c.textContent="Log View",f=I(),st(d.$$.fragment),b=I(),st(u.$$.fragment),y(i,"class","toggle-button active svelte-skzjgk"),y(c,"class","toggle-button svelte-skzjgk"),y(r,"class","view-toggle svelte-skzjgk"),y(n,"class","viewer-container svelte-skzjgk")},m(_,S){Q(_,n,S),m(n,r),m(r,i),m(r,o),m(r,c),m(n,f),Ye(d,n,null),m(n,b),Ye(u,n,null),v=!0,w||(P=de(c,"click",s[20]),w=!0)},p(_,S){const T={};S&2&&(T.currentTable=_[1]),S&4096&&(T.tableSchema=_[12]),d.$set(T);const L={};S&128&&(L.tables=_[7]),S&2&&(L.currentTable=_[1]),S&1&&(L.dbManager=_[0]),S&256&&(L.tableToCsvMap=_[8]),u.$set(L)},i(_){v||(Te(d.$$.fragment,_),Te(u.$$.fragment,_),v=!0)},o(_){je(d.$$.fragment,_),je(u.$$.fragment,_),v=!1},d(_){_&&U(n),Ke(d),Ke(u),w=!1,P()}}}function Ri(s){let n,r;return n=new li({props:{message:s[9]}}),{c(){st(n.$$.fragment)},m(i,o){Ye(n,i,o),r=!0},p(i,o){const c={};o&512&&(c.message=i[9]),n.$set(c)},i(i){r||(Te(n.$$.fragment,i),r=!0)},o(i){je(n.$$.fragment,i),r=!1},d(i){Ke(n,i)}}}function Oi(s){let n,r;return n=new ui({props:{config:s[5],configPath:s[6],configManager:s[2]}}),n.$on("proceed",s[16]),n.$on("cancel",s[17]),{c(){st(n.$$.fragment)},m(i,o){Ye(n,i,o),r=!0},p(i,o){const c={};o&32&&(c.config=i[5]),o&64&&(c.configPath=i[6]),o&4&&(c.configManager=i[2]),n.$set(c)},i(i){r||(Te(n.$$.fragment,i),r=!0)},o(i){je(n.$$.fragment,i),r=!1},d(i){Ke(n,i)}}}function Di(s){let n,r;return n=new mi({props:{tables:s[7],dbManager:s[0]}}),n.$on("tablesDeleted",s[15]),n.$on("proceed",s[16]),{c(){st(n.$$.fragment)},m(i,o){Ye(n,i,o),r=!0},p(i,o){const c={};o&128&&(c.tables=i[7]),o&1&&(c.dbManager=i[0]),n.$set(c)},i(i){r||(Te(n.$$.fragment,i),r=!0)},o(i){je(n.$$.fragment,i),r=!1},d(i){Ke(n,i)}}}function ji(s){let n,r,i,o,c,f,d,b,u,v=s[11]&&_r(s),w=s[14]&&s[13]&&vr(s),P=s[10]&&yr(s);const _=[Di,Oi,Ri,Ni,Mi],S=[];function T(L,F){return L[4]==="tableManager"?0:L[4]==="configPreview"?1:L[4]==="loading"?2:L[4]==="viewer"?3:L[4]==="logView"?4:-1}return~(c=T(s))&&(f=S[c]=_[c](s)),{c(){n=k("div"),v&&v.c(),r=I(),w&&w.c(),i=I(),P&&P.c(),o=I(),f&&f.c(),y(n,"class","app svelte-skzjgk")},m(L,F){Q(L,n,F),v&&v.m(n,null),m(n,r),w&&w.m(n,null),m(n,i),P&&P.m(n,null),m(n,o),~c&&S[c].m(n,null),d=!0,b||(u=de(Ai,"beforeunload",s[22]),b=!0)},p(L,[F]){L[11]?v?v.p(L,F):(v=_r(L),v.c(),v.m(n,r)):v&&(v.d(1),v=null),L[14]&&L[13]?w?w.p(L,F):(w=vr(L),w.c(),w.m(n,i)):w&&(w.d(1),w=null),L[10]?P?P.p(L,F):(P=yr(L),P.c(),P.m(n,o)):P&&(P.d(1),P=null);let M=c;c=T(L),c===M?~c&&S[c].p(L,F):(f&&(Cr(),je(S[M],1,1,()=>{S[M]=null}),Tr()),~c?(f=S[c],f?f.p(L,F):(f=S[c]=_[c](L),f.c()),Te(f,1),f.m(n,null)):f=null)},i(L){d||(Te(f),d=!0)},o(L){je(f),d=!1},d(L){L&&U(n),v&&v.d(),w&&w.d(),P&&P.d(),~c&&S[c].d(),b=!1,u()}}}function Ii(s,n,r){let i,o,c,f="loading",d=null,b=null,u=[],v={},w=null,P="",_="",S="",T=[],L=null,F=!0;Pr(async()=>{if(window.addEventListener("llm-status",B=>{r(13,L=B.detail),console.log("LLM Status:",L)}),console.log("App mounted, checking for electronAPI..."),console.log("window.electronAPI:",window.electronAPI),setTimeout(async()=>{if(!L&&window.electronAPI&&window.electronAPI.testOllamaConnection)try{const B=await window.electronAPI.testOllamaConnection();r(13,L={connected:B.success,message:B.success?"Ollama connected successfully":`Ollama not available: ${B.error||B.message||"Connection failed"}`,host:B.host||"localhost",port:B.port||"11434",error:B.error,suggestion:B.suggestion})}catch(B){r(13,L={connected:!1,message:`Failed to test Ollama connection: ${B.message}`})}},1e3),window.electronAPI)try{window.electronAPI.getAppVersion&&(r(11,S=await window.electronAPI.getAppVersion()),console.log(`Application version: ${S}`)),r(2,i=new Dl(window.electronAPI)),await i.initialize(),r(0,o=new Vl),await o.initialize(),r(3,c=new Wl(window.electronAPI)),await c.initialize(),console.log("Initialization complete"),await M()}catch(B){console.error("Initialization error:",B),r(10,_=`Initialization error: ${B.message}`)}else console.error("Electron API not available"),r(10,_="Electron API not available. Please run this application in Electron.")});async function M(){try{if(r(9,P="Loading database..."),r(6,b=i.getDefaultConfigPath()),r(5,d=await i.loadConfig(b)),d||(await i.createDefaultConfig(),r(5,d=await i.loadConfig(b))),!d||!i.validateConfig(d)){r(10,_="Invalid configuration file");return}await o.loadFromFile(d.databasePath,window.electronAPI),r(7,u=o.getTableNames()),r(4,f="tableManager"),r(9,P="")}catch(B){r(10,_=`Error loading config: ${B.message}`),console.error(B)}}async function O(){o&&d&&await o.saveToFile(d.databasePath,window.electronAPI),o&&r(7,u=o.getTableNames()),q()}function q(){r(4,f="loading"),j()}async function j(){if(!d||!d.csvFiles||d.csvFiles.length===0){r(7,u=o.getTableNames()),u.length>0&&r(1,w=u[0]),r(4,f="viewer"),r(9,P="");return}r(9,P="Checking CSV files...");const B=new Set(o.getTableNames());r(8,v={});let le=0,be=0;for(let ce=0;ce<d.csvFiles.length;ce++){const oe=d.csvFiles[ce],pe=Yn.getTableNameFromPath(oe);if(B.has(pe)){console.log(`Table ${pe} already exists, skipping CSV file ${oe}`),be++,r(8,v[pe]=oe,v);continue}r(9,P=`Loading ${oe}... (${ce+1}/${d.csvFiles.length})`);try{const we=await window.electronAPI.readCsvFile(oe),{schema:Me,data:ke}=Yn.parseCSV(we);r(8,v[pe]=oe,v),o.createTable(pe,Me),o.insertData(pe,Me,ke),le++,B.add(pe)}catch(we){console.error(`Error loading CSV file ${oe}:`,we),r(10,_=`Error loading ${oe}: ${we.message}`)}}if(le>0&&(r(9,P="Saving database..."),await o.saveToFile(d.databasePath,window.electronAPI)),r(7,u=o.getTableNames()),u.length>0&&(r(1,w=u[0]),D()),be>0){const ce=`Loaded ${le} file(s), skipped ${be} file(s) (tables already exist)`;console.log(ce),_||setTimeout(()=>{},100)}r(4,f="viewer"),r(9,P="")}function K(){r(4,f="startup"),r(5,d=null),r(6,b=null)}function Z(B){var be;const le=(be=B.detail)==null?void 0:be.table;le&&(r(1,w=le),D())}function D(){o&&w?r(12,T=o.getTableSchema(w)):r(12,T=[])}function N(){o&&(r(7,u=o.getTableNames()),u.length>0&&!u.includes(w)?(r(1,w=u[0]),D()):w&&D())}function J(){f==="viewer"?r(4,f="logView"):f==="logView"&&r(4,f="viewer")}async function Y(B){const le=B.detail;if(!c)return;const be=c.formatLogEntry(le),ce=await c.loadLog(),oe=ce+(ce?`
`:"")+be;await c.saveLog(oe)}async function ie(B){const{sql:le,naturalLanguage:be}=B.detail;if(!o||!w){r(10,_="No table selected or database not available");return}let ce=null,oe=null;try{ce=o.executeSQL(le),d&&ce.type==="modify"&&(await o.saveToFile(d.databasePath,window.electronAPI),N())}catch(we){oe=we.message||"SQL execution failed"}const pe=new Date().toISOString().replace("T"," ").substring(0,19);await Y({detail:{naturalLanguage:be,sql:le,error:oe,result:ce?ce.type==="select"?`Returned ${ce.rowCount} row(s)`:`Affected ${ce.affectedRows} row(s)`:null,timestamp:pe}})}const R=()=>{o&&o.close()},V=()=>r(14,F=!1),ne=()=>r(10,_="");return s.$$.update=()=>{s.$$.dirty&3&&w&&o&&D()},[o,w,i,c,f,d,b,u,v,P,_,S,T,L,F,O,q,K,Z,N,J,ie,R,V,ne]}class Fi extends $e{constructor(n){super(),xe(this,n,Ii,ji,Ze,{})}}new Fi({target:document.getElementById("app")});
