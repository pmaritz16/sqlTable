var kl=Object.defineProperty;var Sl=(o,n,r)=>n in o?kl(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r;var Ve=(o,n,r)=>Sl(o,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();function pe(){}function kr(o){return o()}function Bn(){return Object.create(null)}function Qe(o){o.forEach(kr)}function Sr(o){return typeof o=="function"}function nt(o,n){return o!=o?n==n:o!==n||o&&typeof o=="object"||typeof o=="function"}function ql(o){return Object.keys(o).length===0}const Cl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function m(o,n){o.appendChild(n)}function H(o,n,r){o.insertBefore(n,r||null)}function x(o){o.parentNode&&o.parentNode.removeChild(o)}function mt(o,n){for(let r=0;r<o.length;r+=1)o[r]&&o[r].d(n)}function E(o){return document.createElement(o)}function D(o){return document.createTextNode(o)}function F(){return D(" ")}function qr(){return D("")}function Ee(o,n,r,i){return o.addEventListener(n,r,i),()=>o.removeEventListener(n,r,i)}function k(o,n,r){r==null?o.removeAttribute(n):o.getAttribute(n)!==r&&o.setAttribute(n,r)}function Pl(o){return Array.from(o.childNodes)}function oe(o,n){n=""+n,o.data!==n&&(o.data=n)}function on(o,n){o.value=n??""}function xn(o,n,r){for(let i=0;i<o.options.length;i+=1){const s=o.options[i];if(s.__value===n){s.selected=!0;return}}o.selectedIndex=-1}function Tl(o,n,{bubbles:r=!1,cancelable:i=!1}={}){return new CustomEvent(o,{detail:n,bubbles:r,cancelable:i})}let qt;function St(o){qt=o}function Cr(){if(!qt)throw new Error("Function called outside component initialization");return qt}function Pr(o){Cr().$$.on_mount.push(o)}function jt(){const o=Cr();return(n,r,{cancelable:i=!1}={})=>{const s=o.$$.callbacks[n];if(s){const c=Tl(n,r,{cancelable:i});return s.slice().forEach(f=>{f.call(o,c)}),!c.defaultPrevented}return!0}}const ht=[],Hn=[];let dt=[];const Xn=[],Al=Promise.resolve();let sn=!1;function Ll(){sn||(sn=!0,Al.then(Tr))}function an(o){dt.push(o)}const ln=new Set;let ct=0;function Tr(){if(ct!==0)return;const o=qt;do{try{for(;ct<ht.length;){const n=ht[ct];ct++,St(n),Ml(n.$$)}}catch(n){throw ht.length=0,ct=0,n}for(St(null),ht.length=0,ct=0;Hn.length;)Hn.pop()();for(let n=0;n<dt.length;n+=1){const r=dt[n];ln.has(r)||(ln.add(r),r())}dt.length=0}while(ht.length);for(;Xn.length;)Xn.pop()();sn=!1,ln.clear(),St(o)}function Ml(o){if(o.fragment!==null){o.update(),Qe(o.before_update);const n=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,n),o.after_update.forEach(an)}}function Nl(o){const n=[],r=[];dt.forEach(i=>o.indexOf(i)===-1?n.push(i):r.push(i)),r.forEach(i=>i()),dt=n}const Ft=new Set;let tt;function Ar(){tt={r:0,c:[],p:tt}}function Lr(){tt.r||Qe(tt.c),tt=tt.p}function Oe(o,n){o&&o.i&&(Ft.delete(o),o.i(n))}function Ue(o,n,r,i){if(o&&o.o){if(Ft.has(o))return;Ft.add(o),tt.c.push(()=>{Ft.delete(o),i&&(r&&o.d(1),i())}),o.o(n)}else i&&i()}function Le(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function zl(o,n){o.d(1),n.delete(o.key)}function Rl(o,n,r,i,s,c,f,h,p,u,b,w){let q=o.length,v=c.length,C=q;const T={};for(;C--;)T[o[C].key]=C;const y=[],A=new Map,z=new Map,te=[];for(C=v;C--;){const R=w(s,c,C),Y=r(R);let le=f.get(Y);le?te.push(()=>le.p(R,n)):(le=u(Y,R),le.c()),A.set(Y,y[C]=le),Y in T&&z.set(Y,Math.abs(C-T[Y]))}const $=new Set,K=new Set;function G(R){Oe(R,1),R.m(h,b),f.set(R.key,R),b=R.first,v--}for(;q&&v;){const R=y[v-1],Y=o[q-1],le=R.key,L=Y.key;R===Y?(b=R.first,q--,v--):A.has(L)?!f.has(le)||$.has(le)?G(R):K.has(L)?q--:z.get(le)>z.get(L)?(K.add(le),G(R)):($.add(L),q--):(p(Y,f),q--)}for(;q--;){const R=o[q];A.has(R.key)||p(R,f)}for(;v;)G(y[v-1]);return Qe(te),y}function pt(o){o&&o.c()}function rt(o,n,r){const{fragment:i,after_update:s}=o.$$;i&&i.m(n,r),an(()=>{const c=o.$$.on_mount.map(kr).filter(Sr);o.$$.on_destroy?o.$$.on_destroy.push(...c):Qe(c),o.$$.on_mount=[]}),s.forEach(an)}function lt(o,n){const r=o.$$;r.fragment!==null&&(Nl(r.after_update),Qe(r.on_destroy),r.fragment&&r.fragment.d(n),r.on_destroy=r.fragment=null,r.ctx=[])}function Ol(o,n){o.$$.dirty[0]===-1&&(ht.push(o),Ll(),o.$$.dirty.fill(0)),o.$$.dirty[n/31|0]|=1<<n%31}function it(o,n,r,i,s,c,f=null,h=[-1]){const p=qt;St(o);const u=o.$$={fragment:null,ctx:[],props:c,update:pe,not_equal:s,bound:Bn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:Bn(),dirty:h,skip_bound:!1,root:n.target||p.$$.root};f&&f(u.root);let b=!1;if(u.ctx=r?r(o,n.props||{},(w,q,...v)=>{const C=v.length?v[0]:q;return u.ctx&&s(u.ctx[w],u.ctx[w]=C)&&(!u.skip_bound&&u.bound[w]&&u.bound[w](C),b&&Ol(o,w)),q}):[],u.update(),b=!0,Qe(u.before_update),u.fragment=i?i(u.ctx):!1,n.target){if(n.hydrate){const w=Pl(n.target);u.fragment&&u.fragment.l(w),w.forEach(x)}else u.fragment&&u.fragment.c();n.intro&&Oe(o.$$.fragment),rt(o,n.target,n.anchor),Tr()}St(p)}class ot{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){lt(this,1),this.$destroy=pe}$on(n,r){if(!Sr(r))return pe;const i=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return i.push(r),()=>{const s=i.indexOf(r);s!==-1&&i.splice(s,1)}}$set(n){this.$$set&&!ql(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Dl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Dl);class Il{constructor(n){this.api=n,this.defaultConfigPath=null,this.defaultConfig={databasePath:"",csvFiles:[]}}async initialize(){this.defaultConfigPath=await this.api.getDefaultConfigPath();const n=await this.api.getDefaultDatabasePath();this.defaultConfig.databasePath=n}getDefaultConfigPath(){return this.defaultConfigPath}async createDefaultConfig(){try{return await this.api.createDefaultConfig(this.defaultConfig)}catch(n){return console.error("Error creating default config:",n),!1}}async loadConfig(n){try{return await this.api.loadConfig(n)}catch(r){return console.error("Error loading config:",r),null}}async saveConfig(n,r){try{return await this.api.saveConfig(n,r),!0}catch(i){return console.error("Error saving config:",i),!1}}validateConfig(n){return!(!n||!n.databasePath||!Array.isArray(n.csvFiles))}async selectConfigFile(){try{return await this.api.selectConfigFile({title:"Select Config File",filters:[{name:"JSON",extensions:["json"]}]})}catch(n){return console.error("Error selecting config file:",n),null}}async readConfigFileRaw(n){try{return await this.api.readConfigFileRaw(n)}catch(r){return console.error("Error reading config file raw:",r),null}}}function Fl(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function jl(o){if(o.__esModule)return o;var n=o.default;if(typeof n=="function"){var r=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var s=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return o[i]}})}),r}var Mr={exports:{}};const Vl={},Ul=Object.freeze(Object.defineProperty({__proto__:null,default:Vl},Symbol.toStringTag,{value:"Module"})),Jn=jl(Ul);(function(o,n){var r=void 0,i=function(s){return r||(r=new Promise(function(c,f){var h=typeof s<"u"?s:{},p=h.onAbort;h.onAbort=function(e){f(new Error(e)),p&&p(e)},h.postRun=h.postRun||[],h.postRun.push(function(){c(h)}),o=void 0;var u;u||(u=typeof h<"u"?h:{});var b=typeof window=="object",w=typeof WorkerGlobalScope<"u",q=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";u.onRuntimeInitialized=function(){function e(g,P){switch(typeof P){case"boolean":yl(g,P?1:0);break;case"number":_l(g,P);break;case"string":wl(g,P,-1,-1);break;case"object":if(P===null)Vn(g);else if(P.length!=null){var I=Ot(P,Rt);vl(g,I,P.length,-1),Dt(I)}else It(g,"Wrong API use : tried to return a value of an unknown type ("+P+").",-1);break;default:Vn(g)}}function t(g,P){for(var I=[],J=0;J<g;J+=1){var Z=X(P+4*J,"i32"),he=dl(Z);if(he===1||he===2)Z=gl(Z);else if(he===3)Z=pl(Z);else if(he===4){he=Z,Z=ml(he),he=bl(he);for(var Ie=new Uint8Array(Z),Re=0;Re<Z;Re+=1)Ie[Re]=L[he+Re];Z=Ie}else Z=null;I.push(Z)}return I}function l(g,P){this.Qa=g,this.db=P,this.Oa=1,this.lb=[]}function a(g,P){if(this.db=P,P=_t(g)+1,this.eb=tn(P),this.eb===null)throw Error("Unable to allocate memory for the SQL string");We(g,j,this.eb,P),this.kb=this.eb,this.Za=this.pb=null}function d(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var P=this.filename,I="/",J=P;if(I&&(I=typeof I=="string"?I:Wt(I),J=P?bt(I+"/"+P):I),P=dn(!0,!0),J=Wr(J,P),g){if(typeof g=="string"){I=Array(g.length);for(var Z=0,he=g.length;Z<he;++Z)I[Z]=g.charCodeAt(Z);g=I}Lt(J,P|146),I=ft(J,577),Ln(I,g,0,g.length,0),Gt(I),Lt(J,P)}}this.handleError(U(this.filename,_)),this.db=X(_,"i32"),Qn(this.db),this.fb={},this.Sa={}}var _=Ge(4),S=u.cwrap,U=S("sqlite3_open","number",["string","number"]),ie=S("sqlite3_close_v2","number",["number"]),re=S("sqlite3_exec","number",["number","string","number","number","number"]),_e=S("sqlite3_changes","number",["number"]),Ae=S("sqlite3_prepare_v2","number",["number","string","number","number","number"]),On=S("sqlite3_sql","string",["number"]),Yr=S("sqlite3_normalized_sql","string",["number"]),Dn=S("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Kr=S("sqlite3_bind_text","number",["number","number","number","number","number"]),In=S("sqlite3_bind_blob","number",["number","number","number","number","number"]),Zr=S("sqlite3_bind_double","number",["number","number","number"]),$r=S("sqlite3_bind_int","number",["number","number","number"]),el=S("sqlite3_bind_parameter_index","number",["number","string"]),tl=S("sqlite3_step","number",["number"]),nl=S("sqlite3_errmsg","string",["number"]),rl=S("sqlite3_column_count","number",["number"]),ll=S("sqlite3_data_count","number",["number"]),il=S("sqlite3_column_double","number",["number","number"]),Fn=S("sqlite3_column_text","string",["number","number"]),ol=S("sqlite3_column_blob","number",["number","number"]),sl=S("sqlite3_column_bytes","number",["number","number"]),al=S("sqlite3_column_type","number",["number","number"]),ul=S("sqlite3_column_name","string",["number","number"]),fl=S("sqlite3_reset","number",["number"]),cl=S("sqlite3_clear_bindings","number",["number"]),hl=S("sqlite3_finalize","number",["number"]),jn=S("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),dl=S("sqlite3_value_type","number",["number"]),ml=S("sqlite3_value_bytes","number",["number"]),pl=S("sqlite3_value_text","string",["number"]),bl=S("sqlite3_value_blob","number",["number"]),gl=S("sqlite3_value_double","number",["number"]),_l=S("sqlite3_result_double","",["number","number"]),Vn=S("sqlite3_result_null","",["number"]),wl=S("sqlite3_result_text","",["number","string","number","number"]),vl=S("sqlite3_result_blob","",["number","number","number","number"]),yl=S("sqlite3_result_int","",["number","number"]),It=S("sqlite3_result_error","",["number","string","number"]),Un=S("sqlite3_aggregate_context","number",["number","number"]),Qn=S("RegisterExtensionFunctions","number",["number"]),Wn=S("sqlite3_update_hook","number",["number","number","number"]);l.prototype.bind=function(g){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(g)?this.Cb(g):g!=null&&typeof g=="object"?this.Db(g):!0},l.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var g=tl(this.Qa);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},l.prototype.wb=function(g){return g==null&&(g=this.Oa,this.Oa+=1),il(this.Qa,g)},l.prototype.Gb=function(g){if(g==null&&(g=this.Oa,this.Oa+=1),g=Fn(this.Qa,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},l.prototype.Hb=function(g){return g==null&&(g=this.Oa,this.Oa+=1),Fn(this.Qa,g)},l.prototype.getBlob=function(g){g==null&&(g=this.Oa,this.Oa+=1);var P=sl(this.Qa,g);g=ol(this.Qa,g);for(var I=new Uint8Array(P),J=0;J<P;J+=1)I[J]=L[g+J];return I},l.prototype.get=function(g,P){P=P||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var I=ll(this.Qa),J=0;J<I;J+=1)switch(al(this.Qa,J)){case 1:var Z=P.useBigInt?this.Gb(J):this.wb(J);g.push(Z);break;case 2:g.push(this.wb(J));break;case 3:g.push(this.Hb(J));break;case 4:g.push(this.getBlob(J));break;default:g.push(null)}return g},l.prototype.getColumnNames=function(){for(var g=[],P=rl(this.Qa),I=0;I<P;I+=1)g.push(ul(this.Qa,I));return g},l.prototype.getAsObject=function(g,P){g=this.get(g,P),P=this.getColumnNames();for(var I={},J=0;J<P.length;J+=1)I[P[J]]=g[J];return I},l.prototype.getSQL=function(){return On(this.Qa)},l.prototype.getNormalizedSQL=function(){return Yr(this.Qa)},l.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},l.prototype.sb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1),g=fn(g);var I=Ot(g,Rt);this.lb.push(I),this.db.handleError(Kr(this.Qa,P,I,g.length-1,0))},l.prototype.Bb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1);var I=Ot(g,Rt);this.lb.push(I),this.db.handleError(In(this.Qa,P,I,g.length,0))},l.prototype.rb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1),this.db.handleError((g===(g|0)?$r:Zr)(this.Qa,P,g))},l.prototype.Eb=function(g){g==null&&(g=this.Oa,this.Oa+=1),In(this.Qa,g,0,0,0)},l.prototype.tb=function(g,P){switch(P==null&&(P=this.Oa,this.Oa+=1),typeof g){case"string":this.sb(g,P);return;case"number":this.rb(g,P);return;case"bigint":this.sb(g.toString(),P);return;case"boolean":this.rb(g+0,P);return;case"object":if(g===null){this.Eb(P);return}if(g.length!=null){this.Bb(g,P);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},l.prototype.Db=function(g){var P=this;return Object.keys(g).forEach(function(I){var J=el(P.Qa,I);J!==0&&P.tb(g[I],J)}),!0},l.prototype.Cb=function(g){for(var P=0;P<g.length;P+=1)this.tb(g[P],P+1);return!0},l.prototype.reset=function(){return this.freemem(),cl(this.Qa)===0&&fl(this.Qa)===0},l.prototype.freemem=function(){for(var g;(g=this.lb.pop())!==void 0;)Dt(g)},l.prototype.free=function(){this.freemem();var g=hl(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,g},a.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var g=kt(),P=Ge(4);Ne(_),Ne(P);try{this.db.handleError(Dn(this.db.db,this.kb,-1,_,P)),this.kb=X(P,"i32");var I=X(_,"i32");return I===0?(this.mb(),{done:!0}):(this.Za=new l(I,this.db),this.db.fb[I]=this.Za,{value:this.Za,done:!1})}catch(J){throw this.pb=xe(this.kb),this.mb(),J}finally{Et(g)}},a.prototype.mb=function(){Dt(this.eb),this.eb=null},a.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:xe(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(a.prototype[Symbol.iterator]=function(){return this}),d.prototype.run=function(g,P){if(!this.db)throw"Database closed";if(P){g=this.prepare(g,P);try{g.step()}finally{g.free()}}else this.handleError(re(this.db,g,0,0,_));return this},d.prototype.exec=function(g,P,I){if(!this.db)throw"Database closed";var J=kt(),Z=null;try{var he=$t(g),Ie=Ge(4);for(g=[];X(he,"i8")!==0;){Ne(_),Ne(Ie),this.handleError(Dn(this.db,he,-1,_,Ie));var Re=X(_,"i32");if(he=X(Ie,"i32"),Re!==0){var Me=null;for(Z=new l(Re,this),P!=null&&Z.bind(P);Z.step();)Me===null&&(Me={columns:Z.getColumnNames(),values:[]},g.push(Me)),Me.values.push(Z.get(null,I));Z.free()}}return g}catch(Fe){throw Z&&Z.free(),Fe}finally{Et(J)}},d.prototype.each=function(g,P,I,J,Z){typeof P=="function"&&(J=I,I=P,P=void 0),g=this.prepare(g,P);try{for(;g.step();)I(g.getAsObject(null,Z))}finally{g.free()}if(typeof J=="function")return J()},d.prototype.prepare=function(g,P){if(Ne(_),this.handleError(Ae(this.db,g,-1,_,0)),g=X(_,"i32"),g===0)throw"Nothing to prepare";var I=new l(g,this);return P!=null&&I.bind(P),this.fb[g]=I},d.prototype.iterateStatements=function(g){return new a(g,this)},d.prototype.export=function(){Object.values(this.fb).forEach(function(P){P.free()}),Object.values(this.Sa).forEach(Je),this.Sa={},this.handleError(ie(this.db));var g=Br(this.filename);return this.handleError(U(this.filename,_)),this.db=X(_,"i32"),Qn(this.db),g},d.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(g){g.free()}),Object.values(this.Sa).forEach(Je),this.Sa={},this.Ya&&(Je(this.Ya),this.Ya=void 0),this.handleError(ie(this.db)),qn("/"+this.filename),this.db=null)},d.prototype.handleError=function(g){if(g===0)return null;throw g=nl(this.db),Error(g)},d.prototype.getRowsModified=function(){return _e(this.db)},d.prototype.create_function=function(g,P){Object.prototype.hasOwnProperty.call(this.Sa,g)&&(Je(this.Sa[g]),delete this.Sa[g]);var I=yt(function(J,Z,he){Z=t(Z,he);try{var Ie=P.apply(null,Z)}catch(Re){It(J,Re,-1);return}e(J,Ie)},"viii");return this.Sa[g]=I,this.handleError(jn(this.db,g,P.length,1,0,I,0,0,0)),this},d.prototype.create_aggregate=function(g,P){var I=P.init||function(){return null},J=P.finalize||function(Me){return Me},Z=P.step;if(!Z)throw"An aggregate function must have a step function in "+g;var he={};Object.hasOwnProperty.call(this.Sa,g)&&(Je(this.Sa[g]),delete this.Sa[g]),P=g+"__finalize",Object.hasOwnProperty.call(this.Sa,P)&&(Je(this.Sa[P]),delete this.Sa[P]);var Ie=yt(function(Me,Fe,rn){var et=Un(Me,1);Object.hasOwnProperty.call(he,et)||(he[et]=I()),Fe=t(Fe,rn),Fe=[he[et]].concat(Fe);try{he[et]=Z.apply(null,Fe)}catch(El){delete he[et],It(Me,El,-1)}},"viii"),Re=yt(function(Me){var Fe=Un(Me,1);try{var rn=J(he[Fe])}catch(et){delete he[Fe],It(Me,et,-1);return}e(Me,rn),delete he[Fe]},"vi");return this.Sa[g]=Ie,this.Sa[P]=Re,this.handleError(jn(this.db,g,Z.length-1,1,0,0,Ie,Re,0)),this},d.prototype.updateHook=function(g){this.Ya&&(Wn(this.db,0,0),Je(this.Ya),this.Ya=void 0),g&&(this.Ya=yt(function(P,I,J,Z,he){switch(I){case 18:P="insert";break;case 23:P="update";break;case 9:P="delete";break;default:throw"unknown operationCode in updateHook callback: "+I}if(J=J?be(j,J):"",Z=Z?be(j,Z):"",he>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";g(P,J,Z,Number(he))},"viiiij"),Wn(this.db,this.Ya,0))},u.Database=d};var v={...u},C="./this.program",T=(e,t)=>{throw t},y="",A,z;if(q){var te=Jn;y=__dirname+"/",z=e=>(e=ve(e)?new URL(e):e,te.readFileSync(e)),A=async e=>(e=ve(e)?new URL(e):e,te.readFileSync(e,void 0)),!u.thisProgram&&1<process.argv.length&&(C=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),o.exports=u,T=(e,t)=>{throw process.exitCode=e,t}}else(b||w)&&(w?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),y=y.startsWith("blob:")?"":y.slice(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1),w&&(z=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),A=async e=>{if(ve(e))return new Promise((l,a)=>{var d=new XMLHttpRequest;d.open("GET",e,!0),d.responseType="arraybuffer",d.onload=()=>{d.status==200||d.status==0&&d.response?l(d.response):a(d.status)},d.onerror=a,d.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var $=u.print||console.log.bind(console),K=u.printErr||console.error.bind(console);Object.assign(u,v),v=null,u.thisProgram&&(C=u.thisProgram);var G=u.wasmBinary,R,Y=!1,le,L,j,se,O,N,W,fe,we,ve=e=>e.startsWith("file://");function Pe(){var e=R.buffer;u.HEAP8=L=new Int8Array(e),u.HEAP16=se=new Int16Array(e),u.HEAPU8=j=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAP32=O=new Int32Array(e),u.HEAPU32=N=new Uint32Array(e),u.HEAPF32=W=new Float32Array(e),u.HEAPF64=we=new Float64Array(e),u.HEAP64=fe=new BigInt64Array(e),u.HEAPU64=new BigUint64Array(e)}var ye=0,Se=null;function qe(e){var t;throw(t=u.onAbort)==null||t.call(u,e),e="Aborted("+e+")",K(e),Y=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var De;async function ke(e){if(!G)try{var t=await A(e);return new Uint8Array(t)}catch{}if(e==De&&G)e=new Uint8Array(G);else if(z)e=z(e);else throw"both async and sync fetching of the wasm failed";return e}async function B(e,t){try{var l=await ke(e);return await WebAssembly.instantiate(l,t)}catch(a){K(`failed to asynchronously prepare wasm: ${a}`),qe(a)}}async function ce(e){var t=De;if(!G&&typeof WebAssembly.instantiateStreaming=="function"&&!ve(t)&&!q)try{var l=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(l,e)}catch(a){K(`wasm streaming compile failed: ${a}`),K("falling back to ArrayBuffer instantiation")}return B(t,e)}class V{constructor(t){Ve(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var de=e=>{for(;0<e.length;)e.shift()(u)},ae=[],ue=[],ne=()=>{var e=u.preRun.shift();ue.unshift(e)};function X(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return L[e];case"i8":return L[e];case"i16":return se[e>>1];case"i32":return O[e>>2];case"i64":return fe[e>>3];case"float":return W[e>>2];case"double":return we[e>>3];case"*":return N[e>>2];default:qe(`invalid type for getValue: ${t}`)}}var me=u.noExitRuntime||!0;function Ne(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":L[e]=0;break;case"i8":L[e]=0;break;case"i16":se[e>>1]=0;break;case"i32":O[e>>2]=0;break;case"i64":fe[e>>3]=BigInt(0);break;case"float":W[e>>2]=0;break;case"double":we[e>>3]=0;break;case"*":N[e>>2]=0;break;default:qe(`invalid type for setValue: ${t}`)}}var Vt=typeof TextDecoder<"u"?new TextDecoder:void 0,be=(e,t=0,l=NaN)=>{var a=t+l;for(l=t;e[l]&&!(l>=a);)++l;if(16<l-t&&e.buffer&&Vt)return Vt.decode(e.subarray(t,l));for(a="";t<l;){var d=e[t++];if(d&128){var _=e[t++]&63;if((d&224)==192)a+=String.fromCharCode((d&31)<<6|_);else{var S=e[t++]&63;d=(d&240)==224?(d&15)<<12|_<<6|S:(d&7)<<18|_<<12|S<<6|e[t++]&63,65536>d?a+=String.fromCharCode(d):(d-=65536,a+=String.fromCharCode(55296|d>>10,56320|d&1023))}}else a+=String.fromCharCode(d)}return a},xe=(e,t)=>e?be(j,e,t):"",Ct=(e,t)=>{for(var l=0,a=e.length-1;0<=a;a--){var d=e[a];d==="."?e.splice(a,1):d===".."?(e.splice(a,1),l++):l&&(e.splice(a,1),l--)}if(t)for(;l;l--)e.unshift("..");return e},bt=e=>{var t=e.charAt(0)==="/",l=e.slice(-1)==="/";return(e=Ct(e.split("/").filter(a=>!!a),!t).join("/"))||t||(e="."),e&&l&&(e+="/"),(t?"/":"")+e},gt=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},st=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],zr=()=>{if(q){var e=Jn;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},un=e=>{(un=zr())(e)},Rr=(...e)=>{for(var t="",l=!1,a=e.length-1;-1<=a&&!l;a--){if(l=0<=a?e[a]:"/",typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";t=l+"/"+t,l=l.charAt(0)==="/"}return t=Ct(t.split("/").filter(d=>!!d),!l).join("/"),(l?"/":"")+t||"."},Ut=[],_t=e=>{for(var t=0,l=0;l<e.length;++l){var a=e.charCodeAt(l);127>=a?t++:2047>=a?t+=2:55296<=a&&57343>=a?(t+=4,++l):t+=3}return t},We=(e,t,l,a)=>{if(!(0<a))return 0;var d=l;a=l+a-1;for(var _=0;_<e.length;++_){var S=e.charCodeAt(_);if(55296<=S&&57343>=S){var U=e.charCodeAt(++_);S=65536+((S&1023)<<10)|U&1023}if(127>=S){if(l>=a)break;t[l++]=S}else{if(2047>=S){if(l+1>=a)break;t[l++]=192|S>>6}else{if(65535>=S){if(l+2>=a)break;t[l++]=224|S>>12}else{if(l+3>=a)break;t[l++]=240|S>>18,t[l++]=128|S>>12&63}t[l++]=128|S>>6&63}t[l++]=128|S&63}}return t[l]=0,l-d},fn=(e,t)=>{var l=Array(_t(e)+1);return e=We(e,l,0,l.length),t&&(l.length=e),l},cn=[];function hn(e,t){cn[e]={input:[],output:[],cb:t},Xt(e,Or)}var Or={open(e){var t=cn[e.node.rdev];if(!t)throw new M(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,l,a){if(!e.tty||!e.tty.cb.xb)throw new M(60);for(var d=0,_=0;_<a;_++){try{var S=e.tty.cb.xb(e.tty)}catch{throw new M(29)}if(S===void 0&&d===0)throw new M(6);if(S==null)break;d++,t[l+_]=S}return d&&(e.node.atime=Date.now()),d},write(e,t,l,a){if(!e.tty||!e.tty.cb.qb)throw new M(60);try{for(var d=0;d<a;d++)e.tty.cb.qb(e.tty,t[l+d])}catch{throw new M(29)}return a&&(e.node.mtime=e.node.ctime=Date.now()),d}},Dr={xb(){e:{if(!Ut.length){var e=null;if(q){var t=Buffer.alloc(256),l=0,a=process.stdin.fd;try{l=te.readSync(a,t,0,256)}catch(d){if(d.toString().includes("EOF"))l=0;else throw d}0<l&&(e=t.slice(0,l).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}Ut=fn(e,!0)}e=Ut.shift()}return e},qb(e,t){t===null||t===10?($(be(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&($(be(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Ir={qb(e,t){t===null||t===10?(K(be(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(K(be(e.output)),e.output=[])}},ee={Wa:null,Xa(){return ee.createNode(null,"/",16895,0)},createNode(e,t,l,a){if((l&61440)===24576||(l&61440)===4096)throw new M(63);return ee.Wa||(ee.Wa={dir:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua,lookup:ee.La.lookup,hb:ee.La.hb,rename:ee.La.rename,unlink:ee.La.unlink,rmdir:ee.La.rmdir,readdir:ee.La.readdir,symlink:ee.La.symlink},stream:{Va:ee.Ma.Va}},file:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua},stream:{Va:ee.Ma.Va,read:ee.Ma.read,write:ee.Ma.write,ib:ee.Ma.ib,jb:ee.Ma.jb}},link:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua,readlink:ee.La.readlink},stream:{}},ub:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua},stream:Qr}}),l=_n(e,t,l,a),Te(l.mode)?(l.La=ee.Wa.dir.node,l.Ma=ee.Wa.dir.stream,l.Na={}):(l.mode&61440)===32768?(l.La=ee.Wa.file.node,l.Ma=ee.Wa.file.stream,l.Ra=0,l.Na=null):(l.mode&61440)===40960?(l.La=ee.Wa.link.node,l.Ma=ee.Wa.link.stream):(l.mode&61440)===8192&&(l.La=ee.Wa.ub.node,l.Ma=ee.Wa.ub.stream),l.atime=l.mtime=l.ctime=Date.now(),e&&(e.Na[t]=l,e.atime=e.mtime=e.ctime=l.atime),l},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Te(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var l of["mode","atime","mtime","ctime"])t[l]!=null&&(e[l]=t[l]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(l=e.Na,e.Na=new Uint8Array(t),l&&e.Na.set(l.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw ee.vb},hb(e,t,l,a){return ee.createNode(e,t,l,a)},rename(e,t,l){try{var a=Ke(t,l)}catch{}if(a){if(Te(e.mode))for(var d in a.Na)throw new M(55);xt(a)}delete e.parent.Na[e.name],t.Na[l]=e,e.name=l,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var l=Ke(e,t),a;for(a in l.Na)throw new M(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,l){return e=ee.createNode(e,t,41471,0),e.link=l,e},readlink(e){if((e.mode&61440)!==40960)throw new M(28);return e.link}},Ma:{read(e,t,l,a,d){var _=e.node.Na;if(d>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-d,a),8<e&&_.subarray)t.set(_.subarray(d,d+e),l);else for(a=0;a<e;a++)t[l+a]=_[d+a];return e},write(e,t,l,a,d,_){if(t.buffer===L.buffer&&(_=!1),!a)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(_)return e.Na=t.subarray(l,l+a),e.Ra=a;if(e.Ra===0&&d===0)return e.Na=t.slice(l,l+a),e.Ra=a;if(d+a<=e.Ra)return e.Na.set(t.subarray(l,l+a),d),a}_=d+a;var S=e.Na?e.Na.length:0;if(S>=_||(_=Math.max(_,S*(1048576>S?2:1.125)>>>0),S!=0&&(_=Math.max(_,256)),S=e.Na,e.Na=new Uint8Array(_),0<e.Ra&&e.Na.set(S.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(l,l+a),d);else for(_=0;_<a;_++)e.Na[d+_]=t[l+_];return e.Ra=Math.max(e.Ra,d+a),a},Va(e,t,l){if(l===1?t+=e.position:l===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new M(28);return t},ib(e,t,l,a,d){if((e.node.mode&61440)!==32768)throw new M(43);if(e=e.node.Na,d&2||!e||e.buffer!==L.buffer){d=!0,a=65536*Math.ceil(t/65536);var _=zn(65536,a);if(_&&j.fill(0,_,_+a),a=_,!a)throw new M(48);e&&((0<l||l+t<e.length)&&(e.subarray?e=e.subarray(l,l+t):e=Array.prototype.slice.call(e,l,l+t)),L.set(e,a))}else d=!1,a=e.byteOffset;return{Kb:a,Ab:d}},jb(e,t,l,a){return ee.Ma.write(e,t,0,a,l,!1),0}}},dn=(e,t)=>{var l=0;return e&&(l|=365),t&&(l|=146),l},Qt=null,mn={},at=[],Fr=1,He=null,pn=!1,bn=!0,gn={},M=class{constructor(e){Ve(this,"name","ErrnoError");this.Pa=e}},jr=class{constructor(){Ve(this,"gb",{});Ve(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},Vr=class{constructor(e,t,l,a){Ve(this,"La",{});Ve(this,"Ma",{});Ve(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=Fr++,this.name=t,this.mode=l,this.rdev=a,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function ze(e,t={}){if(!e)throw new M(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var l=0;e:for(;40>l;l++){e=e.split("/").filter(U=>!!U);for(var a=Qt,d="/",_=0;_<e.length;_++){var S=_===e.length-1;if(S&&t.parent)break;if(e[_]!==".")if(e[_]==="..")d=gt(d),a=a.parent;else{d=bt(d+"/"+e[_]);try{a=Ke(a,e[_])}catch(U){if((U==null?void 0:U.Pa)===44&&S&&t.Jb)return{path:d};throw U}if(!a.ab||S&&!t.nb||(a=a.ab.root),(a.mode&61440)===40960&&(!S||t.$a)){if(!a.La.readlink)throw new M(52);a=a.La.readlink(a),a.charAt(0)==="/"||(a=gt(d)+"/"+a),e=a+"/"+e.slice(_+1).join("/");continue e}}}return{path:d,node:a}}throw new M(32)}function Wt(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Bt(e,t){for(var l=0,a=0;a<t.length;a++)l=(l<<5)-l+t.charCodeAt(a)|0;return(e+l>>>0)%He.length}function xt(e){var t=Bt(e.parent.id,e.name);if(He[t]===e)He[t]=e.bb;else for(t=He[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function Ke(e,t){var l=Te(e.mode)?(l=ut(e,"x"))?l:e.La.lookup?0:2:54;if(l)throw new M(l);for(l=He[Bt(e.id,t)];l;l=l.bb){var a=l.name;if(l.parent.id===e.id&&a===t)return l}return e.La.lookup(e,t)}function _n(e,t,l,a){return e=new Vr(e,t,l,a),t=Bt(e.parent.id,e.name),e.bb=He[t],He[t]=e}function Te(e){return(e&61440)===16384}function wn(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function ut(e,t){if(bn)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function vn(e,t){if(!Te(e.mode))return 54;try{return Ke(e,t),20}catch{}return ut(e,"wx")}function yn(e,t,l){try{var a=Ke(e,t)}catch(d){return d.Pa}if(e=ut(e,"wx"))return e;if(l){if(!Te(a.mode))return 54;if(a===a.parent||Wt(a)==="/")return 10}else if(Te(a.mode))return 31;return 0}function Pt(e){if(!e)throw new M(63);return e}function Ce(e){if(e=at[e],!e)throw new M(8);return e}function En(e,t=-1){if(e=Object.assign(new jr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!at[t])break e;throw new M(33)}return e.fd=t,at[t]=e}function Ur(e,t=-1){var l,a;return e=En(e,t),(a=(l=e.Ma)==null?void 0:l.Rb)==null||a.call(l,e),e}function Ht(e,t,l){var a=e==null?void 0:e.Ma.Ua;e=a?e:t,a??(a=t.La.Ua),Pt(a),a(e,l)}var Qr={open(e){var t,l;e.Ma=mn[e.node.rdev].Ma,(l=(t=e.Ma).open)==null||l.call(t,e)},Va(){throw new M(70)}};function Xt(e,t){mn[e]={Ma:t}}function kn(e,t){var l=t==="/";if(l&&Qt)throw new M(10);if(!l&&t){var a=ze(t,{nb:!1});if(t=a.path,a=a.node,a.ab)throw new M(10);if(!Te(a.mode))throw new M(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,l?Qt=e:a&&(a.ab=t,a.Xa&&a.Xa.Ib.push(t))}function Tt(e,t,l){var a=ze(e,{parent:!0}).node;if(e=st(e),!e)throw new M(28);if(e==="."||e==="..")throw new M(20);var d=vn(a,e);if(d)throw new M(d);if(!a.La.hb)throw new M(63);return a.La.hb(a,e,t,l)}function Wr(e,t=438){return Tt(e,t&4095|32768,0)}function je(e,t=511){return Tt(e,t&1023|16384,0)}function At(e,t,l){typeof l>"u"&&(l=t,t=438),Tt(e,t|8192,l)}function Jt(e,t){if(!Rr(e))throw new M(44);var l=ze(t,{parent:!0}).node;if(!l)throw new M(44);t=st(t);var a=vn(l,t);if(a)throw new M(a);if(!l.La.symlink)throw new M(63);l.La.symlink(l,t,e)}function Sn(e){var t=ze(e,{parent:!0}).node;e=st(e);var l=Ke(t,e),a=yn(t,e,!0);if(a)throw new M(a);if(!t.La.rmdir)throw new M(63);if(l.ab)throw new M(10);t.La.rmdir(t,e),xt(l)}function qn(e){var t=ze(e,{parent:!0}).node;if(!t)throw new M(44);e=st(e);var l=Ke(t,e),a=yn(t,e,!1);if(a)throw new M(a);if(!t.La.unlink)throw new M(63);if(l.ab)throw new M(10);t.La.unlink(t,e),xt(l)}function wt(e,t){return e=ze(e,{$a:!t}).node,Pt(e.La.Ta)(e)}function Cn(e,t,l,a){Ht(e,t,{mode:l&4095|t.mode&-4096,ctime:Date.now(),Fb:a})}function Lt(e,t){e=typeof e=="string"?ze(e,{$a:!0}).node:e,Cn(null,e,t)}function Pn(e,t,l){if(Te(t.mode))throw new M(31);if((t.mode&61440)!==32768)throw new M(28);var a=ut(t,"w");if(a)throw new M(a);Ht(e,t,{size:l,timestamp:Date.now()})}function ft(e,t,l=438){if(e==="")throw new M(44);if(typeof t=="string"){var a={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof a>"u")throw Error(`Unknown file open mode: ${t}`);t=a}if(l=t&64?l&4095|32768:0,typeof e=="object")a=e;else{var d=e.endsWith("/");e=ze(e,{$a:!(t&131072),Jb:!0}),a=e.node,e=e.path}var _=!1;if(t&64)if(a){if(t&128)throw new M(20)}else{if(d)throw new M(31);a=Tt(e,l|511,0),_=!0}if(!a)throw new M(44);if((a.mode&61440)===8192&&(t&=-513),t&65536&&!Te(a.mode))throw new M(54);if(!_&&(d=a?(a.mode&61440)===40960?32:Te(a.mode)&&(wn(t)!=="r"||t&576)?31:ut(a,wn(t)):44))throw new M(d);return t&512&&!_&&(d=a,d=typeof d=="string"?ze(d,{$a:!0}).node:d,Pn(null,d,0)),t&=-131713,d=En({node:a,path:Wt(a),flags:t,seekable:!0,position:0,Ma:a.Ma,Lb:[],error:!1}),d.Ma.open&&d.Ma.open(d),_&&Lt(a,l&511),!u.logReadFiles||t&1||e in gn||(gn[e]=1),d}function Gt(e){if(e.fd===null)throw new M(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{at[e.fd]=null}e.fd=null}function Tn(e,t,l){if(e.fd===null)throw new M(8);if(!e.seekable||!e.Ma.Va)throw new M(70);if(l!=0&&l!=1&&l!=2)throw new M(28);e.position=e.Ma.Va(e,t,l),e.Lb=[]}function An(e,t,l,a,d){if(0>a||0>d)throw new M(28);if(e.fd===null)throw new M(8);if((e.flags&2097155)===1)throw new M(8);if(Te(e.node.mode))throw new M(31);if(!e.Ma.read)throw new M(28);var _=typeof d<"u";if(!_)d=e.position;else if(!e.seekable)throw new M(70);return t=e.Ma.read(e,t,l,a,d),_||(e.position+=t),t}function Ln(e,t,l,a,d){if(0>a||0>d)throw new M(28);if(e.fd===null)throw new M(8);if(!(e.flags&2097155))throw new M(8);if(Te(e.node.mode))throw new M(31);if(!e.Ma.write)throw new M(28);e.seekable&&e.flags&1024&&Tn(e,0,2);var _=typeof d<"u";if(!_)d=e.position;else if(!e.seekable)throw new M(70);return t=e.Ma.write(e,t,l,a,d,void 0),_||(e.position+=t),t}function Br(e){var t,l=ft(e,l||0);e=wt(e).size;var a=new Uint8Array(e);return An(l,a,0,e,0),t=a,Gt(l),t}function Xe(e,t,l){e=bt("/dev/"+e);var a=dn(!!t,!!l);Xe.yb??(Xe.yb=64);var d=Xe.yb++<<8|0;Xt(d,{open(_){_.seekable=!1},close(){var _;(_=l==null?void 0:l.buffer)!=null&&_.length&&l(10)},read(_,S,U,ie){for(var re=0,_e=0;_e<ie;_e++){try{var Ae=t()}catch{throw new M(29)}if(Ae===void 0&&re===0)throw new M(6);if(Ae==null)break;re++,S[U+_e]=Ae}return re&&(_.node.atime=Date.now()),re},write(_,S,U,ie){for(var re=0;re<ie;re++)try{l(S[U+re])}catch{throw new M(29)}return ie&&(_.node.mtime=_.node.ctime=Date.now()),re}}),At(e,a,d)}var ge={};function Ze(e,t,l){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":Ce(e).path,t.length==0){if(!l)throw new M(44);return e}return e+"/"+t}function Mt(e,t){O[e>>2]=t.dev,O[e+4>>2]=t.mode,N[e+8>>2]=t.nlink,O[e+12>>2]=t.uid,O[e+16>>2]=t.gid,O[e+20>>2]=t.rdev,fe[e+24>>3]=BigInt(t.size),O[e+32>>2]=4096,O[e+36>>2]=t.blocks;var l=t.atime.getTime(),a=t.mtime.getTime(),d=t.ctime.getTime();return fe[e+40>>3]=BigInt(Math.floor(l/1e3)),N[e+48>>2]=l%1e3*1e6,fe[e+56>>3]=BigInt(Math.floor(a/1e3)),N[e+64>>2]=a%1e3*1e6,fe[e+72>>3]=BigInt(Math.floor(d/1e3)),N[e+80>>2]=d%1e3*1e6,fe[e+88>>3]=BigInt(t.ino),0}var Nt=void 0,zt=()=>{var e=O[+Nt>>2];return Nt+=4,e},Yt=0,xr=[0,31,60,91,121,152,182,213,244,274,305,335],Hr=[0,31,59,90,120,151,181,212,243,273,304,334],vt={},Mn=e=>{var t;le=e,me||0<Yt||((t=u.onExit)==null||t.call(u,e),Y=!0),T(e,new V(e))},Xr=e=>{if(!Y)try{if(e(),!(me||0<Yt))try{le=e=le,Mn(e)}catch(t){t instanceof V||t=="unwind"||T(1,t)}}catch(t){t instanceof V||t=="unwind"||T(1,t)}},Kt={},Nn=()=>{if(!Zt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:C||"./this.program"},t;for(t in Kt)Kt[t]===void 0?delete e[t]:e[t]=Kt[t];var l=[];for(t in e)l.push(`${t}=${e[t]}`);Zt=l}return Zt},Zt,$t=e=>{var t=_t(e)+1,l=Ge(t);return We(e,j,l,t),l},Jr=(e,t,l,a)=>{var d={string:re=>{var _e=0;return re!=null&&re!==0&&(_e=$t(re)),_e},array:re=>{var _e=Ge(re.length);return L.set(re,_e),_e}};e=u["_"+e];var _=[],S=0;if(a)for(var U=0;U<a.length;U++){var ie=d[l[U]];ie?(S===0&&(S=kt()),_[U]=ie(a[U])):_[U]=a[U]}return l=e(..._),l=function(re){return S!==0&&Et(S),t==="string"?re?be(j,re):"":t==="boolean"?!!re:re}(l)},Rt=0,Ot=(e,t)=>(t=t==1?Ge(e.length):tn(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),j.set(e,t),t),$e,en=[],Be,Je=e=>{$e.delete(Be.get(e)),Be.set(e,null),en.push(e)},yt=(e,t)=>{if(!$e){$e=new WeakMap;var l=Be.length;if($e)for(var a=0;a<0+l;a++){var d=Be.get(a);d&&$e.set(d,a)}}if(l=$e.get(e)||0)return l;if(en.length)l=en.pop();else{try{Be.grow(1)}catch(ie){throw ie instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ie}l=Be.length-1}try{Be.set(l,e)}catch(ie){if(!(ie instanceof TypeError))throw ie;if(typeof WebAssembly.Function=="function"){var _=WebAssembly.Function;a={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},d={parameters:[],results:t[0]=="v"?[]:[a[t[0]]]};for(var S=1;S<t.length;++S)d.parameters.push(a[t[S]]);t=new _(d,e)}else{a=[1],d=t.slice(0,1),t=t.slice(1),S={i:127,p:127,j:126,f:125,d:124,e:111},a.push(96);var U=t.length;128>U?a.push(U):a.push(U%128|128,U>>7);for(_ of t)a.push(S[_]);d=="v"?a.push(0):a.push(1,S[d]),t=[0,97,115,109,1,0,0,0,1],_=a.length,128>_?t.push(_):t.push(_%128|128,_>>7),t.push(...a),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}Be.set(l,t)}return $e.set(e,l),l};He=Array(4096),kn(ee,"/"),je("/tmp"),je("/home"),je("/home/web_user"),function(){je("/dev"),Xt(259,{read:()=>0,write:(a,d,_,S)=>S,Va:()=>0}),At("/dev/null",259),hn(1280,Dr),hn(1536,Ir),At("/dev/tty",1280),At("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,l=()=>(t===0&&(un(e),t=e.byteLength),e[--t]);Xe("random",l),Xe("urandom",l),je("/dev/shm"),je("/dev/shm/tmp")}(),function(){je("/proc");var e=je("/proc/self");je("/proc/self/fd"),kn({Xa(){var t=_n(e,"fd",16895,73);return t.Ma={Va:ee.Ma.Va},t.La={lookup(l,a){l=+a;var d=Ce(l);return l={parent:null,Xa:{zb:"fake"},La:{readlink:()=>d.path},id:l+1},l.parent=l},readdir(){return Array.from(at.entries()).filter(([,l])=>l).map(([l])=>l.toString())}},t}},"/proc/self/fd")}(),ee.vb=new M(44),ee.vb.stack="<generic error, no stack>";var Gr={a:(e,t,l,a)=>qe(`Assertion failed: ${e?be(j,e):""}, at: `+[t?t?be(j,t):"":"unknown filename",l,a?a?be(j,a):"":"unknown function"]),i:function(e,t){try{return e=e?be(j,e):"",Lt(e,t),0}catch(l){if(typeof ge>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},L:function(e,t,l){try{if(t=t?be(j,t):"",t=Ze(e,t),l&-8)return-28;var a=ze(t,{$a:!0}).node;return a?(e="",l&4&&(e+="r"),l&2&&(e+="w"),l&1&&(e+="x"),e&&ut(a,e)?-2:0):-44}catch(d){if(typeof ge>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},j:function(e,t){try{var l=Ce(e);return Cn(l,l.node,t,!1),0}catch(a){if(typeof ge>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},h:function(e){try{var t=Ce(e);return Ht(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(l){if(typeof ge>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},b:function(e,t,l){Nt=l;try{var a=Ce(e);switch(t){case 0:var d=zt();if(0>d)break;for(;at[d];)d++;return Ur(a,d).fd;case 1:case 2:return 0;case 3:return a.flags;case 4:return d=zt(),a.flags|=d,0;case 12:return d=zt(),se[d+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(_){if(typeof ge>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},g:function(e,t){try{var l=Ce(e),a=l.node,d=l.Ma.Ta;e=d?l:a,d??(d=a.La.Ta),Pt(d);var _=d(e);return Mt(t,_)}catch(S){if(typeof ge>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var l=Ce(e);if(0>t||!(l.flags&2097155))throw new M(28);return Pn(l,l.node,t),0}catch(a){if(typeof ge>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},G:function(e,t){try{if(t===0)return-28;var l=_t("/")+1;return t<l?-68:(We("/",j,e,t),l)}catch(a){if(typeof ge>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},K:function(e,t){try{return e=e?be(j,e):"",Mt(t,wt(e,!0))}catch(l){if(typeof ge>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},C:function(e,t,l){try{return t=t?be(j,t):"",t=Ze(e,t),je(t,l),0}catch(a){if(typeof ge>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},J:function(e,t,l,a){try{t=t?be(j,t):"";var d=a&256;return t=Ze(e,t,a&4096),Mt(l,d?wt(t,!0):wt(t))}catch(_){if(typeof ge>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},x:function(e,t,l,a){Nt=a;try{t=t?be(j,t):"",t=Ze(e,t);var d=a?zt():0;return ft(t,l,d).fd}catch(_){if(typeof ge>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},v:function(e,t,l,a){try{if(t=t?be(j,t):"",t=Ze(e,t),0>=a)return-28;var d=ze(t).node;if(!d)throw new M(44);if(!d.La.readlink)throw new M(28);var _=d.La.readlink(d),S=Math.min(a,_t(_)),U=L[l+S];return We(_,j,l,a+1),L[l+S]=U,S}catch(ie){if(typeof ge>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Pa}},u:function(e){try{return e=e?be(j,e):"",Sn(e),0}catch(t){if(typeof ge>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?be(j,e):"",Mt(t,wt(e))}catch(l){if(typeof ge>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},r:function(e,t,l){try{return t=t?be(j,t):"",t=Ze(e,t),l===0?qn(t):l===512?Sn(t):qe("Invalid flags passed to unlinkat"),0}catch(a){if(typeof ge>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},q:function(e,t,l){try{t=t?be(j,t):"",t=Ze(e,t,!0);var a=Date.now(),d,_;if(l){var S=N[l>>2]+4294967296*O[l+4>>2],U=O[l+8>>2];U==1073741823?d=a:U==1073741822?d=null:d=1e3*S+U/1e6,l+=16,S=N[l>>2]+4294967296*O[l+4>>2],U=O[l+8>>2],U==1073741823?_=a:U==1073741822?_=null:_=1e3*S+U/1e6}else _=d=a;if((_??d)!==null){e=d;var ie=ze(t,{$a:!0}).node;Pt(ie.La.Ua)(ie,{atime:e,mtime:_})}return 0}catch(re){if(typeof ge>"u"||re.name!=="ErrnoError")throw re;return-re.Pa}},m:()=>qe(""),l:()=>{me=!1,Yt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),O[t>>2]=e.getSeconds(),O[t+4>>2]=e.getMinutes(),O[t+8>>2]=e.getHours(),O[t+12>>2]=e.getDate(),O[t+16>>2]=e.getMonth(),O[t+20>>2]=e.getFullYear()-1900,O[t+24>>2]=e.getDay();var l=e.getFullYear();O[t+28>>2]=(l%4!==0||l%100===0&&l%400!==0?Hr:xr)[e.getMonth()]+e.getDate()-1|0,O[t+36>>2]=-(60*e.getTimezoneOffset()),l=new Date(e.getFullYear(),6,1).getTimezoneOffset();var a=new Date(e.getFullYear(),0,1).getTimezoneOffset();O[t+32>>2]=(l!=a&&e.getTimezoneOffset()==Math.min(a,l))|0},y:function(e,t,l,a,d,_,S){d=-9007199254740992>d||9007199254740992<d?NaN:Number(d);try{if(isNaN(d))return 61;var U=Ce(a);if(t&2&&!(l&2)&&(U.flags&2097155)!==2)throw new M(2);if((U.flags&2097155)===1)throw new M(2);if(!U.Ma.ib)throw new M(43);if(!e)throw new M(28);var ie=U.Ma.ib(U,e,d,t,l),re=ie.Kb;return O[_>>2]=ie.Ab,N[S>>2]=re,0}catch(_e){if(typeof ge>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Pa}},z:function(e,t,l,a,d,_){_=-9007199254740992>_||9007199254740992<_?NaN:Number(_);try{var S=Ce(d);if(l&2){if(l=_,(S.node.mode&61440)!==32768)throw new M(43);if(!(a&2)){var U=j.slice(e,e+t);S.Ma.jb&&S.Ma.jb(S,U,l,t,a)}}}catch(ie){if(typeof ge>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Pa}},n:(e,t)=>{if(vt[e]&&(clearTimeout(vt[e].id),delete vt[e]),!t)return 0;var l=setTimeout(()=>{delete vt[e],Xr(()=>Rn(e,performance.now()))},t);return vt[e]={id:l,Xb:t},0},B:(e,t,l,a)=>{var d=new Date().getFullYear(),_=new Date(d,0,1).getTimezoneOffset();d=new Date(d,6,1).getTimezoneOffset(),N[e>>2]=60*Math.max(_,d),O[t>>2]=+(_!=d),t=S=>{var U=Math.abs(S);return`UTC${0<=S?"-":"+"}${String(Math.floor(U/60)).padStart(2,"0")}${String(U%60).padStart(2,"0")}`},e=t(_),t=t(d),d<_?(We(e,j,l,17),We(t,j,a,17)):(We(e,j,a,17),We(t,j,l,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=j.length;if(e>>>=0,2147483648<e)return!1;for(var l=1;4>=l;l*=2){var a=t*(1+.2/l);a=Math.min(a,e+100663296);e:{a=(Math.min(2147483648,65536*Math.ceil(Math.max(e,a)/65536))-R.buffer.byteLength+65535)/65536|0;try{R.grow(a),Pe();var d=1;break e}catch{}d=void 0}if(d)return!0}return!1},E:(e,t)=>{var l=0;return Nn().forEach((a,d)=>{var _=t+l;for(d=N[e+4*d>>2]=_,_=0;_<a.length;++_)L[d++]=a.charCodeAt(_);L[d]=0,l+=a.length+1}),0},F:(e,t)=>{var l=Nn();N[e>>2]=l.length;var a=0;return l.forEach(d=>a+=d.length+1),N[t>>2]=a,0},e:function(e){try{var t=Ce(e);return Gt(t),0}catch(l){if(typeof ge>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},p:function(e,t){try{var l=Ce(e);return L[t]=l.tty?2:Te(l.mode)?3:(l.mode&61440)===40960?7:4,se[t+2>>1]=0,fe[t+8>>3]=BigInt(0),fe[t+16>>3]=BigInt(0),0}catch(a){if(typeof ge>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},w:function(e,t,l,a){try{e:{var d=Ce(e);e=t;for(var _,S=t=0;S<l;S++){var U=N[e>>2],ie=N[e+4>>2];e+=8;var re=An(d,L,U,ie,_);if(0>re){var _e=-1;break e}if(t+=re,re<ie)break;typeof _<"u"&&(_+=re)}_e=t}return N[a>>2]=_e,0}catch(Ae){if(typeof ge>"u"||Ae.name!=="ErrnoError")throw Ae;return Ae.Pa}},D:function(e,t,l,a){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var d=Ce(e);return Tn(d,t,l),fe[a>>3]=BigInt(d.position),d.ob&&t===0&&l===0&&(d.ob=null),0}catch(_){if(typeof ge>"u"||_.name!=="ErrnoError")throw _;return _.Pa}},I:function(e){var l;try{var t=Ce(e);return(l=t.Ma)!=null&&l.fsync?t.Ma.fsync(t):0}catch(a){if(typeof ge>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},t:function(e,t,l,a){try{e:{var d=Ce(e);e=t;for(var _,S=t=0;S<l;S++){var U=N[e>>2],ie=N[e+4>>2];e+=8;var re=Ln(d,L,U,ie,_);if(0>re){var _e=-1;break e}if(t+=re,re<ie)break;typeof _<"u"&&(_+=re)}_e=t}return N[a>>2]=_e,0}catch(Ae){if(typeof ge>"u"||Ae.name!=="ErrnoError")throw Ae;return Ae.Pa}},k:Mn},Q;(async function(){var l;function e(a){var d;return Q=a.exports,R=Q.M,Pe(),Be=Q.O,ye--,(d=u.monitorRunDependencies)==null||d.call(u,ye),ye==0&&Se&&(a=Se,Se=null,a()),Q}ye++,(l=u.monitorRunDependencies)==null||l.call(u,ye);var t={a:Gr};return u.instantiateWasm?new Promise(a=>{u.instantiateWasm(t,(d,_)=>{e(d),a(d.exports)})}):(De??(De=u.locateFile?u.locateFile("sql-wasm.wasm",y):y+"sql-wasm.wasm"),e((await ce(t)).instance))})(),u._sqlite3_free=e=>(u._sqlite3_free=Q.P)(e),u._sqlite3_value_text=e=>(u._sqlite3_value_text=Q.Q)(e),u._sqlite3_prepare_v2=(e,t,l,a,d)=>(u._sqlite3_prepare_v2=Q.R)(e,t,l,a,d),u._sqlite3_step=e=>(u._sqlite3_step=Q.S)(e),u._sqlite3_reset=e=>(u._sqlite3_reset=Q.T)(e),u._sqlite3_exec=(e,t,l,a,d)=>(u._sqlite3_exec=Q.U)(e,t,l,a,d),u._sqlite3_finalize=e=>(u._sqlite3_finalize=Q.V)(e),u._sqlite3_column_name=(e,t)=>(u._sqlite3_column_name=Q.W)(e,t),u._sqlite3_column_text=(e,t)=>(u._sqlite3_column_text=Q.X)(e,t),u._sqlite3_column_type=(e,t)=>(u._sqlite3_column_type=Q.Y)(e,t),u._sqlite3_errmsg=e=>(u._sqlite3_errmsg=Q.Z)(e),u._sqlite3_clear_bindings=e=>(u._sqlite3_clear_bindings=Q._)(e),u._sqlite3_value_blob=e=>(u._sqlite3_value_blob=Q.$)(e),u._sqlite3_value_bytes=e=>(u._sqlite3_value_bytes=Q.aa)(e),u._sqlite3_value_double=e=>(u._sqlite3_value_double=Q.ba)(e),u._sqlite3_value_int=e=>(u._sqlite3_value_int=Q.ca)(e),u._sqlite3_value_type=e=>(u._sqlite3_value_type=Q.da)(e),u._sqlite3_result_blob=(e,t,l,a)=>(u._sqlite3_result_blob=Q.ea)(e,t,l,a),u._sqlite3_result_double=(e,t)=>(u._sqlite3_result_double=Q.fa)(e,t),u._sqlite3_result_error=(e,t,l)=>(u._sqlite3_result_error=Q.ga)(e,t,l),u._sqlite3_result_int=(e,t)=>(u._sqlite3_result_int=Q.ha)(e,t),u._sqlite3_result_int64=(e,t)=>(u._sqlite3_result_int64=Q.ia)(e,t),u._sqlite3_result_null=e=>(u._sqlite3_result_null=Q.ja)(e),u._sqlite3_result_text=(e,t,l,a)=>(u._sqlite3_result_text=Q.ka)(e,t,l,a),u._sqlite3_aggregate_context=(e,t)=>(u._sqlite3_aggregate_context=Q.la)(e,t),u._sqlite3_column_count=e=>(u._sqlite3_column_count=Q.ma)(e),u._sqlite3_data_count=e=>(u._sqlite3_data_count=Q.na)(e),u._sqlite3_column_blob=(e,t)=>(u._sqlite3_column_blob=Q.oa)(e,t),u._sqlite3_column_bytes=(e,t)=>(u._sqlite3_column_bytes=Q.pa)(e,t),u._sqlite3_column_double=(e,t)=>(u._sqlite3_column_double=Q.qa)(e,t),u._sqlite3_bind_blob=(e,t,l,a,d)=>(u._sqlite3_bind_blob=Q.ra)(e,t,l,a,d),u._sqlite3_bind_double=(e,t,l)=>(u._sqlite3_bind_double=Q.sa)(e,t,l),u._sqlite3_bind_int=(e,t,l)=>(u._sqlite3_bind_int=Q.ta)(e,t,l),u._sqlite3_bind_text=(e,t,l,a,d)=>(u._sqlite3_bind_text=Q.ua)(e,t,l,a,d),u._sqlite3_bind_parameter_index=(e,t)=>(u._sqlite3_bind_parameter_index=Q.va)(e,t),u._sqlite3_sql=e=>(u._sqlite3_sql=Q.wa)(e),u._sqlite3_normalized_sql=e=>(u._sqlite3_normalized_sql=Q.xa)(e),u._sqlite3_changes=e=>(u._sqlite3_changes=Q.ya)(e),u._sqlite3_close_v2=e=>(u._sqlite3_close_v2=Q.za)(e),u._sqlite3_create_function_v2=(e,t,l,a,d,_,S,U,ie)=>(u._sqlite3_create_function_v2=Q.Aa)(e,t,l,a,d,_,S,U,ie),u._sqlite3_update_hook=(e,t,l)=>(u._sqlite3_update_hook=Q.Ba)(e,t,l),u._sqlite3_open=(e,t)=>(u._sqlite3_open=Q.Ca)(e,t);var tn=u._malloc=e=>(tn=u._malloc=Q.Da)(e),Dt=u._free=e=>(Dt=u._free=Q.Ea)(e);u._RegisterExtensionFunctions=e=>(u._RegisterExtensionFunctions=Q.Fa)(e);var zn=(e,t)=>(zn=Q.Ga)(e,t),Rn=(e,t)=>(Rn=Q.Ha)(e,t),Et=e=>(Et=Q.Ia)(e),Ge=e=>(Ge=Q.Ja)(e),kt=()=>(kt=Q.Ka)();u.stackSave=()=>kt(),u.stackRestore=e=>Et(e),u.stackAlloc=e=>Ge(e),u.cwrap=(e,t,l,a)=>{var d=!l||l.every(_=>_==="number"||_==="boolean");return t!=="string"&&d&&!a?u["_"+e]:(..._)=>Jr(e,t,l,_)},u.addFunction=yt,u.removeFunction=Je,u.UTF8ToString=xe,u.ALLOC_NORMAL=Rt,u.allocate=Ot,u.allocateUTF8OnStack=$t;function nn(){function e(){var d;if(u.calledRun=!0,!Y){if(!u.noFSInit&&!pn){var t,l;pn=!0,a??(a=u.stdin),t??(t=u.stdout),l??(l=u.stderr),a?Xe("stdin",a):Jt("/dev/tty","/dev/stdin"),t?Xe("stdout",null,t):Jt("/dev/tty","/dev/stdout"),l?Xe("stderr",null,l):Jt("/dev/tty1","/dev/stderr"),ft("/dev/stdin",0),ft("/dev/stdout",1),ft("/dev/stderr",1)}if(Q.N(),bn=!1,(d=u.onRuntimeInitialized)==null||d.call(u),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var a=u.postRun.shift();ae.unshift(a)}de(ae)}}if(0<ye)Se=nn;else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)ne();de(ue),0<ye?Se=nn:u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),e()},1)):e()}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return nn(),h}),r)};o.exports=i,o.exports.default=i})(Mr);var Ql=Mr.exports;const Wl=Fl(Ql);class Bl{constructor(){this.db=null,this.sqlJs=null}async initialize(){if(!this.sqlJs){const r=window.location.protocol==="http:"?"/node_modules/sql.js/dist/sql-wasm.wasm":"./sql-wasm.wasm";this.sqlJs=await Wl({locateFile:i=>r})}}async loadFromFile(n,r){await this.initialize();try{const i=await r.readDatabase(n);if(i){const s=new Uint8Array(i);this.db=new this.sqlJs.Database(s)}else this.db=new this.sqlJs.Database;return!0}catch(i){return console.error("Error loading database:",i),this.db=new this.sqlJs.Database,!1}}createNew(){if(!this.sqlJs)throw new Error("SQL.js not initialized");this.db=new this.sqlJs.Database}createTable(n,r){if(!this.db)throw new Error("Database not initialized");const i=r.map(c=>{let f;return c.type==="number"?f="REAL":c.type==="boolean"?f="INTEGER":f="TEXT",`"${c.name}" ${f}`}).join(", "),s=`CREATE TABLE "${n}" (${i})`;this.db.run(s)}insertData(n,r,i){if(!this.db)throw new Error("Database not initialized");if(i.length===0)return;const s=r.map(p=>`"${p.name}"`).join(", "),c=r.map(()=>"?").join(", "),f=`INSERT INTO "${n}" (${s}) VALUES (${c})`,h=this.db.prepare(f);for(const p of i){const u=r.map(b=>{const w=p[b.name];return w==null?null:b.type==="boolean"?w?1:0:w});h.run(u)}h.free()}getTableNames(){if(!this.db)return[];const n=this.db.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%'");if(n.length===0)return[];const r=[];for(const i of n[0].values)r.push(i[0]);return r}getTableData(n,r=1e3,i=0){if(!this.db)return{columns:[],rows:[]};const s=this.db.exec(`SELECT * FROM "${n}" LIMIT ${r} OFFSET ${i}`);if(s.length===0)return{columns:[],rows:[]};const c=s[0].columns,f=s[0].values.map(h=>{const p={};return c.forEach((u,b)=>{p[u]=h[b]}),p});return{columns:c,rows:f}}getAllTableData(n){if(!this.db)return{columns:[],rows:[]};const r=this.db.exec(`SELECT * FROM "${n}"`);if(r.length===0)return{columns:[],rows:[]};const i=r[0].columns,s=r[0].values.map(c=>{const f={};return i.forEach((h,p)=>{f[h]=c[p]}),f});return{columns:i,rows:s}}getTableRowCount(n){if(!this.db)return 0;const r=this.db.exec(`SELECT COUNT(*) as count FROM "${n}"`);return r.length===0?0:r[0].values[0][0]}async saveToFile(n,r){if(!this.db)throw new Error("Database not initialized");const i=this.db.export(),s=Array.from(i);await r.writeDatabase(n,s)}deleteTable(n){if(!this.db)throw new Error("Database not initialized");this.db.run(`DROP TABLE IF EXISTS "${n}"`)}executeSQL(n){if(!this.db)throw new Error("Database not initialized");try{if(n.trim().toUpperCase().startsWith("SELECT")){const i=this.db.exec(n);if(i.length===0)return{type:"select",columns:[],rows:[],rowCount:0};const s=i[0].columns,c=i[0].values.map(f=>{const h={};return s.forEach((p,u)=>{h[p]=f[u]}),h});return{type:"select",columns:s,rows:c,rowCount:c.length}}else{this.db.run(n);const i=this.db.exec("SELECT changes() as count");return{type:"modify",affectedRows:i.length>0?i[0].values[0][0]:0}}}catch(r){throw new Error(`SQL execution error: ${r.message}`)}}getTableSchema(n){if(!this.db)return[];try{const r=this.db.exec(`PRAGMA table_info("${n}")`);return r.length===0?[]:r[0].values.map(i=>({name:i[1],type:i[2],notnull:i[3],defaultValue:i[4],pk:i[5]}))}catch(r){return console.error("Error getting table schema:",r),[]}}close(){this.db&&(this.db.close(),this.db=null)}}class xl{constructor(n){this.api=n,this.logPath=null}async initialize(){this.logPath=await this.api.getDefaultLogPath()}getLogPath(){return this.logPath}async loadLog(){try{return await this.api.readLogFile(this.logPath)||""}catch(n){return console.error("Error loading log file:",n),""}}async saveLog(n){try{return await this.api.writeLogFile(this.logPath,n),!0}catch(r){return console.error("Error saving log file:",r),!1}}parseLogEntries(n){if(!n||n.trim()==="")return[];const r=n.split(`
`),i=[];let s=null;for(let c=0;c<r.length;c++){const f=r[c].trim(),h=f.match(/^\[(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})\]/);h?(s&&i.push(s),s={timestamp:h[1],lineNumber:c+1,naturalLanguage:"",sql:"",error:null,result:null}):s&&(f.startsWith("NL:")?s.naturalLanguage=f.substring(3).trim():f.startsWith("SQL:")?s.sql=f.substring(4).trim():f.startsWith("ERROR:")?s.error=f.substring(6).trim():f.startsWith("RESULT:")?s.result=f.substring(7).trim():f&&!f.startsWith("---")&&(s.sql&&!s.error&&!s.result?s.sql+=" "+f:s.error&&!s.result?s.error+=" "+f:s.result?s.result+=" "+f:!s.naturalLanguage&&!s.sql&&(s.naturalLanguage=f)))}return s&&i.push(s),i}formatLogEntry(n){let r=`[${n.timestamp}]
`;return n.naturalLanguage&&(r+=`NL: ${n.naturalLanguage}
`),n.sql&&(r+=`SQL: ${n.sql}
`),n.error&&(r+=`ERROR: ${n.error}
`),n.result&&(r+=`RESULT: ${n.result}
`),r+=`---
`,r}}class Gn{static parseSchemaLine(n){const r=[],i=n.split(","),s=["string","number","boolean"];for(const c of i){const f=c.trim();if(!f)continue;const h=f.indexOf(":");if(h>0){const p=f.substring(0,h).trim(),u=f.substring(h+1).trim().toLowerCase();if(!s.includes(u))throw new Error(`Invalid column type modifier "${u}" for column "${p}". Valid types are: string, number, boolean`);r.push({name:p,type:u})}else r.push({name:f,type:"string"})}return r}static parseCSV(n){const r=n.split(/\r?\n/).filter(c=>c.trim());if(r.length===0)throw new Error("CSV file is empty");const i=this.parseSchemaLine(r[0]),s=[];for(let c=1;c<r.length;c++){const f=this.parseCSVLine(r[c]),h={};i.forEach((p,u)=>{let b=f[u]||"";if(b=b.trim(),p.type==="number")h[p.name]=b===""?null:parseFloat(b),isNaN(h[p.name])&&(h[p.name]=null);else if(p.type==="boolean"){const w=b.toLowerCase();h[p.name]=w==="true"||w==="1"||w==="yes"||w==="y"}else h[p.name]=b}),s.push(h)}return{schema:i,data:s}}static parseCSVLine(n){const r=[];let i="",s=!1;for(let c=0;c<n.length;c++){const f=n[c];f==='"'?s&&n[c+1]==='"'?(i+='"',c++):s=!s:f===","&&!s?(r.push(i),i=""):i+=f}return r.push(i),r}static getTableNameFromPath(n){return n.split(/[/\\]/).pop().replace(/\.csv$/i,"").replace(/[^a-zA-Z0-9_]/g,"_")}}class Nr{static sqliteTypeToCsvType(n,r,i=[]){const s=n.toUpperCase();if(s==="TEXT")return"string";if(s==="REAL")return"number";if(s==="INTEGER"){if(i.length>0&&i.every(u=>u==null||u===0||u===1||u==="0"||u==="1"||u===!0||u===!1))return"boolean";const c=r.toLowerCase();return["active","enabled","is","has","can","should","flag","bool"].some(p=>c.startsWith(p)||c.includes("_"+p)||c.includes(p+"_"))?"boolean":"number"}return"string"}static formatValue(n,r){if(n==null)return"";if(r==="boolean")return n===0||n==="0"?"false":n===1||n==="1"||n?"true":"false";const i=String(n);return i.includes(",")||i.includes('"')||i.includes(`
`)||i.includes("\r")?`"${i.replace(/"/g,'""')}"`:i}static exportTableToCSV(n,r,i){if(!r||r.length===0)throw new Error("Table schema is required");if(!i||!i.rows||i.rows.length===0)return r.map(b=>{const w=this.sqliteTypeToCsvType(b.type,b.name,[]);return`${b.name}:${w}`}).join(", ")+`
`;const s=i.rows.slice(0,10),c={};r.forEach(u=>{c[u.name]=s.map(b=>b[u.name])});let p=r.map(u=>{const b=this.sqliteTypeToCsvType(u.type,u.name,c[u.name]||[]);return`${u.name}:${b}`}).join(", ")+`
`;for(const u of i.rows){const b=r.map(w=>{const q=this.sqliteTypeToCsvType(w.type,w.name,c[w.name]||[]);return this.formatValue(u[w.name],q)});p+=b.join(",")+`
`}return p}}function Yn(o,n,r){const i=o.slice();return i[1]=n[r],i}function Kn(o,n,r){const i=o.slice();return i[4]=n[r],i}function Zn(o,n,r){const i=o.slice();return i[4]=n[r],i}function $n(o){let n,r=o[4]+"",i;return{c(){n=E("th"),i=D(r),k(n,"class","svelte-1l2op9x")},m(s,c){H(s,n,c),m(n,i)},p(s,c){c&1&&r!==(r=s[4]+"")&&oe(i,r)},d(s){s&&x(n)}}}function er(o){let n,r=(o[1][o[4]]??"")+"",i;return{c(){n=E("td"),i=D(r),k(n,"class","svelte-1l2op9x")},m(s,c){H(s,n,c),m(n,i)},p(s,c){c&1&&r!==(r=(s[1][s[4]]??"")+"")&&oe(i,r)},d(s){s&&x(n)}}}function tr(o){let n,r,i=Le(o[0].columns),s=[];for(let c=0;c<i.length;c+=1)s[c]=er(Kn(o,i,c));return{c(){n=E("tr");for(let c=0;c<s.length;c+=1)s[c].c();r=F(),k(n,"class","svelte-1l2op9x")},m(c,f){H(c,n,f);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(n,null);m(n,r)},p(c,f){if(f&1){i=Le(c[0].columns);let h;for(h=0;h<i.length;h+=1){const p=Kn(c,i,h);s[h]?s[h].p(p,f):(s[h]=er(p),s[h].c(),s[h].m(n,r))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}},d(c){c&&x(n),mt(s,c)}}}function Hl(o){let n,r,i,s,c,f,h=Le(o[0].columns),p=[];for(let w=0;w<h.length;w+=1)p[w]=$n(Zn(o,h,w));let u=Le(o[0].rows),b=[];for(let w=0;w<u.length;w+=1)b[w]=tr(Yn(o,u,w));return{c(){n=E("div"),r=E("table"),i=E("thead"),s=E("tr");for(let w=0;w<p.length;w+=1)p[w].c();c=F(),f=E("tbody");for(let w=0;w<b.length;w+=1)b[w].c();k(s,"class","svelte-1l2op9x"),k(i,"class","svelte-1l2op9x"),k(r,"class","data-table svelte-1l2op9x"),k(n,"class","table-container svelte-1l2op9x")},m(w,q){H(w,n,q),m(n,r),m(r,i),m(i,s);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(s,null);m(r,c),m(r,f);for(let v=0;v<b.length;v+=1)b[v]&&b[v].m(f,null)},p(w,[q]){if(q&1){h=Le(w[0].columns);let v;for(v=0;v<h.length;v+=1){const C=Zn(w,h,v);p[v]?p[v].p(C,q):(p[v]=$n(C),p[v].c(),p[v].m(s,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=h.length}if(q&1){u=Le(w[0].rows);let v;for(v=0;v<u.length;v+=1){const C=Yn(w,u,v);b[v]?b[v].p(C,q):(b[v]=tr(C),b[v].c(),b[v].m(f,null))}for(;v<b.length;v+=1)b[v].d(1);b.length=u.length}},i:pe,o:pe,d(w){w&&x(n),mt(p,w),mt(b,w)}}}function Xl(o,n,r){let{tableData:i={columns:[],rows:[]}}=n;return o.$$set=s=>{"tableData"in s&&r(0,i=s.tableData)},[i]}class Jl extends ot{constructor(n){super(),it(this,n,Xl,Hl,nt,{tableData:0})}}function nr(o,n,r){const i=o.slice();return i[20]=n[r],i}function Gl(o){let n,r=Le(o[0]),i=[];for(let s=0;s<r.length;s+=1)i[s]=rr(nr(o,r,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();n=qr()},m(s,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(s,c);H(s,n,c)},p(s,c){if(c&1){r=Le(s[0]);let f;for(f=0;f<r.length;f+=1){const h=nr(s,r,f);i[f]?i[f].p(h,c):(i[f]=rr(h),i[f].c(),i[f].m(n.parentNode,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(s){s&&x(n),mt(i,s)}}}function Yl(o){let n;return{c(){n=E("option"),n.textContent="No tables available",n.__value="",on(n,n.__value)},m(r,i){H(r,n,i)},p:pe,d(r){r&&x(n)}}}function rr(o){let n,r=o[20]+"",i,s;return{c(){n=E("option"),i=D(r),n.__value=s=o[20],on(n,n.__value)},m(c,f){H(c,n,f),m(n,i)},p(c,f){f&1&&r!==(r=c[20]+"")&&oe(i,r),f&1&&s!==(s=c[20])&&(n.__value=s,on(n,n.__value))},d(c){c&&x(n)}}}function lr(o){let n,r=o[9]?"Exporting...":"Export CSV",i,s,c,f;return{c(){n=E("button"),i=D(r),k(n,"class","export-button svelte-tz36jk"),k(n,"title","Export table to CSV"),n.disabled=s=o[9]||o[8]||!o[3]},m(h,p){H(h,n,p),m(n,i),c||(f=Ee(n,"click",o[16]),c=!0)},p(h,p){p&512&&r!==(r=h[9]?"Exporting...":"Export CSV")&&oe(i,r),p&776&&s!==(s=h[9]||h[8]||!h[3])&&(n.disabled=s)},d(h){h&&x(n),c=!1,f()}}}function Kl(o){let n;return{c(){n=E("div"),n.textContent="Select a table to view",k(n,"class","empty-message svelte-tz36jk")},m(r,i){H(r,n,i)},p:pe,i:pe,o:pe,d(r){r&&x(n)}}}function Zl(o){let n;return{c(){n=E("div"),n.textContent="Table is empty",k(n,"class","empty-message svelte-tz36jk")},m(r,i){H(r,n,i)},p:pe,i:pe,o:pe,d(r){r&&x(n)}}}function $l(o){let n,r,i,s,c,f,h,p,u,b,w,q,v,C,T,y=o[5]+1+"",A,z,te,$=o[6]+1+"",K,G,R,Y,le,L,j,se,O,N,W,fe=o[5]*Ye+1+"",we,ve,Pe=Math.min((o[5]+1)*Ye,o[4])+"",ye,Se,qe,De,ke,B,ce,V,de,ae,ue=o[2][o[1]]&&ir(o);return R=new Jl({props:{tableData:o[7]}}),{c(){n=E("div"),r=E("span"),i=D("Table: "),s=E("strong"),c=D(o[1]),f=F(),ue&&ue.c(),h=F(),p=E("span"),u=D("Rows: "),b=E("strong"),w=D(o[4]),q=F(),v=E("span"),C=D("Page: "),T=E("strong"),A=D(y),z=D(" of "),te=E("strong"),K=D($),G=F(),pt(R.$$.fragment),Y=F(),le=E("div"),L=E("button"),j=D(" Previous"),O=F(),N=E("span"),W=D("Showing "),we=D(fe),ve=D(" - "),ye=D(Pe),Se=D(" of "),qe=D(o[4]),De=F(),ke=E("button"),B=D("Next "),k(s,"class","svelte-tz36jk"),k(b,"class","svelte-tz36jk"),k(T,"class","svelte-tz36jk"),k(te,"class","svelte-tz36jk"),k(n,"class","table-info svelte-tz36jk"),k(L,"class","page-button svelte-tz36jk"),L.disabled=se=!o[11],k(N,"class","page-info svelte-tz36jk"),k(ke,"class","page-button svelte-tz36jk"),ke.disabled=ce=!o[10],k(le,"class","pagination svelte-tz36jk")},m(ne,X){H(ne,n,X),m(n,r),m(r,i),m(r,s),m(s,c),m(n,f),ue&&ue.m(n,null),m(n,h),m(n,p),m(p,u),m(p,b),m(b,w),m(n,q),m(n,v),m(v,C),m(v,T),m(T,A),m(v,z),m(v,te),m(te,K),H(ne,G,X),rt(R,ne,X),H(ne,Y,X),H(ne,le,X),m(le,L),m(L,j),m(le,O),m(le,N),m(N,W),m(N,we),m(N,ve),m(N,ye),m(N,Se),m(N,qe),m(le,De),m(le,ke),m(ke,B),V=!0,de||(ae=[Ee(L,"click",o[14]),Ee(ke,"click",o[15])],de=!0)},p(ne,X){(!V||X&2)&&oe(c,ne[1]),ne[2][ne[1]]?ue?ue.p(ne,X):(ue=ir(ne),ue.c(),ue.m(n,h)):ue&&(ue.d(1),ue=null),(!V||X&16)&&oe(w,ne[4]),(!V||X&32)&&y!==(y=ne[5]+1+"")&&oe(A,y),(!V||X&64)&&$!==($=ne[6]+1+"")&&oe(K,$);const me={};X&128&&(me.tableData=ne[7]),R.$set(me),(!V||X&2048&&se!==(se=!ne[11]))&&(L.disabled=se),(!V||X&32)&&fe!==(fe=ne[5]*Ye+1+"")&&oe(we,fe),(!V||X&48)&&Pe!==(Pe=Math.min((ne[5]+1)*Ye,ne[4])+"")&&oe(ye,Pe),(!V||X&16)&&oe(qe,ne[4]),(!V||X&1024&&ce!==(ce=!ne[10]))&&(ke.disabled=ce)},i(ne){V||(Oe(R.$$.fragment,ne),V=!0)},o(ne){Ue(R.$$.fragment,ne),V=!1},d(ne){ne&&(x(n),x(G),x(Y),x(le)),ue&&ue.d(),lt(R,ne),de=!1,Qe(ae)}}}function ei(o){let n;return{c(){n=E("div"),n.textContent="Loading table data...",k(n,"class","loading-message svelte-tz36jk")},m(r,i){H(r,n,i)},p:pe,i:pe,o:pe,d(r){r&&x(n)}}}function ir(o){let n,r,i,s=o[2][o[1]].split(/[/\\]/).pop()+"",c;return{c(){n=E("span"),r=D("Source: "),i=E("strong"),c=D(s),k(i,"class","svelte-tz36jk")},m(f,h){H(f,n,h),m(n,r),m(n,i),m(i,c)},p(f,h){h&6&&s!==(s=f[2][f[1]].split(/[/\\]/).pop()+"")&&oe(c,s)},d(f){f&&x(n)}}}function ti(o){let n,r,i,s,c,f,h,p,u,b,w,q,v,C,T,y,A,z;function te(L,j){return L[0].length===0?Yl:Gl}let $=te(o),K=$(o),G=o[1]&&o[3]&&lr(o);const R=[ei,$l,Zl,Kl],Y=[];function le(L,j){return L[8]?0:L[1]&&L[7].columns.length>0?1:L[1]?2:3}return C=le(o),T=Y[C]=R[C](o),{c(){n=E("div"),r=E("header"),i=E("div"),s=E("h2"),s.textContent="Database Tables",c=F(),f=E("select"),K.c(),p=F(),u=E("div"),G&&G.c(),b=F(),w=E("button"),w.textContent="",q=F(),v=E("div"),T.c(),k(s,"class","svelte-tz36jk"),k(f,"class","table-selector svelte-tz36jk"),k(i,"class","header-left svelte-tz36jk"),k(w,"class","refresh-button svelte-tz36jk"),k(w,"title","Refresh"),k(u,"class","header-right svelte-tz36jk"),k(r,"class","viewer-header svelte-tz36jk"),k(v,"class","viewer-content svelte-tz36jk"),k(n,"class","table-viewer svelte-tz36jk")},m(L,j){H(L,n,j),m(n,r),m(r,i),m(i,s),m(i,c),m(i,f),K.m(f,null),xn(f,o[1]||""),m(r,p),m(r,u),G&&G.m(u,null),m(u,b),m(u,w),m(n,q),m(n,v),Y[C].m(v,null),y=!0,A||(z=[Ee(f,"change",o[12]),Ee(w,"click",o[13])],A=!0)},p(L,[j]){$===($=te(L))&&K?K.p(L,j):(K.d(1),K=$(L),K&&(K.c(),K.m(f,null))),(!y||j&3&&h!==(h=L[1]||""))&&xn(f,L[1]||""),L[1]&&L[3]?G?G.p(L,j):(G=lr(L),G.c(),G.m(u,b)):G&&(G.d(1),G=null);let se=C;C=le(L),C===se?Y[C].p(L,j):(Ar(),Ue(Y[se],1,1,()=>{Y[se]=null}),Lr(),T=Y[C],T?T.p(L,j):(T=Y[C]=R[C](L),T.c()),Oe(T,1),T.m(v,null))},i(L){y||(Oe(T),y=!0)},o(L){Ue(T),y=!1},d(L){L&&x(n),K.d(),G&&G.d(),Y[C].d(),A=!1,Qe(z)}}}let Ye=100;function ni(o,n,r){let i,s,c,{tables:f=[]}=n,{currentTable:h=null}=n,{dbManager:p=null}=n,{tableToCsvMap:u={}}=n,{electronAPI:b=null}=n;const w=jt();let q={columns:[],rows:[]},v=0,C=0,T=!1,y=!1;async function A(){if(!(!h||!p)){r(8,T=!0);try{r(4,v=p.getTableRowCount(h));const R=C*Ye;r(7,q=p.getTableData(h,Ye,R))}catch(R){console.error("Error loading table data:",R)}finally{r(8,T=!1)}}}function z(R){const Y=R.target.value;Y&&(r(5,C=0),w("tableSelect",{table:Y}))}function te(){A(),w("refresh")}function $(){C>0&&(r(5,C--,C),A())}function K(){const R=Math.ceil(v/Ye)-1;C<R&&(r(5,C++,C),A())}async function G(){if(!(!h||!p||!b||y)){r(9,y=!0);try{const R=p.getTableSchema(h);if(!R||R.length===0){alert("Unable to get table schema");return}const Y=p.getAllTableData(h);if(!Y||Y.rows.length===0){alert("Table is empty, nothing to export");return}const le=Nr.exportTableToCSV(h,R,Y),L=await b.saveFile({title:"Export Table to CSV",defaultPath:`${h}.csv`,filters:[{name:"CSV Files",extensions:["csv"]}]});if(!L)return;await b.writeCsvFile(L,le),alert(`Table "${h}" exported successfully to ${L}`)}catch(R){console.error("Error exporting table:",R),alert(`Error exporting table: ${R.message}`)}finally{r(9,y=!1)}}}return o.$$set=R=>{"tables"in R&&r(0,f=R.tables),"currentTable"in R&&r(1,h=R.currentTable),"dbManager"in R&&r(17,p=R.dbManager),"tableToCsvMap"in R&&r(2,u=R.tableToCsvMap),"electronAPI"in R&&r(3,b=R.electronAPI)},o.$$.update=()=>{o.$$.dirty&131074&&h&&p&&A(),o.$$.dirty&10&&h&&console.log("Current table set:",h,"electronAPI available:",!!b),o.$$.dirty&16&&r(6,i=Math.ceil(v/Ye)-1),o.$$.dirty&32&&r(11,s=C>0),o.$$.dirty&96&&r(10,c=C<i)},[f,h,u,b,v,C,i,q,T,y,c,s,z,te,$,K,G,p]}class ri extends ot{constructor(n){super(),it(this,n,ni,ti,nt,{tables:0,currentTable:1,dbManager:17,tableToCsvMap:2,electronAPI:3})}}function li(o){let n,r,i,s,c;return{c(){n=E("div"),r=E("div"),i=F(),s=E("p"),c=D(o[0]),k(r,"class","spinner svelte-1ywxz8e"),k(s,"class","message svelte-1ywxz8e"),k(n,"class","loading-container svelte-1ywxz8e")},m(f,h){H(f,n,h),m(n,r),m(n,i),m(n,s),m(s,c)},p(f,[h]){h&1&&oe(c,f[0])},i:pe,o:pe,d(f){f&&x(n)}}}function ii(o,n,r){let{message:i="Loading..."}=n;return o.$$set=s=>{"message"in s&&r(0,i=s.message)},[i]}class oi extends ot{constructor(n){super(),it(this,n,ii,li,nt,{message:0})}}function or(o,n,r){const i=o.slice();return i[7]=n[r],i}function si(o){let n;return{c(){n=E("p"),n.textContent="No CSV files specified",k(n,"class","no-files svelte-fu6li4")},m(r,i){H(r,n,i)},p:pe,d(r){r&&x(n)}}}function ai(o){let n,r=Le(o[0].csvFiles),i=[];for(let s=0;s<r.length;s+=1)i[s]=sr(or(o,r,s));return{c(){n=E("ul");for(let s=0;s<i.length;s+=1)i[s].c();k(n,"class","svelte-fu6li4")},m(s,c){H(s,n,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(n,null)},p(s,c){if(c&1){r=Le(s[0].csvFiles);let f;for(f=0;f<r.length;f+=1){const h=or(s,r,f);i[f]?i[f].p(h,c):(i[f]=sr(h),i[f].c(),i[f].m(n,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(s){s&&x(n),mt(i,s)}}}function sr(o){let n,r,i=o[7]+"",s;return{c(){n=E("li"),r=E("code"),s=D(i),k(r,"class","svelte-fu6li4"),k(n,"class","svelte-fu6li4")},m(c,f){H(c,n,f),m(n,r),m(r,s)},p(c,f){f&1&&i!==(i=c[7]+"")&&oe(s,i)},d(c){c&&x(n)}}}function ui(o){var ce,V,de;let n,r,i,s,c,f,h,p,u,b,w,q,v,C,T=(((ce=o[0])==null?void 0:ce.databasePath)||"Not specified")+"",y,A,z,te,$=(((de=(V=o[0])==null?void 0:V.csvFiles)==null?void 0:de.length)||0)+"",K,G,R,Y,le,L,j,se,O,N=(o[2]||JSON.stringify(o[0],null,2))+"",W,fe,we,ve,Pe,ye,Se,qe;function De(ae,ue){var ne;return(ne=ae[0])!=null&&ne.csvFiles&&ae[0].csvFiles.length>0?ai:si}let ke=De(o),B=ke(o);return{c(){n=E("div"),r=E("div"),i=E("h2"),i.textContent="Configuration File Preview",s=F(),c=E("p"),f=D("File: "),h=E("code"),p=D(o[1]),u=F(),b=E("div"),w=E("h3"),w.textContent="Database Path:",q=F(),v=E("div"),C=E("code"),y=D(T),A=F(),z=E("h3"),te=D("CSV Files ("),K=D($),G=D("):"),R=F(),Y=E("div"),B.c(),le=F(),L=E("div"),j=E("h3"),j.textContent="Raw File Content:",se=F(),O=E("pre"),W=D(N),fe=F(),we=E("div"),ve=E("button"),ve.textContent="Cancel",Pe=F(),ye=E("button"),ye.textContent="Proceed with Loading",k(i,"class","svelte-fu6li4"),k(h,"class","svelte-fu6li4"),k(c,"class","config-path svelte-fu6li4"),k(w,"class","svelte-fu6li4"),k(C,"class","svelte-fu6li4"),k(v,"class","config-value svelte-fu6li4"),k(z,"class","svelte-fu6li4"),k(Y,"class","csv-files-list svelte-fu6li4"),k(j,"class","svelte-fu6li4"),k(O,"class","svelte-fu6li4"),k(L,"class","raw-json svelte-fu6li4"),k(b,"class","config-display svelte-fu6li4"),k(ve,"class","button secondary svelte-fu6li4"),k(ye,"class","button primary svelte-fu6li4"),k(we,"class","actions svelte-fu6li4"),k(r,"class","preview-content svelte-fu6li4"),k(n,"class","config-preview svelte-fu6li4")},m(ae,ue){H(ae,n,ue),m(n,r),m(r,i),m(r,s),m(r,c),m(c,f),m(c,h),m(h,p),m(r,u),m(r,b),m(b,w),m(b,q),m(b,v),m(v,C),m(C,y),m(b,A),m(b,z),m(z,te),m(z,K),m(z,G),m(b,R),m(b,Y),B.m(Y,null),m(b,le),m(b,L),m(L,j),m(L,se),m(L,O),m(O,W),m(r,fe),m(r,we),m(we,ve),m(we,Pe),m(we,ye),Se||(qe=[Ee(ve,"click",o[4]),Ee(ye,"click",o[3])],Se=!0)},p(ae,[ue]){var ne,X,me;ue&2&&oe(p,ae[1]),ue&1&&T!==(T=(((ne=ae[0])==null?void 0:ne.databasePath)||"Not specified")+"")&&oe(y,T),ue&1&&$!==($=(((me=(X=ae[0])==null?void 0:X.csvFiles)==null?void 0:me.length)||0)+"")&&oe(K,$),ke===(ke=De(ae))&&B?B.p(ae,ue):(B.d(1),B=ke(ae),B&&(B.c(),B.m(Y,null))),ue&5&&N!==(N=(ae[2]||JSON.stringify(ae[0],null,2))+"")&&oe(W,N)},i:pe,o:pe,d(ae){ae&&x(n),B.d(),Se=!1,Qe(qe)}}}function fi(o,n,r){let{config:i=null}=n,{configPath:s=""}=n,{configManager:c=null}=n;const f=jt();let h="";Pr(async()=>{if(c&&s)try{r(2,h=await c.readConfigFileRaw(s)||"")}catch(b){console.error("Error reading raw config:",b),r(2,h=JSON.stringify(i,null,2))}else r(2,h=JSON.stringify(i,null,2))});function p(){f("proceed")}function u(){f("cancel")}return o.$$set=b=>{"config"in b&&r(0,i=b.config),"configPath"in b&&r(1,s=b.configPath),"configManager"in b&&r(5,c=b.configManager)},[i,s,h,p,u,c]}class ci extends ot{constructor(n){super(),it(this,n,fi,ui,nt,{config:0,configPath:1,configManager:5})}}function ar(o,n,r){const i=o.slice();return i[12]=n[r],i}function hi(o){let n,r,i,s,c,f,h,p,u,b,w=o[0].length+"",q,v,C,T,y,A,z,te,$,K,G=o[2]?"Deleting...":`Delete Selected (${o[1].size})`,R,Y,le,L,j=Le(o[0]),se=[];for(let O=0;O<j.length;O+=1)se[O]=ur(ar(o,j,O));return{c(){n=E("p"),n.textContent="The following tables already exist in the database. Select the tables you want to delete before loading new CSV files.",r=F(),i=E("div"),s=E("div"),c=E("label"),f=E("input"),h=F(),p=E("span"),u=E("strong"),b=D("Select All ("),q=D(w),v=D(" tables)"),C=F(),T=E("div");for(let O=0;O<se.length;O+=1)se[O].c();y=F(),A=E("div"),z=E("button"),te=D("Skip (Keep All Tables)"),$=F(),K=E("button"),R=D(G),k(n,"class","info-text svelte-byhfly"),k(f,"type","checkbox"),f.checked=o[3],k(f,"class","svelte-byhfly"),k(c,"class","checkbox-label svelte-byhfly"),k(s,"class","select-all-container svelte-byhfly"),k(T,"class","table-list svelte-byhfly"),k(i,"class","table-list-container svelte-byhfly"),k(z,"class","button secondary svelte-byhfly"),z.disabled=o[2],k(K,"class","button danger svelte-byhfly"),K.disabled=Y=o[2]||!o[4],k(A,"class","actions svelte-byhfly")},m(O,N){H(O,n,N),H(O,r,N),H(O,i,N),m(i,s),m(s,c),m(c,f),m(c,h),m(c,p),m(p,u),m(u,b),m(u,q),m(u,v),m(i,C),m(i,T);for(let W=0;W<se.length;W+=1)se[W]&&se[W].m(T,null);H(O,y,N),H(O,A,N),m(A,z),m(z,te),m(A,$),m(A,K),m(K,R),le||(L=[Ee(f,"change",o[6]),Ee(z,"click",o[8]),Ee(K,"click",o[7])],le=!0)},p(O,N){if(N&8&&(f.checked=O[3]),N&1&&w!==(w=O[0].length+"")&&oe(q,w),N&35){j=Le(O[0]);let W;for(W=0;W<j.length;W+=1){const fe=ar(O,j,W);se[W]?se[W].p(fe,N):(se[W]=ur(fe),se[W].c(),se[W].m(T,null))}for(;W<se.length;W+=1)se[W].d(1);se.length=j.length}N&4&&(z.disabled=O[2]),N&6&&G!==(G=O[2]?"Deleting...":`Delete Selected (${O[1].size})`)&&oe(R,G),N&20&&Y!==(Y=O[2]||!O[4])&&(K.disabled=Y)},d(O){O&&(x(n),x(r),x(i),x(y),x(A)),mt(se,O),le=!1,Qe(L)}}}function di(o){let n,r,i,s,c,f;return{c(){n=E("div"),r=E("p"),r.textContent="No existing tables found in the database.",i=F(),s=E("button"),s.textContent="Proceed to Load CSV Files",k(r,"class","svelte-byhfly"),k(s,"class","button primary svelte-byhfly"),k(n,"class","no-tables svelte-byhfly")},m(h,p){H(h,n,p),m(n,r),m(n,i),m(n,s),c||(f=Ee(s,"click",o[8]),c=!0)},p:pe,d(h){h&&x(n),c=!1,f()}}}function ur(o){let n,r,i,s,c,f,h=o[12]+"",p,u,b,w;function q(){return o[10](o[12])}return{c(){n=E("div"),r=E("label"),i=E("input"),c=F(),f=E("span"),p=D(h),u=F(),k(i,"type","checkbox"),i.checked=s=o[1].has(o[12]),k(i,"class","svelte-byhfly"),k(f,"class","table-name svelte-byhfly"),k(r,"class","checkbox-label svelte-byhfly"),k(n,"class","table-item svelte-byhfly")},m(v,C){H(v,n,C),m(n,r),m(r,i),m(r,c),m(r,f),m(f,p),m(n,u),b||(w=Ee(i,"change",q),b=!0)},p(v,C){o=v,C&3&&s!==(s=o[1].has(o[12]))&&(i.checked=s),C&1&&h!==(h=o[12]+"")&&oe(p,h)},d(v){v&&x(n),b=!1,w()}}}function mi(o){let n,r,i,s;function c(p,u){return p[0].length===0?di:hi}let f=c(o),h=f(o);return{c(){n=E("div"),r=E("div"),i=E("h2"),i.textContent="Existing Database Tables",s=F(),h.c(),k(i,"class","svelte-byhfly"),k(r,"class","manager-content svelte-byhfly"),k(n,"class","table-manager svelte-byhfly")},m(p,u){H(p,n,u),m(n,r),m(r,i),m(r,s),h.m(r,null)},p(p,[u]){f===(f=c(p))&&h?h.p(p,u):(h.d(1),h=f(p),h&&(h.c(),h.m(r,null)))},i:pe,o:pe,d(p){p&&x(n),h.d()}}}function pi(o,n,r){let i,s,{tables:c=[]}=n,{dbManager:f=null}=n;const h=jt();let p=!1,u=new Set;function b(T){u.has(T)?u.delete(T):u.add(T),r(1,u)}function w(){u.size===c.length?u.clear():r(1,u=new Set(c)),r(1,u)}async function q(){if(u.size===0){h("proceed");return}r(2,p=!0);try{for(const T of u)f&&f.db&&f.db.run(`DROP TABLE IF EXISTS "${T}"`);h("tablesDeleted")}catch(T){console.error("Error deleting tables:",T)}finally{r(2,p=!1)}}function v(){h("proceed")}const C=T=>b(T);return o.$$set=T=>{"tables"in T&&r(0,c=T.tables),"dbManager"in T&&r(9,f=T.dbManager)},o.$$.update=()=>{o.$$.dirty&2&&r(4,i=u.size>0),o.$$.dirty&3&&r(3,s=c.length>0&&u.size===c.length)},[c,u,p,s,i,b,w,q,v,f,C]}class bi extends ot{constructor(n){super(),it(this,n,pi,mi,nt,{tables:0,dbManager:9})}}function fr(o,n,r){const i=o.slice();return i[8]=n[r],i[10]=r,i}function cr(o){let n,r,i,s,c,f,h;return{c(){n=E("div"),r=E("pre"),i=D(o[1]),s=F(),c=E("button"),c.textContent="",k(r,"class","svelte-115fefa"),k(c,"class","svelte-115fefa"),k(n,"class","error-banner svelte-115fefa")},m(p,u){H(p,n,u),m(n,r),m(r,i),m(n,s),m(n,c),f||(h=Ee(c,"click",o[4]),f=!0)},p(p,u){u&2&&oe(i,p[1])},d(p){p&&x(n),f=!1,h()}}}function gi(o){let n=[],r=new Map,i,s=Le(o[0]);const c=f=>f[10];for(let f=0;f<s.length;f+=1){let h=fr(o,s,f),p=c(h);r.set(p,n[f]=gr(p,h))}return{c(){for(let f=0;f<n.length;f+=1)n[f].c();i=qr()},m(f,h){for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(f,h);H(f,i,h)},p(f,h){h&1&&(s=Le(f[0]),n=Rl(n,h,c,1,f,s,r,i.parentNode,zl,gr,i,fr))},d(f){f&&x(i);for(let h=0;h<n.length;h+=1)n[h].d(f)}}}function _i(o){let n;return{c(){n=E("div"),n.textContent="No log entries yet. Execute some commands to see them here.",k(n,"class","empty-message svelte-115fefa")},m(r,i){H(r,n,i)},p:pe,d(r){r&&x(n)}}}function hr(o){let n;return{c(){n=E("span"),n.textContent="ERROR",k(n,"class","error-badge svelte-115fefa")},m(r,i){H(r,n,i)},d(r){r&&x(n)}}}function dr(o){let n,r,i,s=o[8].naturalLanguage+"",c;return{c(){n=E("div"),r=E("strong"),r.textContent="NL:",i=F(),c=D(s),k(r,"class","svelte-115fefa"),k(n,"class","entry-line svelte-115fefa")},m(f,h){H(f,n,h),m(n,r),m(n,i),m(n,c)},p(f,h){h&1&&s!==(s=f[8].naturalLanguage+"")&&oe(c,s)},d(f){f&&x(n)}}}function mr(o){let n,r,i,s,c=o[8].sql+"",f;return{c(){n=E("div"),r=E("strong"),r.textContent="SQL:",i=F(),s=E("code"),f=D(c),k(r,"class","svelte-115fefa"),k(s,"class","svelte-115fefa"),k(n,"class","entry-line svelte-115fefa")},m(h,p){H(h,n,p),m(n,r),m(n,i),m(n,s),m(s,f)},p(h,p){p&1&&c!==(c=h[8].sql+"")&&oe(f,c)},d(h){h&&x(n)}}}function pr(o){let n,r,i,s=o[8].error+"",c;return{c(){n=E("div"),r=E("strong"),r.textContent="ERROR:",i=F(),c=D(s),k(r,"class","svelte-115fefa"),k(n,"class","entry-line error svelte-115fefa")},m(f,h){H(f,n,h),m(n,r),m(n,i),m(n,c)},p(f,h){h&1&&s!==(s=f[8].error+"")&&oe(c,s)},d(f){f&&x(n)}}}function br(o){let n,r,i,s=o[8].result+"",c;return{c(){n=E("div"),r=E("strong"),r.textContent="RESULT:",i=F(),c=D(s),k(r,"class","svelte-115fefa"),k(n,"class","entry-line result svelte-115fefa")},m(f,h){H(f,n,h),m(n,r),m(n,i),m(n,c)},p(f,h){h&1&&s!==(s=f[8].result+"")&&oe(c,s)},d(f){f&&x(n)}}}function gr(o,n){let r,i,s,c,f=n[8].timestamp+"",h,p,u,b,w,q,v,C,T,y=n[8].error&&hr(),A=n[8].naturalLanguage&&dr(n),z=n[8].sql&&mr(n),te=n[8].error&&pr(n),$=n[8].result&&br(n);return{key:o,first:null,c(){r=E("div"),i=E("div"),s=E("span"),c=D("["),h=D(f),p=D("]"),u=F(),y&&y.c(),b=F(),A&&A.c(),w=F(),z&&z.c(),q=F(),te&&te.c(),v=F(),$&&$.c(),C=F(),k(s,"class","timestamp svelte-115fefa"),k(i,"class","entry-header svelte-115fefa"),k(r,"class",T="log-entry "+(n[8].error?"has-error":"")+" svelte-115fefa"),this.first=r},m(K,G){H(K,r,G),m(r,i),m(i,s),m(s,c),m(s,h),m(s,p),m(i,u),y&&y.m(i,null),m(r,b),A&&A.m(r,null),m(r,w),z&&z.m(r,null),m(r,q),te&&te.m(r,null),m(r,v),$&&$.m(r,null),m(r,C)},p(K,G){n=K,G&1&&f!==(f=n[8].timestamp+"")&&oe(h,f),n[8].error?y||(y=hr(),y.c(),y.m(i,null)):y&&(y.d(1),y=null),n[8].naturalLanguage?A?A.p(n,G):(A=dr(n),A.c(),A.m(r,w)):A&&(A.d(1),A=null),n[8].sql?z?z.p(n,G):(z=mr(n),z.c(),z.m(r,q)):z&&(z.d(1),z=null),n[8].error?te?te.p(n,G):(te=pr(n),te.c(),te.m(r,v)):te&&(te.d(1),te=null),n[8].result?$?$.p(n,G):($=br(n),$.c(),$.m(r,C)):$&&($.d(1),$=null),G&1&&T!==(T="log-entry "+(n[8].error?"has-error":"")+" svelte-115fefa")&&k(r,"class",T)},d(K){K&&x(r),y&&y.d(),A&&A.d(),z&&z.d(),te&&te.d(),$&&$.d()}}}function wi(o){let n,r,i,s,c,f,h,p,u,b,w,q,v=o[1]&&cr(o);function C(A,z){return A[0].length===0?_i:gi}let T=C(o),y=T(o);return{c(){n=E("div"),r=E("header"),i=E("h2"),i.textContent="SQL Command Log",s=F(),c=E("div"),f=E("button"),f.textContent="Refresh",h=F(),v&&v.c(),p=F(),u=E("div"),b=E("div"),y.c(),k(i,"class","svelte-115fefa"),k(f,"class","button refresh svelte-115fefa"),k(c,"class","header-actions svelte-115fefa"),k(r,"class","log-header svelte-115fefa"),k(b,"class","log-display svelte-115fefa"),k(u,"class","log-content svelte-115fefa"),k(n,"class","log-viewer svelte-115fefa")},m(A,z){H(A,n,z),m(n,r),m(r,i),m(r,s),m(r,c),m(c,f),m(n,h),v&&v.m(n,null),m(n,p),m(n,u),m(u,b),y.m(b,null),w||(q=Ee(f,"click",o[2]),w=!0)},p(A,[z]){A[1]?v?v.p(A,z):(v=cr(A),v.c(),v.m(n,p)):v&&(v.d(1),v=null),T===(T=C(A))&&y?y.p(A,z):(y.d(1),y=T(A),y&&(y.c(),y.m(b,null)))},i:pe,o:pe,d(A){A&&x(n),v&&v.d(),y.d(),w=!1,q()}}}function vi(o,n,r){let{logManager:i=null}=n;jt();let s="",c=[],f="";async function h(){if(i)try{s=await i.loadLog(),p()}catch(b){console.error("Error loading log:",b),r(1,f=`Error loading log: ${b.message}`)}}function p(){i&&r(0,c=i.parseLogEntries(s))}const u=()=>r(1,f="");return o.$$set=b=>{"logManager"in b&&r(3,i=b.logManager)},o.$$.update=()=>{o.$$.dirty&8&&i&&h()},[c,f,h,i,u]}class yi extends ot{constructor(n){super(),it(this,n,vi,wi,nt,{logManager:3})}}const{window:Ei}=Cl;function _r(o){let n,r,i;return{c(){n=E("div"),r=D("Version "),i=D(o[12]),k(n,"class","version-banner svelte-7zqrgv")},m(s,c){H(s,n,c),m(n,r),m(n,i)},p(s,c){c[0]&4096&&oe(i,s[12])},d(s){s&&x(n)}}}function wr(o){let n,r,i,s=o[13].connected?"":"",c,f,h,p=o[13].message+"",u,b,w,q,v,C,T,y=o[13].suggestion&&vr(o);return{c(){n=E("div"),r=E("div"),i=E("span"),c=D(s),f=F(),h=E("span"),u=D(p),b=F(),y&&y.c(),w=F(),q=E("button"),q.textContent="",k(i,"class","llm-status-icon svelte-7zqrgv"),k(h,"class","llm-status-message svelte-7zqrgv"),k(r,"class","llm-status-content svelte-7zqrgv"),k(q,"class","llm-status-close svelte-7zqrgv"),k(q,"title","Dismiss"),k(n,"class",v="llm-status-banner "+(o[13].connected?"connected":"disconnected")+" svelte-7zqrgv")},m(A,z){H(A,n,z),m(n,r),m(r,i),m(i,c),m(r,f),m(r,h),m(h,u),m(r,b),y&&y.m(r,null),m(n,w),m(n,q),C||(T=Ee(q,"click",o[30]),C=!0)},p(A,z){z[0]&8192&&s!==(s=A[13].connected?"":"")&&oe(c,s),z[0]&8192&&p!==(p=A[13].message+"")&&oe(u,p),A[13].suggestion?y?y.p(A,z):(y=vr(A),y.c(),y.m(r,null)):y&&(y.d(1),y=null),z[0]&8192&&v!==(v="llm-status-banner "+(A[13].connected?"connected":"disconnected")+" svelte-7zqrgv")&&k(n,"class",v)},d(A){A&&x(n),y&&y.d(),C=!1,T()}}}function vr(o){let n,r,i=o[13].suggestion+"",s,c;return{c(){n=E("span"),r=D("("),s=D(i),c=D(")"),k(n,"class","llm-status-suggestion svelte-7zqrgv")},m(f,h){H(f,n,h),m(n,r),m(n,s),m(n,c)},p(f,h){h[0]&8192&&i!==(i=f[13].suggestion+"")&&oe(s,i)},d(f){f&&x(n)}}}function yr(o){let n,r,i,s,c,f;return{c(){n=E("div"),r=D(o[11]),i=F(),s=E("button"),s.textContent="",k(s,"class","svelte-7zqrgv"),k(n,"class","error-banner svelte-7zqrgv")},m(h,p){H(h,n,p),m(n,r),m(n,i),m(n,s),c||(f=Ee(s,"click",o[31]),c=!0)},p(h,p){p[0]&2048&&oe(r,h[11])},d(h){h&&x(n),c=!1,f()}}}function ki(o){let n,r,i,s,c,f,h,p,u,b;return h=new yi({props:{logManager:o[5]}}),h.$on("refresh",o[24]),{c(){n=E("div"),r=E("div"),i=E("button"),i.textContent="Table View",s=F(),c=E("button"),c.textContent="Log View",f=F(),pt(h.$$.fragment),k(i,"class","toggle-button svelte-7zqrgv"),k(c,"class","toggle-button active svelte-7zqrgv"),k(r,"class","view-toggle svelte-7zqrgv"),k(n,"class","viewer-container svelte-7zqrgv")},m(w,q){H(w,n,q),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),rt(h,n,null),p=!0,u||(b=Ee(i,"click",o[25]),u=!0)},p(w,q){const v={};q[0]&32&&(v.logManager=w[5]),h.$set(v)},i(w){p||(Oe(h.$$.fragment,w),p=!0)},o(w){Ue(h.$$.fragment,w),p=!1},d(w){w&&x(n),lt(h),u=!1,b()}}}function Si(o){let n,r,i,s,c,f,h,p,u,b,w,q=o[2]&&window.electronAPI&&Er(o);return p=new ri({props:{tables:o[8],currentTable:o[2],dbManager:o[0],tableToCsvMap:o[9],electronAPI:window.electronAPI}}),p.$on("tableSelect",o[23]),p.$on("refresh",o[24]),{c(){n=E("div"),r=E("div"),i=E("button"),i.textContent="Table View",s=F(),c=E("button"),c.textContent="Log View",f=F(),q&&q.c(),h=F(),pt(p.$$.fragment),k(i,"class","toggle-button active svelte-7zqrgv"),k(c,"class","toggle-button svelte-7zqrgv"),k(r,"class","view-toggle svelte-7zqrgv"),k(n,"class","viewer-container svelte-7zqrgv")},m(v,C){H(v,n,C),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),q&&q.m(n,null),m(n,h),rt(p,n,null),u=!0,b||(w=Ee(c,"click",o[25]),b=!0)},p(v,C){v[2]&&window.electronAPI?q?q.p(v,C):(q=Er(v),q.c(),q.m(n,h)):q&&(q.d(1),q=null);const T={};C[0]&256&&(T.tables=v[8]),C[0]&4&&(T.currentTable=v[2]),C[0]&1&&(T.dbManager=v[0]),C[0]&512&&(T.tableToCsvMap=v[9]),p.$set(T)},i(v){u||(Oe(p.$$.fragment,v),u=!0)},o(v){Ue(p.$$.fragment,v),u=!1},d(v){v&&x(n),q&&q.d(),lt(p),b=!1,w()}}}function qi(o){let n,r;return n=new oi({props:{message:o[10]}}),{c(){pt(n.$$.fragment)},m(i,s){rt(n,i,s),r=!0},p(i,s){const c={};s[0]&1024&&(c.message=i[10]),n.$set(c)},i(i){r||(Oe(n.$$.fragment,i),r=!0)},o(i){Ue(n.$$.fragment,i),r=!1},d(i){lt(n,i)}}}function Ci(o){let n,r;return n=new ci({props:{config:o[6],configPath:o[7],configManager:o[4]}}),n.$on("proceed",o[21]),n.$on("cancel",o[22]),{c(){pt(n.$$.fragment)},m(i,s){rt(n,i,s),r=!0},p(i,s){const c={};s[0]&64&&(c.config=i[6]),s[0]&128&&(c.configPath=i[7]),s[0]&16&&(c.configManager=i[4]),n.$set(c)},i(i){r||(Oe(n.$$.fragment,i),r=!0)},o(i){Ue(n.$$.fragment,i),r=!1},d(i){lt(n,i)}}}function Pi(o){let n,r;return n=new bi({props:{tables:o[8],dbManager:o[0]}}),n.$on("tablesDeleted",o[20]),n.$on("proceed",o[21]),{c(){pt(n.$$.fragment)},m(i,s){rt(n,i,s),r=!0},p(i,s){const c={};s[0]&256&&(c.tables=i[8]),s[0]&1&&(c.dbManager=i[0]),n.$set(c)},i(i){r||(Oe(n.$$.fragment,i),r=!0)},o(i){Ue(n.$$.fragment,i),r=!1},d(i){lt(n,i)}}}function Er(o){let n;function r(c,f){return c[16]?Mi:c[19]?Li:c[3].length===0?Ai:Ti}let i=r(o),s=i(o);return{c(){n=E("div"),s.c(),k(n,"class","commands-panel svelte-7zqrgv")},m(c,f){H(c,n,f),s.m(n,null)},p(c,f){i===(i=r(c))&&s?s.p(c,f):(s.d(1),s=i(c),s&&(s.c(),s.m(n,null)))},d(c){c&&x(n),s.d()}}}function Ti(o){let n,r,i=o[3].length+"",s,c;return{c(){n=E("div"),r=D("All commands completed ("),s=D(i),c=D(" total)"),k(n,"class","commands-complete svelte-7zqrgv")},m(f,h){H(f,n,h),m(n,r),m(n,s),m(n,c)},p(f,h){h[0]&8&&i!==(i=f[3].length+"")&&oe(s,i)},d(f){f&&x(n)}}}function Ai(o){let n;return{c(){n=E("div"),n.textContent="No commands loaded. Create a commands.txt file in the application directory.",k(n,"class","commands-info svelte-7zqrgv")},m(r,i){H(r,n,i)},p:pe,d(r){r&&x(n)}}}function Li(o){let n,r,i,s,c,f,h,p,u,b,w=o[15]?"Executing...":"Execute Next Command",q,v,C;return{c(){n=E("div"),r=E("div"),i=D("Next Command ("),s=D(o[18]),c=D("):"),f=F(),h=E("div"),p=D(o[17]),u=F(),b=E("button"),q=D(w),k(r,"class","command-label svelte-7zqrgv"),k(h,"class","command-text svelte-7zqrgv"),k(b,"class","execute-next-button svelte-7zqrgv"),b.disabled=o[15],k(b,"title","Execute this command"),k(n,"class","next-command-display svelte-7zqrgv")},m(T,y){H(T,n,y),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),m(n,h),m(h,p),m(n,u),m(n,b),m(b,q),v||(C=Ee(b,"click",o[26]),v=!0)},p(T,y){y[0]&262144&&oe(s,T[18]),y[0]&131072&&oe(p,T[17]),y[0]&32768&&w!==(w=T[15]?"Executing...":"Execute Next Command")&&oe(q,w),y[0]&32768&&(b.disabled=T[15])},d(T){T&&x(n),v=!1,C()}}}function Mi(o){let n,r;return{c(){n=E("div"),r=D(o[16]),k(n,"class","commands-error svelte-7zqrgv")},m(i,s){H(i,n,s),m(n,r)},p(i,s){s[0]&65536&&oe(r,i[16])},d(i){i&&x(n)}}}function Ni(o){let n,r,i,s,c,f,h,p,u,b=o[12]&&_r(o),w=o[14]&&o[13]&&wr(o),q=o[11]&&yr(o);const v=[Pi,Ci,qi,Si,ki],C=[];function T(y,A){return y[1]==="tableManager"?0:y[1]==="configPreview"?1:y[1]==="loading"?2:y[1]==="viewer"?3:y[1]==="logView"?4:-1}return~(c=T(o))&&(f=C[c]=v[c](o)),{c(){n=E("div"),b&&b.c(),r=F(),w&&w.c(),i=F(),q&&q.c(),s=F(),f&&f.c(),k(n,"class","app svelte-7zqrgv")},m(y,A){H(y,n,A),b&&b.m(n,null),m(n,r),w&&w.m(n,null),m(n,i),q&&q.m(n,null),m(n,s),~c&&C[c].m(n,null),h=!0,p||(u=Ee(Ei,"beforeunload",o[29]),p=!0)},p(y,A){y[12]?b?b.p(y,A):(b=_r(y),b.c(),b.m(n,r)):b&&(b.d(1),b=null),y[14]&&y[13]?w?w.p(y,A):(w=wr(y),w.c(),w.m(n,i)):w&&(w.d(1),w=null),y[11]?q?q.p(y,A):(q=yr(y),q.c(),q.m(n,s)):q&&(q.d(1),q=null);let z=c;c=T(y),c===z?~c&&C[c].p(y,A):(f&&(Ar(),Ue(C[z],1,1,()=>{C[z]=null}),Lr()),~c?(f=C[c],f?f.p(y,A):(f=C[c]=v[c](y),f.c()),Oe(f,1),f.m(n,null)):f=null)},i(y){h||(Oe(f),h=!0)},o(y){Ue(f),h=!1},d(y){y&&x(n),b&&b.d(),w&&w.d(),q&&q.d(),~c&&C[c].d(),p=!1,u()}}}function zi(o,n,r){let i,s,c,f,h,p,u="loading",b=null,w=null,q=[],v={},C=null,T="",y="",A="",z=null,te=!0;Pr(async()=>{if(window.addEventListener("llm-status",B=>{r(13,z=B.detail),console.log("LLM Status:",z)}),console.log("App mounted, checking for electronAPI..."),console.log("window.electronAPI:",window.electronAPI),setTimeout(async()=>{if(!z&&window.electronAPI&&window.electronAPI.testOllamaConnection)try{const B=await window.electronAPI.testOllamaConnection();r(13,z={connected:B.success,message:B.success?"Ollama connected successfully":`Ollama not available: ${B.error||B.message||"Connection failed"}`,host:B.host||"localhost",port:B.port||"11434",error:B.error,suggestion:B.suggestion})}catch(B){r(13,z={connected:!1,message:`Failed to test Ollama connection: ${B.message}`})}},1e3),window.electronAPI)try{window.electronAPI.getAppVersion&&(r(12,A=await window.electronAPI.getAppVersion()),console.log(`Application version: ${A}`)),r(4,f=new Il(window.electronAPI)),await f.initialize(),r(0,h=new Bl),await h.initialize(),r(5,p=new xl(window.electronAPI)),await p.initialize(),console.log("Initialization complete"),await $()}catch(B){console.error("Initialization error:",B),r(11,y=`Initialization error: ${B.message}`)}else console.error("Electron API not available"),r(11,y="Electron API not available. Please run this application in Electron.")});async function $(){try{if(r(10,T="Initializing..."),r(7,w=f.getDefaultConfigPath()),r(6,b=await f.loadConfig(w)),b||(await f.createDefaultConfig(),r(6,b=await f.loadConfig(w))),!b||!f.validateConfig(b)){r(11,y="Invalid configuration file");return}r(10,T="Creating fresh database...");try{await window.electronAPI.deleteDatabase(b.databasePath),console.log("Previous database deleted (if it existed)")}catch(B){console.warn("Error deleting database (may not exist):",B)}h.createNew(),console.log("Fresh database created"),r(1,u="loading"),await R()}catch(B){r(11,y=`Error loading config: ${B.message}`),console.error(B)}}async function K(){h&&b&&await h.saveToFile(b.databasePath,window.electronAPI),h&&r(8,q=h.getTableNames()),G()}function G(){r(1,u="loading"),R()}async function R(){if(!b||!b.csvFiles||b.csvFiles.length===0){r(8,q=h.getTableNames()),q.length>0&&r(2,C=q[0]),r(1,u="viewer"),r(10,T=""),q.length>0&&(console.log("No CSV files to load, starting automatic command execution..."),setTimeout(async()=>{await Se()},200));return}r(10,T="Loading CSV files..."),r(9,v={});let B=0;for(let ce=0;ce<b.csvFiles.length;ce++){const V=b.csvFiles[ce],de=Gn.getTableNameFromPath(V);r(10,T=`Loading ${V}... (${ce+1}/${b.csvFiles.length})`);try{const ae=await window.electronAPI.readCsvFile(V),{schema:ue,data:ne}=Gn.parseCSV(ae);r(9,v[de]=V,v),h.createTable(de,ue),h.insertData(de,ue,ne),B++}catch(ae){console.error(`Error loading CSV file ${V}:`,ae),r(11,y=`Error loading ${V}: ${ae.message}`)}}B>0&&(r(10,T="Saving database..."),await h.saveToFile(b.databasePath,window.electronAPI)),r(8,q=h.getTableNames()),q.length>0&&(r(2,C=q[0]),L()),r(1,u="viewer"),r(10,T=""),!y&&q.length>0&&(console.log("CSV files loaded successfully, starting automatic command execution..."),setTimeout(async()=>{await Se()},200))}function Y(){r(1,u="startup"),r(6,b=null),r(7,w=null)}function le(B){var V;const ce=(V=B.detail)==null?void 0:V.table;ce&&(r(2,C=ce),L())}function L(){h&&C&&h.getTableSchema(C)}function j(){h&&(r(8,q=h.getTableNames()),q.length>0&&!q.includes(C)?(r(2,C=q[0]),L()):C&&L())}function se(){u==="viewer"?r(1,u="logView"):u==="logView"&&r(1,u="viewer")}async function O(B){const ce=B.detail;if(!p)return;const V=p.formatLogEntry(ce),de=await p.loadLog(),ae=de+(de?`
`:"")+V;await p.saveLog(ae)}let N=[],W=0,fe=!1,we=null,ve=!1;async function Pe(){if(!window.electronAPI){r(3,N=[]),r(16,we="Electron API not available"),r(28,ve=!1);return}try{const ce=(await window.electronAPI.readCommandsFile()).split(`
`).map(V=>V.trim()).filter(V=>V.length>0&&!V.startsWith("#")&&!V.startsWith("[")&&!V.startsWith("!REM"));r(3,N=ce),r(16,we=null),r(28,ve=!0),W>=N.length&&r(27,W=N.length),N.length===0&&r(16,we="No commands found in commands.txt (empty file or only comments)")}catch(B){console.error("Error loading commands:",B),r(3,N=[]),r(16,we=`Error reading commands.txt: ${B.message}`),r(28,ve=!1)}}async function ye(){var B;if(!window.electronAPI||!h||!C)return r(11,y="Electron API, database, or table not available"),!1;if(fe||!i)return!1;r(15,fe=!0),r(11,y=""),r(16,we=null);try{let ce=h.getTableSchema(C);if(!ce||ce.length===0)return r(11,y="Unable to get table schema"),r(15,fe=!1),!1;const V=i;if(console.log(`Processing command ${W+1}/${N.length}: ${V}`),V.startsWith("!SAVE"))try{const X=V.split(/\s+/);if(X.length<3)throw new Error("!SAVE command requires format: !SAVE <tableName> <filePath>");const me=X[1],Ne=X.slice(2).join(" ");if(!h.getTableNames().includes(me))throw new Error(`Table "${me}" does not exist`);const be=h.getTableSchema(me);if(!be||be.length===0)throw new Error(`Unable to get schema for table "${me}"`);const xe=h.getAllTableData(me),Ct=Nr.exportTableToCSV(me,be,xe);await window.electronAPI.writeCsvFile(Ne,Ct);const bt=((B=xe==null?void 0:xe.rows)==null?void 0:B.length)||0,gt=`Exported table "${me}" (${bt} row(s)) to ${Ne}`;console.log(gt);const st=new Date().toISOString().replace("T"," ").substring(0,19);return await O({detail:{naturalLanguage:V,sql:null,error:null,result:gt,timestamp:st}}),r(27,W=W+1),console.log(`Command ${W}/${N.length} completed, moving to next`),!0}catch(X){const me=X.message||"Failed to save table";console.error(`Error executing !SAVE command ${W+1}:`,me);const Ne=new Date().toISOString().replace("T"," ").substring(0,19);return await O({detail:{naturalLanguage:V,sql:null,error:me,result:null,timestamp:Ne}}),r(11,y=`Error executing !SAVE command ${W+1} ("${V}"): ${me}`),r(15,fe=!1),!1}let de=null;try{const X=await window.electronAPI.getSqlForCommand(V);X&&X.trim()!==""&&(de=X.trim(),console.log(`Using existing SQL for command: ${de}`))}catch(X){console.warn("Error checking for existing SQL:",X)}if(!de)try{if(de=await window.electronAPI.translateToSQL(V,C,ce),!de||de.trim()==="")throw new Error("Empty SQL returned from translation");console.log(`Generated new SQL for command: ${de}`)}catch(X){const me=X.message;console.error(`Error translating command ${W+1}:`,me);const Ne=new Date().toISOString().replace("T"," ").substring(0,19);return await O({detail:{naturalLanguage:V,sql:null,error:me,result:null,timestamp:Ne}}),r(11,y=`Error translating command ${W+1} ("${V}"): ${me}`),r(15,fe=!1),!1}let ae=null,ue=null;try{ae=h.executeSQL(de),b&&ae.type==="modify"&&(await h.saveToFile(b.databasePath,window.electronAPI),j(),L())}catch(X){ue=X.message||"SQL execution failed",console.error(`Error executing command ${W+1}:`,ue);const me=new Date().toISOString().replace("T"," ").substring(0,19);return await O({detail:{naturalLanguage:V,sql:de,error:ue,result:null,timestamp:me}}),r(11,y=`Error executing command ${W+1} ("${V}"): ${ue}`),r(15,fe=!1),!1}const ne=new Date().toISOString().replace("T"," ").substring(0,19);await O({detail:{naturalLanguage:V,sql:de,error:null,result:ae?ae.type==="select"?`Returned ${ae.rowCount} row(s)`:`Affected ${ae.affectedRows} row(s)`:null,timestamp:ne}});try{const X=await window.electronAPI.getSqlForCommand(V);!X||X.trim()===""?(await window.electronAPI.insertSqlIntoCommandsFile(V,de),console.log(`SQL inserted into commands.txt after command: ${V}`)):console.log("SQL already exists for command, skipping insertion"),await Pe()}catch(X){console.error("Error inserting SQL into commands.txt:",X)}return r(27,W=W+1),console.log(`Command ${W}/${N.length} completed, moving to next`),!0}catch(ce){return console.error("Error executing command:",ce),r(11,y=`Error executing command: ${ce.message}`),!1}finally{r(15,fe=!1)}}async function Se(){if(!window.electronAPI||!h||!C){console.log("Cannot execute commands: prerequisites not met");return}if(ve||(console.log("Waiting for commands to load..."),await Pe()),await new Promise(B=>setTimeout(B,100)),N.length===0){console.log("No commands to execute");return}for(console.log(`Starting automatic execution of ${N.length} command(s)...`),r(10,T=`Executing commands... (${W+1}/${N.length})`);W<N.length&&!y;){if(!await ye()){console.log("Command execution stopped");break}W<N.length?r(10,T=`Executing commands... (${W+1}/${N.length})`):r(10,T=`All commands completed (${N.length}/${N.length})`),await new Promise(ce=>setTimeout(ce,50))}r(10,T=""),W>=N.length?console.log("All commands executed successfully"):y&&console.log(`Command execution stopped due to error: ${y}`)}const qe=()=>{h&&h.close()},De=()=>r(14,te=!1),ke=()=>r(11,y="");return o.$$.update=()=>{o.$$.dirty[0]&134217736&&r(17,i=W<N.length?N[W]:null),o.$$.dirty[0]&134217736&&r(19,s=W<N.length),o.$$.dirty[0]&134217736&&r(18,c=N.length>0?`${W+1} / ${N.length}`:"0 / 0"),o.$$.dirty[0]&268435462&&u==="viewer"&&C&&window.electronAPI&&!ve&&Pe(),o.$$.dirty[0]&5&&C&&h&&L()},[h,u,C,N,f,p,b,w,q,v,T,y,A,z,te,fe,we,i,c,s,K,G,Y,le,j,se,ye,W,ve,qe,De,ke]}class Ri extends ot{constructor(n){super(),it(this,n,zi,Ni,nt,{},null,[-1,-1])}}new Ri({target:document.getElementById("app")});
