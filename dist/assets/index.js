var ui=Object.defineProperty;var fi=(l,r,i)=>r in l?ui(l,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[r]=i;var Oe=(l,r,i)=>fi(l,typeof r!="symbol"?r+"":r,i);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(u){if(u.ep)return;u.ep=!0;const c=i(u);fetch(u.href,c)}})();function ae(){}function cr(l){return l()}function Bn(){return Object.create(null)}function Ve(l){l.forEach(cr)}function hr(l){return typeof l=="function"}function st(l,r){return l!=l?r==r:l!==r||l&&typeof l=="object"||typeof l=="function"}function ci(l){return Object.keys(l).length===0}const hi=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function b(l,r){l.appendChild(r)}function Z(l,r,i){l.insertBefore(r,i||null)}function G(l){l.parentNode&&l.parentNode.removeChild(l)}function lt(l,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].d(r)}function E(l){return document.createElement(l)}function x(l){return document.createTextNode(l)}function J(){return x(" ")}function di(){return x("")}function Pe(l,r,i,s){return l.addEventListener(r,i,s),()=>l.removeEventListener(r,i,s)}function q(l,r,i){i==null?l.removeAttribute(r):l.getAttribute(r)!==i&&l.setAttribute(r,i)}function mi(l){return Array.from(l.childNodes)}function he(l,r){r=""+r,l.data!==r&&(l.data=r)}function tn(l,r){l.value=r??""}function Qn(l,r,i){for(let s=0;s<l.options.length;s+=1){const u=l.options[s];if(u.__value===r){u.selected=!0;return}}l.selectedIndex=-1}function pi(l,r,{bubbles:i=!1,cancelable:s=!1}={}){return new CustomEvent(l,{detail:r,bubbles:i,cancelable:s})}let vt;function wt(l){vt=l}function dr(){if(!vt)throw new Error("Function called outside component initialization");return vt}function mr(l){dr().$$.on_mount.push(l)}function on(){const l=dr();return(r,i,{cancelable:s=!1}={})=>{const u=l.$$.callbacks[r];if(u){const c=pi(r,i,{cancelable:s});return u.slice().forEach(h=>{h.call(l,c)}),!c.defaultPrevented}return!0}}const it=[],Hn=[];let ot=[];const Xn=[],bi=Promise.resolve();let nn=!1;function _i(){nn||(nn=!0,bi.then(pr))}function rn(l){ot.push(l)}const en=new Set;let rt=0;function pr(){if(rt!==0)return;const l=vt;do{try{for(;rt<it.length;){const r=it[rt];rt++,wt(r),gi(r.$$)}}catch(r){throw it.length=0,rt=0,r}for(wt(null),it.length=0,rt=0;Hn.length;)Hn.pop()();for(let r=0;r<ot.length;r+=1){const i=ot[r];en.has(i)||(en.add(i),i())}ot.length=0}while(it.length);for(;Xn.length;)Xn.pop()();nn=!1,en.clear(),wt(l)}function gi(l){if(l.fragment!==null){l.update(),Ve(l.before_update);const r=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,r),l.after_update.forEach(rn)}}function wi(l){const r=[],i=[];ot.forEach(s=>l.indexOf(s)===-1?r.push(s):i.push(s)),i.forEach(s=>s()),ot=r}const Ot=new Set;let $e;function br(){$e={r:0,c:[],p:$e}}function _r(){$e.r||Ve($e.c),$e=$e.p}function Re(l,r){l&&l.i&&(Ot.delete(l),l.i(r))}function We(l,r,i,s){if(l&&l.o){if(Ot.has(l))return;Ot.add(l),$e.c.push(()=>{Ot.delete(l),s&&(i&&l.d(1),s())}),l.o(r)}else s&&s()}function Ne(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function yt(l){l&&l.c()}function at(l,r,i){const{fragment:s,after_update:u}=l.$$;s&&s.m(r,i),rn(()=>{const c=l.$$.on_mount.map(cr).filter(hr);l.$$.on_destroy?l.$$.on_destroy.push(...c):Ve(c),l.$$.on_mount=[]}),u.forEach(rn)}function ut(l,r){const i=l.$$;i.fragment!==null&&(wi(i.after_update),Ve(i.on_destroy),i.fragment&&i.fragment.d(r),i.on_destroy=i.fragment=null,i.ctx=[])}function vi(l,r){l.$$.dirty[0]===-1&&(it.push(l),_i(),l.$$.dirty.fill(0)),l.$$.dirty[r/31|0]|=1<<r%31}function ft(l,r,i,s,u,c,h=null,p=[-1]){const g=vt;wt(l);const a=l.$$={fragment:null,ctx:[],props:c,update:ae,not_equal:u,bound:Bn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(g?g.$$.context:[])),callbacks:Bn(),dirty:p,skip_bound:!1,root:r.target||g.$$.root};h&&h(a.root);let v=!1;if(a.ctx=i?i(l,r.props||{},(k,N,...y)=>{const S=y.length?y[0]:N;return a.ctx&&u(a.ctx[k],a.ctx[k]=S)&&(!a.skip_bound&&a.bound[k]&&a.bound[k](S),v&&vi(l,k)),N}):[],a.update(),v=!0,Ve(a.before_update),a.fragment=s?s(a.ctx):!1,r.target){if(r.hydrate){const k=mi(r.target);a.fragment&&a.fragment.l(k),k.forEach(G)}else a.fragment&&a.fragment.c();r.intro&&Re(l.$$.fragment),at(l,r.target,r.anchor),pr()}wt(g)}class ct{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){ut(this,1),this.$destroy=ae}$on(r,i){if(!hr(i))return ae;const s=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return s.push(i),()=>{const u=s.indexOf(i);u!==-1&&s.splice(u,1)}}$set(r){this.$$set&&!ci(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}}const yi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yi);class Ei{constructor(r){this.api=r,this.defaultConfigPath=null,this.defaultConfig={databasePath:"",csvFiles:[]}}async initialize(){this.defaultConfigPath=await this.api.getDefaultConfigPath();const r=await this.api.getDefaultDatabasePath();this.defaultConfig.databasePath=r}getDefaultConfigPath(){return this.defaultConfigPath}async createDefaultConfig(){try{return await this.api.createDefaultConfig(this.defaultConfig)}catch(r){return console.error("Error creating default config:",r),!1}}async loadConfig(r){try{return await this.api.loadConfig(r)}catch(i){return console.error("Error loading config:",i),null}}async saveConfig(r,i){try{return await this.api.saveConfig(r,i),!0}catch(s){return console.error("Error saving config:",s),!1}}validateConfig(r){return!(!r||!r.databasePath||!Array.isArray(r.csvFiles))}async selectConfigFile(){try{return await this.api.selectConfigFile({title:"Select Config File",filters:[{name:"JSON",extensions:["json"]}]})}catch(r){return console.error("Error selecting config file:",r),null}}async readConfigFileRaw(r){try{return await this.api.readConfigFileRaw(r)}catch(i){return console.error("Error reading config file raw:",i),null}}}function ki(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function qi(l){if(l.__esModule)return l;var r=l.default;if(typeof r=="function"){var i=function s(){return this instanceof s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(l).forEach(function(s){var u=Object.getOwnPropertyDescriptor(l,s);Object.defineProperty(i,s,u.get?u:{enumerable:!0,get:function(){return l[s]}})}),i}var gr={exports:{}};const Pi={},Si=Object.freeze(Object.defineProperty({__proto__:null,default:Pi},Symbol.toStringTag,{value:"Module"})),Jn=qi(Si);(function(l,r){var i=void 0,s=function(u){return i||(i=new Promise(function(c,h){var p=typeof u<"u"?u:{},g=p.onAbort;p.onAbort=function(e){h(new Error(e)),g&&g(e)},p.postRun=p.postRun||[],p.postRun.push(function(){c(p)}),l=void 0;var a;a||(a=typeof p<"u"?p:{});var v=typeof window=="object",k=typeof WorkerGlobalScope<"u",N=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";a.onRuntimeInitialized=function(){function e(d,w){switch(typeof w){case"boolean":si(d,w?1:0);break;case"number":ii(d,w);break;case"string":oi(d,w,-1,-1);break;case"object":if(w===null)Un(d);else if(w.length!=null){var M=Ct(w,Tt);li(d,M,w.length,-1),Lt(M)}else Dt(d,"Wrong API use : tried to return a value of an unknown type ("+w+").",-1);break;default:Un(d)}}function t(d,w){for(var M=[],R=0;R<d;R+=1){var z=$(w+4*R,"i32"),ne=$r(z);if(ne===1||ne===2)z=ri(z);else if(ne===3)z=ti(z);else if(ne===4){ne=z,z=ei(ne),ne=ni(ne);for(var Te=new Uint8Array(z),Me=0;Me<z;Me+=1)Te[Me]=j[ne+Me];z=Te}else z=null;M.push(z)}return M}function n(d,w){this.Qa=d,this.db=w,this.Oa=1,this.lb=[]}function o(d,w){if(this.db=w,w=dt(d)+1,this.eb=Zt(w),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Ue(d,L,this.eb,w),this.kb=this.eb,this.Za=this.pb=null}function f(d){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),d!=null){var w=this.filename,M="/",R=w;if(M&&(M=typeof M=="string"?M:zt(M),R=w?Ft(M+"/"+w):M),w=dn(!0,!0),R=Nr(R,w),d){if(typeof d=="string"){M=Array(d.length);for(var z=0,ne=d.length;z<ne;++z)M[z]=d.charCodeAt(z);d=M}St(R,w|146),M=nt(R,577),Tn(M,d,0,d.length,0),Qt(M),St(R,w)}}this.handleError(C(this.filename,m)),this.db=$(m,"i32"),Wn(this.db),this.fb={},this.Sa={}}var m=Xe(4),_=a.cwrap,C=_("sqlite3_open","number",["string","number"]),V=_("sqlite3_close_v2","number",["number"]),W=_("sqlite3_exec","number",["number","string","number","number","number"]),ce=_("sqlite3_changes","number",["number"]),ye=_("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Rn=_("sqlite3_sql","string",["number"]),Fr=_("sqlite3_normalized_sql","string",["number"]),Fn=_("sqlite3_prepare_v2","number",["number","number","number","number","number"]),jr=_("sqlite3_bind_text","number",["number","number","number","number","number"]),jn=_("sqlite3_bind_blob","number",["number","number","number","number","number"]),Ir=_("sqlite3_bind_double","number",["number","number","number"]),zr=_("sqlite3_bind_int","number",["number","number","number"]),Ur=_("sqlite3_bind_parameter_index","number",["number","string"]),xr=_("sqlite3_step","number",["number"]),Wr=_("sqlite3_errmsg","string",["number"]),Vr=_("sqlite3_column_count","number",["number"]),Br=_("sqlite3_data_count","number",["number"]),Qr=_("sqlite3_column_double","number",["number","number"]),In=_("sqlite3_column_text","string",["number","number"]),Hr=_("sqlite3_column_blob","number",["number","number"]),Xr=_("sqlite3_column_bytes","number",["number","number"]),Jr=_("sqlite3_column_type","number",["number","number"]),Yr=_("sqlite3_column_name","string",["number","number"]),Gr=_("sqlite3_reset","number",["number"]),Zr=_("sqlite3_clear_bindings","number",["number"]),Kr=_("sqlite3_finalize","number",["number"]),zn=_("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),$r=_("sqlite3_value_type","number",["number"]),ei=_("sqlite3_value_bytes","number",["number"]),ti=_("sqlite3_value_text","string",["number"]),ni=_("sqlite3_value_blob","number",["number"]),ri=_("sqlite3_value_double","number",["number"]),ii=_("sqlite3_result_double","",["number","number"]),Un=_("sqlite3_result_null","",["number"]),oi=_("sqlite3_result_text","",["number","string","number","number"]),li=_("sqlite3_result_blob","",["number","number","number","number"]),si=_("sqlite3_result_int","",["number","number"]),Dt=_("sqlite3_result_error","",["number","string","number"]),xn=_("sqlite3_aggregate_context","number",["number","number"]),Wn=_("RegisterExtensionFunctions","number",["number"]),Vn=_("sqlite3_update_hook","number",["number","number","number"]);n.prototype.bind=function(d){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(d)?this.Cb(d):d!=null&&typeof d=="object"?this.Db(d):!0},n.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var d=xr(this.Qa);switch(d){case 100:return!0;case 101:return!1;default:throw this.db.handleError(d)}},n.prototype.wb=function(d){return d==null&&(d=this.Oa,this.Oa+=1),Qr(this.Qa,d)},n.prototype.Gb=function(d){if(d==null&&(d=this.Oa,this.Oa+=1),d=In(this.Qa,d),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(d)},n.prototype.Hb=function(d){return d==null&&(d=this.Oa,this.Oa+=1),In(this.Qa,d)},n.prototype.getBlob=function(d){d==null&&(d=this.Oa,this.Oa+=1);var w=Xr(this.Qa,d);d=Hr(this.Qa,d);for(var M=new Uint8Array(w),R=0;R<w;R+=1)M[R]=j[d+R];return M},n.prototype.get=function(d,w){w=w||{},d!=null&&this.bind(d)&&this.step(),d=[];for(var M=Br(this.Qa),R=0;R<M;R+=1)switch(Jr(this.Qa,R)){case 1:var z=w.useBigInt?this.Gb(R):this.wb(R);d.push(z);break;case 2:d.push(this.wb(R));break;case 3:d.push(this.Hb(R));break;case 4:d.push(this.getBlob(R));break;default:d.push(null)}return d},n.prototype.getColumnNames=function(){for(var d=[],w=Vr(this.Qa),M=0;M<w;M+=1)d.push(Yr(this.Qa,M));return d},n.prototype.getAsObject=function(d,w){d=this.get(d,w),w=this.getColumnNames();for(var M={},R=0;R<w.length;R+=1)M[w[R]]=d[R];return M},n.prototype.getSQL=function(){return Rn(this.Qa)},n.prototype.getNormalizedSQL=function(){return Fr(this.Qa)},n.prototype.run=function(d){return d!=null&&this.bind(d),this.step(),this.reset()},n.prototype.sb=function(d,w){w==null&&(w=this.Oa,this.Oa+=1),d=fn(d);var M=Ct(d,Tt);this.lb.push(M),this.db.handleError(jr(this.Qa,w,M,d.length-1,0))},n.prototype.Bb=function(d,w){w==null&&(w=this.Oa,this.Oa+=1);var M=Ct(d,Tt);this.lb.push(M),this.db.handleError(jn(this.Qa,w,M,d.length,0))},n.prototype.rb=function(d,w){w==null&&(w=this.Oa,this.Oa+=1),this.db.handleError((d===(d|0)?zr:Ir)(this.Qa,w,d))},n.prototype.Eb=function(d){d==null&&(d=this.Oa,this.Oa+=1),jn(this.Qa,d,0,0,0)},n.prototype.tb=function(d,w){switch(w==null&&(w=this.Oa,this.Oa+=1),typeof d){case"string":this.sb(d,w);return;case"number":this.rb(d,w);return;case"bigint":this.sb(d.toString(),w);return;case"boolean":this.rb(d+0,w);return;case"object":if(d===null){this.Eb(w);return}if(d.length!=null){this.Bb(d,w);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+d+")."},n.prototype.Db=function(d){var w=this;return Object.keys(d).forEach(function(M){var R=Ur(w.Qa,M);R!==0&&w.tb(d[M],R)}),!0},n.prototype.Cb=function(d){for(var w=0;w<d.length;w+=1)this.tb(d[w],w+1);return!0},n.prototype.reset=function(){return this.freemem(),Zr(this.Qa)===0&&Gr(this.Qa)===0},n.prototype.freemem=function(){for(var d;(d=this.lb.pop())!==void 0;)Lt(d)},n.prototype.free=function(){this.freemem();var d=Kr(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,d},o.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var d=gt(),w=Xe(4);ht(m),ht(w);try{this.db.handleError(Fn(this.db.db,this.kb,-1,m,w)),this.kb=$(w,"i32");var M=$(m,"i32");return M===0?(this.mb(),{done:!0}):(this.Za=new n(M,this.db),this.db.fb[M]=this.Za,{value:this.Za,done:!1})}catch(R){throw this.pb=Rt(this.kb),this.mb(),R}finally{_t(d)}},o.prototype.mb=function(){Lt(this.eb),this.eb=null},o.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Rt(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(o.prototype[Symbol.iterator]=function(){return this}),f.prototype.run=function(d,w){if(!this.db)throw"Database closed";if(w){d=this.prepare(d,w);try{d.step()}finally{d.free()}}else this.handleError(W(this.db,d,0,0,m));return this},f.prototype.exec=function(d,w,M){if(!this.db)throw"Database closed";var R=gt(),z=null;try{var ne=Yt(d),Te=Xe(4);for(d=[];$(ne,"i8")!==0;){ht(m),ht(Te),this.handleError(Fn(this.db,ne,-1,m,Te));var Me=$(m,"i32");if(ne=$(Te,"i32"),Me!==0){var qe=null;for(z=new n(Me,this),w!=null&&z.bind(w);z.step();)qe===null&&(qe={columns:z.getColumnNames(),values:[]},d.push(qe)),qe.values.push(z.get(null,M));z.free()}}return d}catch(Ce){throw z&&z.free(),Ce}finally{_t(R)}},f.prototype.each=function(d,w,M,R,z){typeof w=="function"&&(R=M,M=w,w=void 0),d=this.prepare(d,w);try{for(;d.step();)M(d.getAsObject(null,z))}finally{d.free()}if(typeof R=="function")return R()},f.prototype.prepare=function(d,w){if(ht(m),this.handleError(ye(this.db,d,-1,m,0)),d=$(m,"i32"),d===0)throw"Nothing to prepare";var M=new n(d,this);return w!=null&&M.bind(w),this.fb[d]=M},f.prototype.iterateStatements=function(d){return new o(d,this)},f.prototype.export=function(){Object.values(this.fb).forEach(function(w){w.free()}),Object.values(this.Sa).forEach(He),this.Sa={},this.handleError(V(this.db));var d=Tr(this.filename);return this.handleError(C(this.filename,m)),this.db=$(m,"i32"),Wn(this.db),d},f.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(d){d.free()}),Object.values(this.Sa).forEach(He),this.Sa={},this.Ya&&(He(this.Ya),this.Ya=void 0),this.handleError(V(this.db)),Pn("/"+this.filename),this.db=null)},f.prototype.handleError=function(d){if(d===0)return null;throw d=Wr(this.db),Error(d)},f.prototype.getRowsModified=function(){return ce(this.db)},f.prototype.create_function=function(d,w){Object.prototype.hasOwnProperty.call(this.Sa,d)&&(He(this.Sa[d]),delete this.Sa[d]);var M=bt(function(R,z,ne){z=t(z,ne);try{var Te=w.apply(null,z)}catch(Me){Dt(R,Me,-1);return}e(R,Te)},"viii");return this.Sa[d]=M,this.handleError(zn(this.db,d,w.length,1,0,M,0,0,0)),this},f.prototype.create_aggregate=function(d,w){var M=w.init||function(){return null},R=w.finalize||function(qe){return qe},z=w.step;if(!z)throw"An aggregate function must have a step function in "+d;var ne={};Object.hasOwnProperty.call(this.Sa,d)&&(He(this.Sa[d]),delete this.Sa[d]),w=d+"__finalize",Object.hasOwnProperty.call(this.Sa,w)&&(He(this.Sa[w]),delete this.Sa[w]);var Te=bt(function(qe,Ce,$t){var Ke=xn(qe,1);Object.hasOwnProperty.call(ne,Ke)||(ne[Ke]=M()),Ce=t(Ce,$t),Ce=[ne[Ke]].concat(Ce);try{ne[Ke]=z.apply(null,Ce)}catch(ai){delete ne[Ke],Dt(qe,ai,-1)}},"viii"),Me=bt(function(qe){var Ce=xn(qe,1);try{var $t=R(ne[Ce])}catch(Ke){delete ne[Ce],Dt(qe,Ke,-1);return}e(qe,$t),delete ne[Ce]},"vi");return this.Sa[d]=Te,this.Sa[w]=Me,this.handleError(zn(this.db,d,z.length-1,1,0,0,Te,Me,0)),this},f.prototype.updateHook=function(d){this.Ya&&(Vn(this.db,0,0),He(this.Ya),this.Ya=void 0),d&&(this.Ya=bt(function(w,M,R,z,ne){switch(M){case 18:w="insert";break;case 23:w="update";break;case 9:w="delete";break;default:throw"unknown operationCode in updateHook callback: "+M}if(R=R?fe(L,R):"",z=z?fe(L,z):"",ne>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";d(w,R,z,Number(ne))},"viiiij"),Vn(this.db,this.Ya,0))},a.Database=f};var y={...a},S="./this.program",T=(e,t)=>{throw t},X="",oe,ee;if(N){var se=Jn;X=__dirname+"/",ee=e=>(e=Ee(e)?new URL(e):e,se.readFileSync(e)),oe=async e=>(e=Ee(e)?new URL(e):e,se.readFileSync(e,void 0)),!a.thisProgram&&1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),l.exports=a,T=(e,t)=>{throw process.exitCode=e,t}}else(v||k)&&(k?X=self.location.href:typeof document<"u"&&document.currentScript&&(X=document.currentScript.src),X=X.startsWith("blob:")?"":X.slice(0,X.replace(/[?#].*/,"").lastIndexOf("/")+1),k&&(ee=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),oe=async e=>{if(Ee(e))return new Promise((n,o)=>{var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?n(f.response):o(f.status)},f.onerror=o,f.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var I=a.print||console.log.bind(console),te=a.printErr||console.error.bind(console);Object.assign(a,y),y=null,a.thisProgram&&(S=a.thisProgram);var re=a.wasmBinary,Y,F=!1,Q,j,L,B,A,O,K,ue,ge,Ee=e=>e.startsWith("file://");function Le(){var e=Y.buffer;a.HEAP8=j=new Int8Array(e),a.HEAP16=B=new Int16Array(e),a.HEAPU8=L=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU32=O=new Uint32Array(e),a.HEAPF32=K=new Float32Array(e),a.HEAPF64=ge=new Float64Array(e),a.HEAP64=ue=new BigInt64Array(e),a.HEAPU64=new BigUint64Array(e)}var pe=0,Se=null;function ke(e){var t;throw(t=a.onAbort)==null||t.call(a,e),e="Aborted("+e+")",te(e),F=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var Fe;async function we(e){if(!re)try{var t=await oe(e);return new Uint8Array(t)}catch{}if(e==Fe&&re)e=new Uint8Array(re);else if(ee)e=ee(e);else throw"both async and sync fetching of the wasm failed";return e}async function be(e,t){try{var n=await we(e);return await WebAssembly.instantiate(n,t)}catch(o){te(`failed to asynchronously prepare wasm: ${o}`),ke(o)}}async function je(e){var t=Fe;if(!re&&typeof WebAssembly.instantiateStreaming=="function"&&!Ee(t)&&!N)try{var n=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,e)}catch(o){te(`wasm streaming compile failed: ${o}`),te("falling back to ArrayBuffer instantiation")}return be(t,e)}class me{constructor(t){Oe(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var Ie=e=>{for(;0<e.length;)e.shift()(a)},de=[],ie=[],H=()=>{var e=a.preRun.shift();ie.unshift(e)};function $(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return j[e];case"i8":return j[e];case"i16":return B[e>>1];case"i32":return A[e>>2];case"i64":return ue[e>>3];case"float":return K[e>>2];case"double":return ge[e>>3];case"*":return O[e>>2];default:ke(`invalid type for getValue: ${t}`)}}var ze=a.noExitRuntime||!0;function ht(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":j[e]=0;break;case"i8":j[e]=0;break;case"i16":B[e>>1]=0;break;case"i32":A[e>>2]=0;break;case"i64":ue[e>>3]=BigInt(0);break;case"float":K[e>>2]=0;break;case"double":ge[e>>3]=0;break;case"*":O[e>>2]=0;break;default:ke(`invalid type for setValue: ${t}`)}}var ln=typeof TextDecoder<"u"?new TextDecoder:void 0,fe=(e,t=0,n=NaN)=>{var o=t+n;for(n=t;e[n]&&!(n>=o);)++n;if(16<n-t&&e.buffer&&ln)return ln.decode(e.subarray(t,n));for(o="";t<n;){var f=e[t++];if(f&128){var m=e[t++]&63;if((f&224)==192)o+=String.fromCharCode((f&31)<<6|m);else{var _=e[t++]&63;f=(f&240)==224?(f&15)<<12|m<<6|_:(f&7)<<18|m<<12|_<<6|e[t++]&63,65536>f?o+=String.fromCharCode(f):(f-=65536,o+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else o+=String.fromCharCode(f)}return o},Rt=(e,t)=>e?fe(L,e,t):"",sn=(e,t)=>{for(var n=0,o=e.length-1;0<=o;o--){var f=e[o];f==="."?e.splice(o,1):f===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},Ft=e=>{var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return(e=sn(e.split("/").filter(o=>!!o),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},an=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},Et=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],wr=()=>{if(N){var e=Jn;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},un=e=>{(un=wr())(e)},vr=(...e)=>{for(var t="",n=!1,o=e.length-1;-1<=o&&!n;o--){if(n=0<=o?e[o]:"/",typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,n=n.charAt(0)==="/"}return t=sn(t.split("/").filter(f=>!!f),!n).join("/"),(n?"/":"")+t||"."},jt=[],dt=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++n):t+=3}return t},Ue=(e,t,n,o)=>{if(!(0<o))return 0;var f=n;o=n+o-1;for(var m=0;m<e.length;++m){var _=e.charCodeAt(m);if(55296<=_&&57343>=_){var C=e.charCodeAt(++m);_=65536+((_&1023)<<10)|C&1023}if(127>=_){if(n>=o)break;t[n++]=_}else{if(2047>=_){if(n+1>=o)break;t[n++]=192|_>>6}else{if(65535>=_){if(n+2>=o)break;t[n++]=224|_>>12}else{if(n+3>=o)break;t[n++]=240|_>>18,t[n++]=128|_>>12&63}t[n++]=128|_>>6&63}t[n++]=128|_&63}}return t[n]=0,n-f},fn=(e,t)=>{var n=Array(dt(e)+1);return e=Ue(e,n,0,n.length),t&&(n.length=e),n},cn=[];function hn(e,t){cn[e]={input:[],output:[],cb:t},Vt(e,yr)}var yr={open(e){var t=cn[e.node.rdev];if(!t)throw new P(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,n,o){if(!e.tty||!e.tty.cb.xb)throw new P(60);for(var f=0,m=0;m<o;m++){try{var _=e.tty.cb.xb(e.tty)}catch{throw new P(29)}if(_===void 0&&f===0)throw new P(6);if(_==null)break;f++,t[n+m]=_}return f&&(e.node.atime=Date.now()),f},write(e,t,n,o){if(!e.tty||!e.tty.cb.qb)throw new P(60);try{for(var f=0;f<o;f++)e.tty.cb.qb(e.tty,t[n+f])}catch{throw new P(29)}return o&&(e.node.mtime=e.node.ctime=Date.now()),f}},Er={xb(){e:{if(!jt.length){var e=null;if(N){var t=Buffer.alloc(256),n=0,o=process.stdin.fd;try{n=se.readSync(o,t,0,256)}catch(f){if(f.toString().includes("EOF"))n=0;else throw f}0<n&&(e=t.slice(0,n).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}jt=fn(e,!0)}e=jt.shift()}return e},qb(e,t){t===null||t===10?(I(fe(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(I(fe(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},kr={qb(e,t){t===null||t===10?(te(fe(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(te(fe(e.output)),e.output=[])}},U={Wa:null,Xa(){return U.createNode(null,"/",16895,0)},createNode(e,t,n,o){if((n&61440)===24576||(n&61440)===4096)throw new P(63);return U.Wa||(U.Wa={dir:{node:{Ta:U.La.Ta,Ua:U.La.Ua,lookup:U.La.lookup,hb:U.La.hb,rename:U.La.rename,unlink:U.La.unlink,rmdir:U.La.rmdir,readdir:U.La.readdir,symlink:U.La.symlink},stream:{Va:U.Ma.Va}},file:{node:{Ta:U.La.Ta,Ua:U.La.Ua},stream:{Va:U.Ma.Va,read:U.Ma.read,write:U.Ma.write,ib:U.Ma.ib,jb:U.Ma.jb}},link:{node:{Ta:U.La.Ta,Ua:U.La.Ua,readlink:U.La.readlink},stream:{}},ub:{node:{Ta:U.La.Ta,Ua:U.La.Ua},stream:Mr}}),n=gn(e,t,n,o),ve(n.mode)?(n.La=U.Wa.dir.node,n.Ma=U.Wa.dir.stream,n.Na={}):(n.mode&61440)===32768?(n.La=U.Wa.file.node,n.Ma=U.Wa.file.stream,n.Ra=0,n.Na=null):(n.mode&61440)===40960?(n.La=U.Wa.link.node,n.Ma=U.Wa.link.stream):(n.mode&61440)===8192&&(n.La=U.Wa.ub.node,n.Ma=U.Wa.ub.stream),n.atime=n.mtime=n.ctime=Date.now(),e&&(e.Na[t]=n,e.atime=e.mtime=e.ctime=n.atime),n},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ve(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var n of["mode","atime","mtime","ctime"])t[n]!=null&&(e[n]=t[n]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(n=e.Na,e.Na=new Uint8Array(t),n&&e.Na.set(n.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw U.vb},hb(e,t,n,o){return U.createNode(e,t,n,o)},rename(e,t,n){try{var o=Ye(t,n)}catch{}if(o){if(ve(e.mode))for(var f in o.Na)throw new P(55);xt(o)}delete e.parent.Na[e.name],t.Na[n]=e,e.name=n,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var n=Ye(e,t),o;for(o in n.Na)throw new P(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,n){return e=U.createNode(e,t,41471,0),e.link=n,e},readlink(e){if((e.mode&61440)!==40960)throw new P(28);return e.link}},Ma:{read(e,t,n,o,f){var m=e.node.Na;if(f>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-f,o),8<e&&m.subarray)t.set(m.subarray(f,f+e),n);else for(o=0;o<e;o++)t[n+o]=m[f+o];return e},write(e,t,n,o,f,m){if(t.buffer===j.buffer&&(m=!1),!o)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(m)return e.Na=t.subarray(n,n+o),e.Ra=o;if(e.Ra===0&&f===0)return e.Na=t.slice(n,n+o),e.Ra=o;if(f+o<=e.Ra)return e.Na.set(t.subarray(n,n+o),f),o}m=f+o;var _=e.Na?e.Na.length:0;if(_>=m||(m=Math.max(m,_*(1048576>_?2:1.125)>>>0),_!=0&&(m=Math.max(m,256)),_=e.Na,e.Na=new Uint8Array(m),0<e.Ra&&e.Na.set(_.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(n,n+o),f);else for(m=0;m<o;m++)e.Na[f+m]=t[n+m];return e.Ra=Math.max(e.Ra,f+o),o},Va(e,t,n){if(n===1?t+=e.position:n===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new P(28);return t},ib(e,t,n,o,f){if((e.node.mode&61440)!==32768)throw new P(43);if(e=e.node.Na,f&2||!e||e.buffer!==j.buffer){f=!0,o=65536*Math.ceil(t/65536);var m=Dn(65536,o);if(m&&L.fill(0,m,m+o),o=m,!o)throw new P(48);e&&((0<n||n+t<e.length)&&(e.subarray?e=e.subarray(n,n+t):e=Array.prototype.slice.call(e,n,n+t)),j.set(e,o))}else f=!1,o=e.byteOffset;return{Kb:o,Ab:f}},jb(e,t,n,o){return U.Ma.write(e,t,0,o,n,!1),0}}},dn=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},It=null,mn={},et=[],qr=1,Be=null,pn=!1,bn=!0,_n={},P=class{constructor(e){Oe(this,"name","ErrnoError");this.Pa=e}},Pr=class{constructor(){Oe(this,"gb",{});Oe(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},Sr=class{constructor(e,t,n,o){Oe(this,"La",{});Oe(this,"Ma",{});Oe(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=qr++,this.name=t,this.mode=n,this.rdev=o,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function Ae(e,t={}){if(!e)throw new P(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var n=0;e:for(;40>n;n++){e=e.split("/").filter(C=>!!C);for(var o=It,f="/",m=0;m<e.length;m++){var _=m===e.length-1;if(_&&t.parent)break;if(e[m]!==".")if(e[m]==="..")f=an(f),o=o.parent;else{f=Ft(f+"/"+e[m]);try{o=Ye(o,e[m])}catch(C){if((C==null?void 0:C.Pa)===44&&_&&t.Jb)return{path:f};throw C}if(!o.ab||_&&!t.nb||(o=o.ab.root),(o.mode&61440)===40960&&(!_||t.$a)){if(!o.La.readlink)throw new P(52);o=o.La.readlink(o),o.charAt(0)==="/"||(o=an(f)+"/"+o),e=o+"/"+e.slice(m+1).join("/");continue e}}}return{path:f,node:o}}throw new P(32)}function zt(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Ut(e,t){for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%Be.length}function xt(e){var t=Ut(e.parent.id,e.name);if(Be[t]===e)Be[t]=e.bb;else for(t=Be[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function Ye(e,t){var n=ve(e.mode)?(n=tt(e,"x"))?n:e.La.lookup?0:2:54;if(n)throw new P(n);for(n=Be[Ut(e.id,t)];n;n=n.bb){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return e.La.lookup(e,t)}function gn(e,t,n,o){return e=new Sr(e,t,n,o),t=Ut(e.parent.id,e.name),e.bb=Be[t],Be[t]=e}function ve(e){return(e&61440)===16384}function wn(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function tt(e,t){if(bn)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function vn(e,t){if(!ve(e.mode))return 54;try{return Ye(e,t),20}catch{}return tt(e,"wx")}function yn(e,t,n){try{var o=Ye(e,t)}catch(f){return f.Pa}if(e=tt(e,"wx"))return e;if(n){if(!ve(o.mode))return 54;if(o===o.parent||zt(o)==="/")return 10}else if(ve(o.mode))return 31;return 0}function kt(e){if(!e)throw new P(63);return e}function _e(e){if(e=et[e],!e)throw new P(8);return e}function En(e,t=-1){if(e=Object.assign(new Pr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!et[t])break e;throw new P(33)}return e.fd=t,et[t]=e}function Ar(e,t=-1){var n,o;return e=En(e,t),(o=(n=e.Ma)==null?void 0:n.Rb)==null||o.call(n,e),e}function Wt(e,t,n){var o=e==null?void 0:e.Ma.Ua;e=o?e:t,o??(o=t.La.Ua),kt(o),o(e,n)}var Mr={open(e){var t,n;e.Ma=mn[e.node.rdev].Ma,(n=(t=e.Ma).open)==null||n.call(t,e)},Va(){throw new P(70)}};function Vt(e,t){mn[e]={Ma:t}}function kn(e,t){var n=t==="/";if(n&&It)throw new P(10);if(!n&&t){var o=Ae(t,{nb:!1});if(t=o.path,o=o.node,o.ab)throw new P(10);if(!ve(o.mode))throw new P(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,n?It=e:o&&(o.ab=t,o.Xa&&o.Xa.Ib.push(t))}function qt(e,t,n){var o=Ae(e,{parent:!0}).node;if(e=Et(e),!e)throw new P(28);if(e==="."||e==="..")throw new P(20);var f=vn(o,e);if(f)throw new P(f);if(!o.La.hb)throw new P(63);return o.La.hb(o,e,t,n)}function Nr(e,t=438){return qt(e,t&4095|32768,0)}function De(e,t=511){return qt(e,t&1023|16384,0)}function Pt(e,t,n){typeof n>"u"&&(n=t,t=438),qt(e,t|8192,n)}function Bt(e,t){if(!vr(e))throw new P(44);var n=Ae(t,{parent:!0}).node;if(!n)throw new P(44);t=Et(t);var o=vn(n,t);if(o)throw new P(o);if(!n.La.symlink)throw new P(63);n.La.symlink(n,t,e)}function qn(e){var t=Ae(e,{parent:!0}).node;e=Et(e);var n=Ye(t,e),o=yn(t,e,!0);if(o)throw new P(o);if(!t.La.rmdir)throw new P(63);if(n.ab)throw new P(10);t.La.rmdir(t,e),xt(n)}function Pn(e){var t=Ae(e,{parent:!0}).node;if(!t)throw new P(44);e=Et(e);var n=Ye(t,e),o=yn(t,e,!1);if(o)throw new P(o);if(!t.La.unlink)throw new P(63);if(n.ab)throw new P(10);t.La.unlink(t,e),xt(n)}function mt(e,t){return e=Ae(e,{$a:!t}).node,kt(e.La.Ta)(e)}function Sn(e,t,n,o){Wt(e,t,{mode:n&4095|t.mode&-4096,ctime:Date.now(),Fb:o})}function St(e,t){e=typeof e=="string"?Ae(e,{$a:!0}).node:e,Sn(null,e,t)}function An(e,t,n){if(ve(t.mode))throw new P(31);if((t.mode&61440)!==32768)throw new P(28);var o=tt(t,"w");if(o)throw new P(o);Wt(e,t,{size:n,timestamp:Date.now()})}function nt(e,t,n=438){if(e==="")throw new P(44);if(typeof t=="string"){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof o>"u")throw Error(`Unknown file open mode: ${t}`);t=o}if(n=t&64?n&4095|32768:0,typeof e=="object")o=e;else{var f=e.endsWith("/");e=Ae(e,{$a:!(t&131072),Jb:!0}),o=e.node,e=e.path}var m=!1;if(t&64)if(o){if(t&128)throw new P(20)}else{if(f)throw new P(31);o=qt(e,n|511,0),m=!0}if(!o)throw new P(44);if((o.mode&61440)===8192&&(t&=-513),t&65536&&!ve(o.mode))throw new P(54);if(!m&&(f=o?(o.mode&61440)===40960?32:ve(o.mode)&&(wn(t)!=="r"||t&576)?31:tt(o,wn(t)):44))throw new P(f);return t&512&&!m&&(f=o,f=typeof f=="string"?Ae(f,{$a:!0}).node:f,An(null,f,0)),t&=-131713,f=En({node:o,path:zt(o),flags:t,seekable:!0,position:0,Ma:o.Ma,Lb:[],error:!1}),f.Ma.open&&f.Ma.open(f),m&&St(o,n&511),!a.logReadFiles||t&1||e in _n||(_n[e]=1),f}function Qt(e){if(e.fd===null)throw new P(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{et[e.fd]=null}e.fd=null}function Mn(e,t,n){if(e.fd===null)throw new P(8);if(!e.seekable||!e.Ma.Va)throw new P(70);if(n!=0&&n!=1&&n!=2)throw new P(28);e.position=e.Ma.Va(e,t,n),e.Lb=[]}function Nn(e,t,n,o,f){if(0>o||0>f)throw new P(28);if(e.fd===null)throw new P(8);if((e.flags&2097155)===1)throw new P(8);if(ve(e.node.mode))throw new P(31);if(!e.Ma.read)throw new P(28);var m=typeof f<"u";if(!m)f=e.position;else if(!e.seekable)throw new P(70);return t=e.Ma.read(e,t,n,o,f),m||(e.position+=t),t}function Tn(e,t,n,o,f){if(0>o||0>f)throw new P(28);if(e.fd===null)throw new P(8);if(!(e.flags&2097155))throw new P(8);if(ve(e.node.mode))throw new P(31);if(!e.Ma.write)throw new P(28);e.seekable&&e.flags&1024&&Mn(e,0,2);var m=typeof f<"u";if(!m)f=e.position;else if(!e.seekable)throw new P(70);return t=e.Ma.write(e,t,n,o,f,void 0),m||(e.position+=t),t}function Tr(e){var t,n=nt(e,n||0);e=mt(e).size;var o=new Uint8Array(e);return Nn(n,o,0,e,0),t=o,Qt(n),t}function Qe(e,t,n){e=Ft("/dev/"+e);var o=dn(!!t,!!n);Qe.yb??(Qe.yb=64);var f=Qe.yb++<<8|0;Vt(f,{open(m){m.seekable=!1},close(){var m;(m=n==null?void 0:n.buffer)!=null&&m.length&&n(10)},read(m,_,C,V){for(var W=0,ce=0;ce<V;ce++){try{var ye=t()}catch{throw new P(29)}if(ye===void 0&&W===0)throw new P(6);if(ye==null)break;W++,_[C+ce]=ye}return W&&(m.node.atime=Date.now()),W},write(m,_,C,V){for(var W=0;W<V;W++)try{n(_[C+W])}catch{throw new P(29)}return V&&(m.node.mtime=m.node.ctime=Date.now()),W}}),Pt(e,o,f)}var le={};function Ge(e,t,n){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":_e(e).path,t.length==0){if(!n)throw new P(44);return e}return e+"/"+t}function At(e,t){A[e>>2]=t.dev,A[e+4>>2]=t.mode,O[e+8>>2]=t.nlink,A[e+12>>2]=t.uid,A[e+16>>2]=t.gid,A[e+20>>2]=t.rdev,ue[e+24>>3]=BigInt(t.size),A[e+32>>2]=4096,A[e+36>>2]=t.blocks;var n=t.atime.getTime(),o=t.mtime.getTime(),f=t.ctime.getTime();return ue[e+40>>3]=BigInt(Math.floor(n/1e3)),O[e+48>>2]=n%1e3*1e6,ue[e+56>>3]=BigInt(Math.floor(o/1e3)),O[e+64>>2]=o%1e3*1e6,ue[e+72>>3]=BigInt(Math.floor(f/1e3)),O[e+80>>2]=f%1e3*1e6,ue[e+88>>3]=BigInt(t.ino),0}var Mt=void 0,Nt=()=>{var e=A[+Mt>>2];return Mt+=4,e},Ht=0,Cr=[0,31,60,91,121,152,182,213,244,274,305,335],Lr=[0,31,59,90,120,151,181,212,243,273,304,334],pt={},Cn=e=>{var t;Q=e,ze||0<Ht||((t=a.onExit)==null||t.call(a,e),F=!0),T(e,new me(e))},Dr=e=>{if(!F)try{if(e(),!(ze||0<Ht))try{Q=e=Q,Cn(e)}catch(t){t instanceof me||t=="unwind"||T(1,t)}}catch(t){t instanceof me||t=="unwind"||T(1,t)}},Xt={},Ln=()=>{if(!Jt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"},t;for(t in Xt)Xt[t]===void 0?delete e[t]:e[t]=Xt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Jt=n}return Jt},Jt,Yt=e=>{var t=dt(e)+1,n=Xe(t);return Ue(e,L,n,t),n},Or=(e,t,n,o)=>{var f={string:W=>{var ce=0;return W!=null&&W!==0&&(ce=Yt(W)),ce},array:W=>{var ce=Xe(W.length);return j.set(W,ce),ce}};e=a["_"+e];var m=[],_=0;if(o)for(var C=0;C<o.length;C++){var V=f[n[C]];V?(_===0&&(_=gt()),m[C]=V(o[C])):m[C]=o[C]}return n=e(...m),n=function(W){return _!==0&&_t(_),t==="string"?W?fe(L,W):"":t==="boolean"?!!W:W}(n)},Tt=0,Ct=(e,t)=>(t=t==1?Xe(e.length):Zt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),L.set(e,t),t),Ze,Gt=[],xe,He=e=>{Ze.delete(xe.get(e)),xe.set(e,null),Gt.push(e)},bt=(e,t)=>{if(!Ze){Ze=new WeakMap;var n=xe.length;if(Ze)for(var o=0;o<0+n;o++){var f=xe.get(o);f&&Ze.set(f,o)}}if(n=Ze.get(e)||0)return n;if(Gt.length)n=Gt.pop();else{try{xe.grow(1)}catch(V){throw V instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":V}n=xe.length-1}try{xe.set(n,e)}catch(V){if(!(V instanceof TypeError))throw V;if(typeof WebAssembly.Function=="function"){var m=WebAssembly.Function;o={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},f={parameters:[],results:t[0]=="v"?[]:[o[t[0]]]};for(var _=1;_<t.length;++_)f.parameters.push(o[t[_]]);t=new m(f,e)}else{o=[1],f=t.slice(0,1),t=t.slice(1),_={i:127,p:127,j:126,f:125,d:124,e:111},o.push(96);var C=t.length;128>C?o.push(C):o.push(C%128|128,C>>7);for(m of t)o.push(_[m]);f=="v"?o.push(0):o.push(1,_[f]),t=[0,97,115,109,1,0,0,0,1],m=o.length,128>m?t.push(m):t.push(m%128|128,m>>7),t.push(...o),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}xe.set(n,t)}return Ze.set(e,n),n};Be=Array(4096),kn(U,"/"),De("/tmp"),De("/home"),De("/home/web_user"),function(){De("/dev"),Vt(259,{read:()=>0,write:(o,f,m,_)=>_,Va:()=>0}),Pt("/dev/null",259),hn(1280,Er),hn(1536,kr),Pt("/dev/tty",1280),Pt("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(un(e),t=e.byteLength),e[--t]);Qe("random",n),Qe("urandom",n),De("/dev/shm"),De("/dev/shm/tmp")}(),function(){De("/proc");var e=De("/proc/self");De("/proc/self/fd"),kn({Xa(){var t=gn(e,"fd",16895,73);return t.Ma={Va:U.Ma.Va},t.La={lookup(n,o){n=+o;var f=_e(n);return n={parent:null,Xa:{zb:"fake"},La:{readlink:()=>f.path},id:n+1},n.parent=n},readdir(){return Array.from(et.entries()).filter(([,n])=>n).map(([n])=>n.toString())}},t}},"/proc/self/fd")}(),U.vb=new P(44),U.vb.stack="<generic error, no stack>";var Rr={a:(e,t,n,o)=>ke(`Assertion failed: ${e?fe(L,e):""}, at: `+[t?t?fe(L,t):"":"unknown filename",n,o?o?fe(L,o):"":"unknown function"]),i:function(e,t){try{return e=e?fe(L,e):"",St(e,t),0}catch(n){if(typeof le>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},L:function(e,t,n){try{if(t=t?fe(L,t):"",t=Ge(e,t),n&-8)return-28;var o=Ae(t,{$a:!0}).node;return o?(e="",n&4&&(e+="r"),n&2&&(e+="w"),n&1&&(e+="x"),e&&tt(o,e)?-2:0):-44}catch(f){if(typeof le>"u"||f.name!=="ErrnoError")throw f;return-f.Pa}},j:function(e,t){try{var n=_e(e);return Sn(n,n.node,t,!1),0}catch(o){if(typeof le>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},h:function(e){try{var t=_e(e);return Wt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(n){if(typeof le>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},b:function(e,t,n){Mt=n;try{var o=_e(e);switch(t){case 0:var f=Nt();if(0>f)break;for(;et[f];)f++;return Ar(o,f).fd;case 1:case 2:return 0;case 3:return o.flags;case 4:return f=Nt(),o.flags|=f,0;case 12:return f=Nt(),B[f+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(m){if(typeof le>"u"||m.name!=="ErrnoError")throw m;return-m.Pa}},g:function(e,t){try{var n=_e(e),o=n.node,f=n.Ma.Ta;e=f?n:o,f??(f=o.La.Ta),kt(f);var m=f(e);return At(t,m)}catch(_){if(typeof le>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var n=_e(e);if(0>t||!(n.flags&2097155))throw new P(28);return An(n,n.node,t),0}catch(o){if(typeof le>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},G:function(e,t){try{if(t===0)return-28;var n=dt("/")+1;return t<n?-68:(Ue("/",L,e,t),n)}catch(o){if(typeof le>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},K:function(e,t){try{return e=e?fe(L,e):"",At(t,mt(e,!0))}catch(n){if(typeof le>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},C:function(e,t,n){try{return t=t?fe(L,t):"",t=Ge(e,t),De(t,n),0}catch(o){if(typeof le>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},J:function(e,t,n,o){try{t=t?fe(L,t):"";var f=o&256;return t=Ge(e,t,o&4096),At(n,f?mt(t,!0):mt(t))}catch(m){if(typeof le>"u"||m.name!=="ErrnoError")throw m;return-m.Pa}},x:function(e,t,n,o){Mt=o;try{t=t?fe(L,t):"",t=Ge(e,t);var f=o?Nt():0;return nt(t,n,f).fd}catch(m){if(typeof le>"u"||m.name!=="ErrnoError")throw m;return-m.Pa}},v:function(e,t,n,o){try{if(t=t?fe(L,t):"",t=Ge(e,t),0>=o)return-28;var f=Ae(t).node;if(!f)throw new P(44);if(!f.La.readlink)throw new P(28);var m=f.La.readlink(f),_=Math.min(o,dt(m)),C=j[n+_];return Ue(m,L,n,o+1),j[n+_]=C,_}catch(V){if(typeof le>"u"||V.name!=="ErrnoError")throw V;return-V.Pa}},u:function(e){try{return e=e?fe(L,e):"",qn(e),0}catch(t){if(typeof le>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?fe(L,e):"",At(t,mt(e))}catch(n){if(typeof le>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},r:function(e,t,n){try{return t=t?fe(L,t):"",t=Ge(e,t),n===0?Pn(t):n===512?qn(t):ke("Invalid flags passed to unlinkat"),0}catch(o){if(typeof le>"u"||o.name!=="ErrnoError")throw o;return-o.Pa}},q:function(e,t,n){try{t=t?fe(L,t):"",t=Ge(e,t,!0);var o=Date.now(),f,m;if(n){var _=O[n>>2]+4294967296*A[n+4>>2],C=A[n+8>>2];C==1073741823?f=o:C==1073741822?f=null:f=1e3*_+C/1e6,n+=16,_=O[n>>2]+4294967296*A[n+4>>2],C=A[n+8>>2],C==1073741823?m=o:C==1073741822?m=null:m=1e3*_+C/1e6}else m=f=o;if((m??f)!==null){e=f;var V=Ae(t,{$a:!0}).node;kt(V.La.Ua)(V,{atime:e,mtime:m})}return 0}catch(W){if(typeof le>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},m:()=>ke(""),l:()=>{ze=!1,Ht=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),A[t>>2]=e.getSeconds(),A[t+4>>2]=e.getMinutes(),A[t+8>>2]=e.getHours(),A[t+12>>2]=e.getDate(),A[t+16>>2]=e.getMonth(),A[t+20>>2]=e.getFullYear()-1900,A[t+24>>2]=e.getDay();var n=e.getFullYear();A[t+28>>2]=(n%4!==0||n%100===0&&n%400!==0?Lr:Cr)[e.getMonth()]+e.getDate()-1|0,A[t+36>>2]=-(60*e.getTimezoneOffset()),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();var o=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[t+32>>2]=(n!=o&&e.getTimezoneOffset()==Math.min(o,n))|0},y:function(e,t,n,o,f,m,_){f=-9007199254740992>f||9007199254740992<f?NaN:Number(f);try{if(isNaN(f))return 61;var C=_e(o);if(t&2&&!(n&2)&&(C.flags&2097155)!==2)throw new P(2);if((C.flags&2097155)===1)throw new P(2);if(!C.Ma.ib)throw new P(43);if(!e)throw new P(28);var V=C.Ma.ib(C,e,f,t,n),W=V.Kb;return A[m>>2]=V.Ab,O[_>>2]=W,0}catch(ce){if(typeof le>"u"||ce.name!=="ErrnoError")throw ce;return-ce.Pa}},z:function(e,t,n,o,f,m){m=-9007199254740992>m||9007199254740992<m?NaN:Number(m);try{var _=_e(f);if(n&2){if(n=m,(_.node.mode&61440)!==32768)throw new P(43);if(!(o&2)){var C=L.slice(e,e+t);_.Ma.jb&&_.Ma.jb(_,C,n,t,o)}}}catch(V){if(typeof le>"u"||V.name!=="ErrnoError")throw V;return-V.Pa}},n:(e,t)=>{if(pt[e]&&(clearTimeout(pt[e].id),delete pt[e]),!t)return 0;var n=setTimeout(()=>{delete pt[e],Dr(()=>On(e,performance.now()))},t);return pt[e]={id:n,Xb:t},0},B:(e,t,n,o)=>{var f=new Date().getFullYear(),m=new Date(f,0,1).getTimezoneOffset();f=new Date(f,6,1).getTimezoneOffset(),O[e>>2]=60*Math.max(m,f),A[t>>2]=+(m!=f),t=_=>{var C=Math.abs(_);return`UTC${0<=_?"-":"+"}${String(Math.floor(C/60)).padStart(2,"0")}${String(C%60).padStart(2,"0")}`},e=t(m),t=t(f),f<m?(Ue(e,L,n,17),Ue(t,L,o,17)):(Ue(e,L,o,17),Ue(t,L,n,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=L.length;if(e>>>=0,2147483648<e)return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);e:{o=(Math.min(2147483648,65536*Math.ceil(Math.max(e,o)/65536))-Y.buffer.byteLength+65535)/65536|0;try{Y.grow(o),Le();var f=1;break e}catch{}f=void 0}if(f)return!0}return!1},E:(e,t)=>{var n=0;return Ln().forEach((o,f)=>{var m=t+n;for(f=O[e+4*f>>2]=m,m=0;m<o.length;++m)j[f++]=o.charCodeAt(m);j[f]=0,n+=o.length+1}),0},F:(e,t)=>{var n=Ln();O[e>>2]=n.length;var o=0;return n.forEach(f=>o+=f.length+1),O[t>>2]=o,0},e:function(e){try{var t=_e(e);return Qt(t),0}catch(n){if(typeof le>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},p:function(e,t){try{var n=_e(e);return j[t]=n.tty?2:ve(n.mode)?3:(n.mode&61440)===40960?7:4,B[t+2>>1]=0,ue[t+8>>3]=BigInt(0),ue[t+16>>3]=BigInt(0),0}catch(o){if(typeof le>"u"||o.name!=="ErrnoError")throw o;return o.Pa}},w:function(e,t,n,o){try{e:{var f=_e(e);e=t;for(var m,_=t=0;_<n;_++){var C=O[e>>2],V=O[e+4>>2];e+=8;var W=Nn(f,j,C,V,m);if(0>W){var ce=-1;break e}if(t+=W,W<V)break;typeof m<"u"&&(m+=W)}ce=t}return O[o>>2]=ce,0}catch(ye){if(typeof le>"u"||ye.name!=="ErrnoError")throw ye;return ye.Pa}},D:function(e,t,n,o){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var f=_e(e);return Mn(f,t,n),ue[o>>3]=BigInt(f.position),f.ob&&t===0&&n===0&&(f.ob=null),0}catch(m){if(typeof le>"u"||m.name!=="ErrnoError")throw m;return m.Pa}},I:function(e){var n;try{var t=_e(e);return(n=t.Ma)!=null&&n.fsync?t.Ma.fsync(t):0}catch(o){if(typeof le>"u"||o.name!=="ErrnoError")throw o;return o.Pa}},t:function(e,t,n,o){try{e:{var f=_e(e);e=t;for(var m,_=t=0;_<n;_++){var C=O[e>>2],V=O[e+4>>2];e+=8;var W=Tn(f,j,C,V,m);if(0>W){var ce=-1;break e}if(t+=W,W<V)break;typeof m<"u"&&(m+=W)}ce=t}return O[o>>2]=ce,0}catch(ye){if(typeof le>"u"||ye.name!=="ErrnoError")throw ye;return ye.Pa}},k:Cn},D;(async function(){var n;function e(o){var f;return D=o.exports,Y=D.M,Le(),xe=D.O,pe--,(f=a.monitorRunDependencies)==null||f.call(a,pe),pe==0&&Se&&(o=Se,Se=null,o()),D}pe++,(n=a.monitorRunDependencies)==null||n.call(a,pe);var t={a:Rr};return a.instantiateWasm?new Promise(o=>{a.instantiateWasm(t,(f,m)=>{e(f),o(f.exports)})}):(Fe??(Fe=a.locateFile?a.locateFile("sql-wasm.wasm",X):X+"sql-wasm.wasm"),e((await je(t)).instance))})(),a._sqlite3_free=e=>(a._sqlite3_free=D.P)(e),a._sqlite3_value_text=e=>(a._sqlite3_value_text=D.Q)(e),a._sqlite3_prepare_v2=(e,t,n,o,f)=>(a._sqlite3_prepare_v2=D.R)(e,t,n,o,f),a._sqlite3_step=e=>(a._sqlite3_step=D.S)(e),a._sqlite3_reset=e=>(a._sqlite3_reset=D.T)(e),a._sqlite3_exec=(e,t,n,o,f)=>(a._sqlite3_exec=D.U)(e,t,n,o,f),a._sqlite3_finalize=e=>(a._sqlite3_finalize=D.V)(e),a._sqlite3_column_name=(e,t)=>(a._sqlite3_column_name=D.W)(e,t),a._sqlite3_column_text=(e,t)=>(a._sqlite3_column_text=D.X)(e,t),a._sqlite3_column_type=(e,t)=>(a._sqlite3_column_type=D.Y)(e,t),a._sqlite3_errmsg=e=>(a._sqlite3_errmsg=D.Z)(e),a._sqlite3_clear_bindings=e=>(a._sqlite3_clear_bindings=D._)(e),a._sqlite3_value_blob=e=>(a._sqlite3_value_blob=D.$)(e),a._sqlite3_value_bytes=e=>(a._sqlite3_value_bytes=D.aa)(e),a._sqlite3_value_double=e=>(a._sqlite3_value_double=D.ba)(e),a._sqlite3_value_int=e=>(a._sqlite3_value_int=D.ca)(e),a._sqlite3_value_type=e=>(a._sqlite3_value_type=D.da)(e),a._sqlite3_result_blob=(e,t,n,o)=>(a._sqlite3_result_blob=D.ea)(e,t,n,o),a._sqlite3_result_double=(e,t)=>(a._sqlite3_result_double=D.fa)(e,t),a._sqlite3_result_error=(e,t,n)=>(a._sqlite3_result_error=D.ga)(e,t,n),a._sqlite3_result_int=(e,t)=>(a._sqlite3_result_int=D.ha)(e,t),a._sqlite3_result_int64=(e,t)=>(a._sqlite3_result_int64=D.ia)(e,t),a._sqlite3_result_null=e=>(a._sqlite3_result_null=D.ja)(e),a._sqlite3_result_text=(e,t,n,o)=>(a._sqlite3_result_text=D.ka)(e,t,n,o),a._sqlite3_aggregate_context=(e,t)=>(a._sqlite3_aggregate_context=D.la)(e,t),a._sqlite3_column_count=e=>(a._sqlite3_column_count=D.ma)(e),a._sqlite3_data_count=e=>(a._sqlite3_data_count=D.na)(e),a._sqlite3_column_blob=(e,t)=>(a._sqlite3_column_blob=D.oa)(e,t),a._sqlite3_column_bytes=(e,t)=>(a._sqlite3_column_bytes=D.pa)(e,t),a._sqlite3_column_double=(e,t)=>(a._sqlite3_column_double=D.qa)(e,t),a._sqlite3_bind_blob=(e,t,n,o,f)=>(a._sqlite3_bind_blob=D.ra)(e,t,n,o,f),a._sqlite3_bind_double=(e,t,n)=>(a._sqlite3_bind_double=D.sa)(e,t,n),a._sqlite3_bind_int=(e,t,n)=>(a._sqlite3_bind_int=D.ta)(e,t,n),a._sqlite3_bind_text=(e,t,n,o,f)=>(a._sqlite3_bind_text=D.ua)(e,t,n,o,f),a._sqlite3_bind_parameter_index=(e,t)=>(a._sqlite3_bind_parameter_index=D.va)(e,t),a._sqlite3_sql=e=>(a._sqlite3_sql=D.wa)(e),a._sqlite3_normalized_sql=e=>(a._sqlite3_normalized_sql=D.xa)(e),a._sqlite3_changes=e=>(a._sqlite3_changes=D.ya)(e),a._sqlite3_close_v2=e=>(a._sqlite3_close_v2=D.za)(e),a._sqlite3_create_function_v2=(e,t,n,o,f,m,_,C,V)=>(a._sqlite3_create_function_v2=D.Aa)(e,t,n,o,f,m,_,C,V),a._sqlite3_update_hook=(e,t,n)=>(a._sqlite3_update_hook=D.Ba)(e,t,n),a._sqlite3_open=(e,t)=>(a._sqlite3_open=D.Ca)(e,t);var Zt=a._malloc=e=>(Zt=a._malloc=D.Da)(e),Lt=a._free=e=>(Lt=a._free=D.Ea)(e);a._RegisterExtensionFunctions=e=>(a._RegisterExtensionFunctions=D.Fa)(e);var Dn=(e,t)=>(Dn=D.Ga)(e,t),On=(e,t)=>(On=D.Ha)(e,t),_t=e=>(_t=D.Ia)(e),Xe=e=>(Xe=D.Ja)(e),gt=()=>(gt=D.Ka)();a.stackSave=()=>gt(),a.stackRestore=e=>_t(e),a.stackAlloc=e=>Xe(e),a.cwrap=(e,t,n,o)=>{var f=!n||n.every(m=>m==="number"||m==="boolean");return t!=="string"&&f&&!o?a["_"+e]:(...m)=>Or(e,t,n,m)},a.addFunction=bt,a.removeFunction=He,a.UTF8ToString=Rt,a.ALLOC_NORMAL=Tt,a.allocate=Ct,a.allocateUTF8OnStack=Yt;function Kt(){function e(){var f;if(a.calledRun=!0,!F){if(!a.noFSInit&&!pn){var t,n;pn=!0,o??(o=a.stdin),t??(t=a.stdout),n??(n=a.stderr),o?Qe("stdin",o):Bt("/dev/tty","/dev/stdin"),t?Qe("stdout",null,t):Bt("/dev/tty","/dev/stdout"),n?Qe("stderr",null,n):Bt("/dev/tty1","/dev/stderr"),nt("/dev/stdin",0),nt("/dev/stdout",1),nt("/dev/stderr",1)}if(D.N(),bn=!1,(f=a.onRuntimeInitialized)==null||f.call(a),a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;){var o=a.postRun.shift();de.unshift(o)}Ie(de)}}if(0<pe)Se=Kt;else{if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)H();Ie(ie),0<pe?Se=Kt:a.setStatus?(a.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>a.setStatus(""),1),e()},1)):e()}}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return Kt(),p}),i)};l.exports=s,l.exports.default=s})(gr);var Ai=gr.exports;const Mi=ki(Ai);class Ni{constructor(){this.db=null,this.sqlJs=null}async initialize(){if(!this.sqlJs){const i=window.location.protocol==="http:"?"/node_modules/sql.js/dist/sql-wasm.wasm":"./sql-wasm.wasm";this.sqlJs=await Mi({locateFile:s=>i})}}async loadFromFile(r,i){await this.initialize();try{const s=await i.readDatabase(r);if(s){const u=new Uint8Array(s);this.db=new this.sqlJs.Database(u)}else this.db=new this.sqlJs.Database;return!0}catch(s){return console.error("Error loading database:",s),this.db=new this.sqlJs.Database,!1}}createNew(){if(!this.sqlJs)throw new Error("SQL.js not initialized");this.db=new this.sqlJs.Database}createTable(r,i){if(!this.db)throw new Error("Database not initialized");const s=i.map(c=>{const h=c.type==="number"?"REAL":"TEXT";return`"${c.name}" ${h}`}).join(", "),u=`CREATE TABLE "${r}" (${s})`;this.db.run(u)}insertData(r,i,s){if(!this.db)throw new Error("Database not initialized");if(s.length===0)return;const u=i.map(g=>`"${g.name}"`).join(", "),c=i.map(()=>"?").join(", "),h=`INSERT INTO "${r}" (${u}) VALUES (${c})`,p=this.db.prepare(h);for(const g of s){const a=i.map(v=>{const k=g[v.name];return k??null});p.run(a)}p.free()}getTableNames(){if(!this.db)return[];const r=this.db.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%'");if(r.length===0)return[];const i=[];for(const s of r[0].values)i.push(s[0]);return i}getTableData(r,i=1e3,s=0){if(!this.db)return{columns:[],rows:[]};const u=this.db.exec(`SELECT * FROM "${r}" LIMIT ${i} OFFSET ${s}`);if(u.length===0)return{columns:[],rows:[]};const c=u[0].columns,h=u[0].values.map(p=>{const g={};return c.forEach((a,v)=>{g[a]=p[v]}),g});return{columns:c,rows:h}}getTableRowCount(r){if(!this.db)return 0;const i=this.db.exec(`SELECT COUNT(*) as count FROM "${r}"`);return i.length===0?0:i[0].values[0][0]}async saveToFile(r,i){if(!this.db)throw new Error("Database not initialized");const s=this.db.export(),u=Array.from(s);await i.writeDatabase(r,u)}deleteTable(r){if(!this.db)throw new Error("Database not initialized");this.db.run(`DROP TABLE IF EXISTS "${r}"`)}close(){this.db&&(this.db.close(),this.db=null)}}class Yn{static parseSchemaLine(r){const i=[],s=r.split(",");for(const u of s){const c=u.trim();if(!c)continue;const h=c.indexOf(":");if(h>0){const p=c.substring(0,h).trim(),g=c.substring(h+1).trim().toLowerCase();i.push({name:p,type:g==="number"?"number":"string"})}else i.push({name:c,type:"string"})}return i}static parseCSV(r){const i=r.split(/\r?\n/).filter(c=>c.trim());if(i.length===0)throw new Error("CSV file is empty");const s=this.parseSchemaLine(i[0]),u=[];for(let c=1;c<i.length;c++){const h=this.parseCSVLine(i[c]),p={};s.forEach((g,a)=>{let v=h[a]||"";v=v.trim(),g.type==="number"?(p[g.name]=v===""?null:parseFloat(v),isNaN(p[g.name])&&(p[g.name]=null)):p[g.name]=v}),u.push(p)}return{schema:s,data:u}}static parseCSVLine(r){const i=[];let s="",u=!1;for(let c=0;c<r.length;c++){const h=r[c];h==='"'?u&&r[c+1]==='"'?(s+='"',c++):u=!u:h===","&&!u?(i.push(s),s=""):s+=h}return i.push(s),i}static getTableNameFromPath(r){return r.split(/[/\\]/).pop().replace(/\.csv$/i,"").replace(/[^a-zA-Z0-9_]/g,"_")}}function Gn(l,r,i){const s=l.slice();return s[1]=r[i],s}function Zn(l,r,i){const s=l.slice();return s[4]=r[i],s}function Kn(l,r,i){const s=l.slice();return s[4]=r[i],s}function $n(l){let r,i=l[4]+"",s;return{c(){r=E("th"),s=x(i),q(r,"class","svelte-1l2op9x")},m(u,c){Z(u,r,c),b(r,s)},p(u,c){c&1&&i!==(i=u[4]+"")&&he(s,i)},d(u){u&&G(r)}}}function er(l){let r,i=(l[1][l[4]]??"")+"",s;return{c(){r=E("td"),s=x(i),q(r,"class","svelte-1l2op9x")},m(u,c){Z(u,r,c),b(r,s)},p(u,c){c&1&&i!==(i=(u[1][u[4]]??"")+"")&&he(s,i)},d(u){u&&G(r)}}}function tr(l){let r,i,s=Ne(l[0].columns),u=[];for(let c=0;c<s.length;c+=1)u[c]=er(Zn(l,s,c));return{c(){r=E("tr");for(let c=0;c<u.length;c+=1)u[c].c();i=J(),q(r,"class","svelte-1l2op9x")},m(c,h){Z(c,r,h);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(r,null);b(r,i)},p(c,h){if(h&1){s=Ne(c[0].columns);let p;for(p=0;p<s.length;p+=1){const g=Zn(c,s,p);u[p]?u[p].p(g,h):(u[p]=er(g),u[p].c(),u[p].m(r,i))}for(;p<u.length;p+=1)u[p].d(1);u.length=s.length}},d(c){c&&G(r),lt(u,c)}}}function Ti(l){let r,i,s,u,c,h,p=Ne(l[0].columns),g=[];for(let k=0;k<p.length;k+=1)g[k]=$n(Kn(l,p,k));let a=Ne(l[0].rows),v=[];for(let k=0;k<a.length;k+=1)v[k]=tr(Gn(l,a,k));return{c(){r=E("div"),i=E("table"),s=E("thead"),u=E("tr");for(let k=0;k<g.length;k+=1)g[k].c();c=J(),h=E("tbody");for(let k=0;k<v.length;k+=1)v[k].c();q(u,"class","svelte-1l2op9x"),q(s,"class","svelte-1l2op9x"),q(i,"class","data-table svelte-1l2op9x"),q(r,"class","table-container svelte-1l2op9x")},m(k,N){Z(k,r,N),b(r,i),b(i,s),b(s,u);for(let y=0;y<g.length;y+=1)g[y]&&g[y].m(u,null);b(i,c),b(i,h);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(h,null)},p(k,[N]){if(N&1){p=Ne(k[0].columns);let y;for(y=0;y<p.length;y+=1){const S=Kn(k,p,y);g[y]?g[y].p(S,N):(g[y]=$n(S),g[y].c(),g[y].m(u,null))}for(;y<g.length;y+=1)g[y].d(1);g.length=p.length}if(N&1){a=Ne(k[0].rows);let y;for(y=0;y<a.length;y+=1){const S=Gn(k,a,y);v[y]?v[y].p(S,N):(v[y]=tr(S),v[y].c(),v[y].m(h,null))}for(;y<v.length;y+=1)v[y].d(1);v.length=a.length}},i:ae,o:ae,d(k){k&&G(r),lt(g,k),lt(v,k)}}}function Ci(l,r,i){let{tableData:s={columns:[],rows:[]}}=r;return l.$$set=u=>{"tableData"in u&&i(0,s=u.tableData)},[s]}class Li extends ct{constructor(r){super(),ft(this,r,Ci,Ti,st,{tableData:0})}}function nr(l,r,i){const s=l.slice();return s[17]=r[i],s}function Di(l){let r,i=Ne(l[0]),s=[];for(let u=0;u<i.length;u+=1)s[u]=rr(nr(l,i,u));return{c(){for(let u=0;u<s.length;u+=1)s[u].c();r=di()},m(u,c){for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(u,c);Z(u,r,c)},p(u,c){if(c&1){i=Ne(u[0]);let h;for(h=0;h<i.length;h+=1){const p=nr(u,i,h);s[h]?s[h].p(p,c):(s[h]=rr(p),s[h].c(),s[h].m(r.parentNode,r))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}},d(u){u&&G(r),lt(s,u)}}}function Oi(l){let r;return{c(){r=E("option"),r.textContent="No tables available",r.__value="",tn(r,r.__value)},m(i,s){Z(i,r,s)},p:ae,d(i){i&&G(r)}}}function rr(l){let r,i=l[17]+"",s,u;return{c(){r=E("option"),s=x(i),r.__value=u=l[17],tn(r,r.__value)},m(c,h){Z(c,r,h),b(r,s)},p(c,h){h&1&&i!==(i=c[17]+"")&&he(s,i),h&1&&u!==(u=c[17])&&(r.__value=u,tn(r,r.__value))},d(c){c&&G(r)}}}function Ri(l){let r;return{c(){r=E("div"),r.textContent="Select a table to view",q(r,"class","empty-message svelte-1gxjolo")},m(i,s){Z(i,r,s)},p:ae,i:ae,o:ae,d(i){i&&G(r)}}}function Fi(l){let r;return{c(){r=E("div"),r.textContent="Table is empty",q(r,"class","empty-message svelte-1gxjolo")},m(i,s){Z(i,r,s)},p:ae,i:ae,o:ae,d(i){i&&G(r)}}}function ji(l){let r,i,s,u,c,h,p,g,a,v,k,N,y,S,T,X=l[4]+1+"",oe,ee,se,I=l[5]+1+"",te,re,Y,F,Q,j,L,B,A,O,K,ue=l[4]*Je+1+"",ge,Ee,Le=Math.min((l[4]+1)*Je,l[3])+"",pe,Se,ke,Fe,we,be,je,me,Ie,de,ie=l[2][l[1]]&&ir(l);return Y=new Li({props:{tableData:l[6]}}),{c(){r=E("div"),i=E("span"),s=x("Table: "),u=E("strong"),c=x(l[1]),h=J(),ie&&ie.c(),p=J(),g=E("span"),a=x("Rows: "),v=E("strong"),k=x(l[3]),N=J(),y=E("span"),S=x("Page: "),T=E("strong"),oe=x(X),ee=x(" of "),se=E("strong"),te=x(I),re=J(),yt(Y.$$.fragment),F=J(),Q=E("div"),j=E("button"),L=x(" Previous"),A=J(),O=E("span"),K=x("Showing "),ge=x(ue),Ee=x(" - "),pe=x(Le),Se=x(" of "),ke=x(l[3]),Fe=J(),we=E("button"),be=x("Next "),q(u,"class","svelte-1gxjolo"),q(v,"class","svelte-1gxjolo"),q(T,"class","svelte-1gxjolo"),q(se,"class","svelte-1gxjolo"),q(r,"class","table-info svelte-1gxjolo"),q(j,"class","page-button svelte-1gxjolo"),j.disabled=B=!l[9],q(O,"class","page-info svelte-1gxjolo"),q(we,"class","page-button svelte-1gxjolo"),we.disabled=je=!l[8],q(Q,"class","pagination svelte-1gxjolo")},m(H,$){Z(H,r,$),b(r,i),b(i,s),b(i,u),b(u,c),b(r,h),ie&&ie.m(r,null),b(r,p),b(r,g),b(g,a),b(g,v),b(v,k),b(r,N),b(r,y),b(y,S),b(y,T),b(T,oe),b(y,ee),b(y,se),b(se,te),Z(H,re,$),at(Y,H,$),Z(H,F,$),Z(H,Q,$),b(Q,j),b(j,L),b(Q,A),b(Q,O),b(O,K),b(O,ge),b(O,Ee),b(O,pe),b(O,Se),b(O,ke),b(Q,Fe),b(Q,we),b(we,be),me=!0,Ie||(de=[Pe(j,"click",l[12]),Pe(we,"click",l[13])],Ie=!0)},p(H,$){(!me||$&2)&&he(c,H[1]),H[2][H[1]]?ie?ie.p(H,$):(ie=ir(H),ie.c(),ie.m(r,p)):ie&&(ie.d(1),ie=null),(!me||$&8)&&he(k,H[3]),(!me||$&16)&&X!==(X=H[4]+1+"")&&he(oe,X),(!me||$&32)&&I!==(I=H[5]+1+"")&&he(te,I);const ze={};$&64&&(ze.tableData=H[6]),Y.$set(ze),(!me||$&512&&B!==(B=!H[9]))&&(j.disabled=B),(!me||$&16)&&ue!==(ue=H[4]*Je+1+"")&&he(ge,ue),(!me||$&24)&&Le!==(Le=Math.min((H[4]+1)*Je,H[3])+"")&&he(pe,Le),(!me||$&8)&&he(ke,H[3]),(!me||$&256&&je!==(je=!H[8]))&&(we.disabled=je)},i(H){me||(Re(Y.$$.fragment,H),me=!0)},o(H){We(Y.$$.fragment,H),me=!1},d(H){H&&(G(r),G(re),G(F),G(Q)),ie&&ie.d(),ut(Y,H),Ie=!1,Ve(de)}}}function Ii(l){let r;return{c(){r=E("div"),r.textContent="Loading table data...",q(r,"class","loading-message svelte-1gxjolo")},m(i,s){Z(i,r,s)},p:ae,i:ae,o:ae,d(i){i&&G(r)}}}function ir(l){let r,i,s,u=l[2][l[1]].split(/[/\\]/).pop()+"",c;return{c(){r=E("span"),i=x("Source: "),s=E("strong"),c=x(u),q(s,"class","svelte-1gxjolo")},m(h,p){Z(h,r,p),b(r,i),b(r,s),b(s,c)},p(h,p){p&6&&u!==(u=h[2][h[1]].split(/[/\\]/).pop()+"")&&he(c,u)},d(h){h&&G(r)}}}function zi(l){let r,i,s,u,c,h,p,g,a,v,k,N,y,S,T,X,oe;function ee(F,Q){return F[0].length===0?Oi:Di}let se=ee(l),I=se(l);const te=[Ii,ji,Fi,Ri],re=[];function Y(F,Q){return F[7]?0:F[1]&&F[6].columns.length>0?1:F[1]?2:3}return y=Y(l),S=re[y]=te[y](l),{c(){r=E("div"),i=E("header"),s=E("div"),u=E("h2"),u.textContent="Database Tables",c=J(),h=E("select"),I.c(),g=J(),a=E("div"),v=E("button"),v.textContent="",k=J(),N=E("div"),S.c(),q(u,"class","svelte-1gxjolo"),q(h,"class","table-selector svelte-1gxjolo"),q(s,"class","header-left svelte-1gxjolo"),q(v,"class","refresh-button svelte-1gxjolo"),q(v,"title","Refresh"),q(a,"class","header-right svelte-1gxjolo"),q(i,"class","viewer-header svelte-1gxjolo"),q(N,"class","viewer-content svelte-1gxjolo"),q(r,"class","table-viewer svelte-1gxjolo")},m(F,Q){Z(F,r,Q),b(r,i),b(i,s),b(s,u),b(s,c),b(s,h),I.m(h,null),Qn(h,l[1]||""),b(i,g),b(i,a),b(a,v),b(r,k),b(r,N),re[y].m(N,null),T=!0,X||(oe=[Pe(h,"change",l[10]),Pe(v,"click",l[11])],X=!0)},p(F,[Q]){se===(se=ee(F))&&I?I.p(F,Q):(I.d(1),I=se(F),I&&(I.c(),I.m(h,null))),(!T||Q&3&&p!==(p=F[1]||""))&&Qn(h,F[1]||"");let j=y;y=Y(F),y===j?re[y].p(F,Q):(br(),We(re[j],1,1,()=>{re[j]=null}),_r(),S=re[y],S?S.p(F,Q):(S=re[y]=te[y](F),S.c()),Re(S,1),S.m(N,null))},i(F){T||(Re(S),T=!0)},o(F){We(S),T=!1},d(F){F&&G(r),I.d(),re[y].d(),X=!1,Ve(oe)}}}let Je=100;function Ui(l,r,i){let s,u,c,{tables:h=[]}=r,{currentTable:p=null}=r,{dbManager:g=null}=r,{tableToCsvMap:a={}}=r;const v=on();let k={columns:[],rows:[]},N=0,y=0,S=!1;async function T(){if(!(!p||!g)){i(7,S=!0);try{i(3,N=g.getTableRowCount(p));const I=y*Je;i(6,k=g.getTableData(p,Je,I))}catch(I){console.error("Error loading table data:",I)}finally{i(7,S=!1)}}}function X(I){const te=I.target.value;te&&(i(4,y=0),v("tableSelect",{table:te}))}function oe(){T(),v("refresh")}function ee(){y>0&&(i(4,y--,y),T())}function se(){const I=Math.ceil(N/Je)-1;y<I&&(i(4,y++,y),T())}return l.$$set=I=>{"tables"in I&&i(0,h=I.tables),"currentTable"in I&&i(1,p=I.currentTable),"dbManager"in I&&i(14,g=I.dbManager),"tableToCsvMap"in I&&i(2,a=I.tableToCsvMap)},l.$$.update=()=>{l.$$.dirty&16386&&p&&g&&T(),l.$$.dirty&8&&i(5,s=Math.ceil(N/Je)-1),l.$$.dirty&16&&i(9,u=y>0),l.$$.dirty&48&&i(8,c=y<s)},[h,p,a,N,y,s,k,S,c,u,X,oe,ee,se,g]}class xi extends ct{constructor(r){super(),ft(this,r,Ui,zi,st,{tables:0,currentTable:1,dbManager:14,tableToCsvMap:2})}}function Wi(l){let r,i,s,u,c;return{c(){r=E("div"),i=E("div"),s=J(),u=E("p"),c=x(l[0]),q(i,"class","spinner svelte-1ywxz8e"),q(u,"class","message svelte-1ywxz8e"),q(r,"class","loading-container svelte-1ywxz8e")},m(h,p){Z(h,r,p),b(r,i),b(r,s),b(r,u),b(u,c)},p(h,[p]){p&1&&he(c,h[0])},i:ae,o:ae,d(h){h&&G(r)}}}function Vi(l,r,i){let{message:s="Loading..."}=r;return l.$$set=u=>{"message"in u&&i(0,s=u.message)},[s]}class Bi extends ct{constructor(r){super(),ft(this,r,Vi,Wi,st,{message:0})}}function or(l,r,i){const s=l.slice();return s[7]=r[i],s}function Qi(l){let r;return{c(){r=E("p"),r.textContent="No CSV files specified",q(r,"class","no-files svelte-fu6li4")},m(i,s){Z(i,r,s)},p:ae,d(i){i&&G(r)}}}function Hi(l){let r,i=Ne(l[0].csvFiles),s=[];for(let u=0;u<i.length;u+=1)s[u]=lr(or(l,i,u));return{c(){r=E("ul");for(let u=0;u<s.length;u+=1)s[u].c();q(r,"class","svelte-fu6li4")},m(u,c){Z(u,r,c);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(r,null)},p(u,c){if(c&1){i=Ne(u[0].csvFiles);let h;for(h=0;h<i.length;h+=1){const p=or(u,i,h);s[h]?s[h].p(p,c):(s[h]=lr(p),s[h].c(),s[h].m(r,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}},d(u){u&&G(r),lt(s,u)}}}function lr(l){let r,i,s=l[7]+"",u;return{c(){r=E("li"),i=E("code"),u=x(s),q(i,"class","svelte-fu6li4"),q(r,"class","svelte-fu6li4")},m(c,h){Z(c,r,h),b(r,i),b(i,u)},p(c,h){h&1&&s!==(s=c[7]+"")&&he(u,s)},d(c){c&&G(r)}}}function Xi(l){var je,me,Ie;let r,i,s,u,c,h,p,g,a,v,k,N,y,S,T=(((je=l[0])==null?void 0:je.databasePath)||"Not specified")+"",X,oe,ee,se,I=(((Ie=(me=l[0])==null?void 0:me.csvFiles)==null?void 0:Ie.length)||0)+"",te,re,Y,F,Q,j,L,B,A,O=(l[2]||JSON.stringify(l[0],null,2))+"",K,ue,ge,Ee,Le,pe,Se,ke;function Fe(de,ie){var H;return(H=de[0])!=null&&H.csvFiles&&de[0].csvFiles.length>0?Hi:Qi}let we=Fe(l),be=we(l);return{c(){r=E("div"),i=E("div"),s=E("h2"),s.textContent="Configuration File Preview",u=J(),c=E("p"),h=x("File: "),p=E("code"),g=x(l[1]),a=J(),v=E("div"),k=E("h3"),k.textContent="Database Path:",N=J(),y=E("div"),S=E("code"),X=x(T),oe=J(),ee=E("h3"),se=x("CSV Files ("),te=x(I),re=x("):"),Y=J(),F=E("div"),be.c(),Q=J(),j=E("div"),L=E("h3"),L.textContent="Raw File Content:",B=J(),A=E("pre"),K=x(O),ue=J(),ge=E("div"),Ee=E("button"),Ee.textContent="Cancel",Le=J(),pe=E("button"),pe.textContent="Proceed with Loading",q(s,"class","svelte-fu6li4"),q(p,"class","svelte-fu6li4"),q(c,"class","config-path svelte-fu6li4"),q(k,"class","svelte-fu6li4"),q(S,"class","svelte-fu6li4"),q(y,"class","config-value svelte-fu6li4"),q(ee,"class","svelte-fu6li4"),q(F,"class","csv-files-list svelte-fu6li4"),q(L,"class","svelte-fu6li4"),q(A,"class","svelte-fu6li4"),q(j,"class","raw-json svelte-fu6li4"),q(v,"class","config-display svelte-fu6li4"),q(Ee,"class","button secondary svelte-fu6li4"),q(pe,"class","button primary svelte-fu6li4"),q(ge,"class","actions svelte-fu6li4"),q(i,"class","preview-content svelte-fu6li4"),q(r,"class","config-preview svelte-fu6li4")},m(de,ie){Z(de,r,ie),b(r,i),b(i,s),b(i,u),b(i,c),b(c,h),b(c,p),b(p,g),b(i,a),b(i,v),b(v,k),b(v,N),b(v,y),b(y,S),b(S,X),b(v,oe),b(v,ee),b(ee,se),b(ee,te),b(ee,re),b(v,Y),b(v,F),be.m(F,null),b(v,Q),b(v,j),b(j,L),b(j,B),b(j,A),b(A,K),b(i,ue),b(i,ge),b(ge,Ee),b(ge,Le),b(ge,pe),Se||(ke=[Pe(Ee,"click",l[4]),Pe(pe,"click",l[3])],Se=!0)},p(de,[ie]){var H,$,ze;ie&2&&he(g,de[1]),ie&1&&T!==(T=(((H=de[0])==null?void 0:H.databasePath)||"Not specified")+"")&&he(X,T),ie&1&&I!==(I=(((ze=($=de[0])==null?void 0:$.csvFiles)==null?void 0:ze.length)||0)+"")&&he(te,I),we===(we=Fe(de))&&be?be.p(de,ie):(be.d(1),be=we(de),be&&(be.c(),be.m(F,null))),ie&5&&O!==(O=(de[2]||JSON.stringify(de[0],null,2))+"")&&he(K,O)},i:ae,o:ae,d(de){de&&G(r),be.d(),Se=!1,Ve(ke)}}}function Ji(l,r,i){let{config:s=null}=r,{configPath:u=""}=r,{configManager:c=null}=r;const h=on();let p="";mr(async()=>{if(c&&u)try{i(2,p=await c.readConfigFileRaw(u)||"")}catch(v){console.error("Error reading raw config:",v),i(2,p=JSON.stringify(s,null,2))}else i(2,p=JSON.stringify(s,null,2))});function g(){h("proceed")}function a(){h("cancel")}return l.$$set=v=>{"config"in v&&i(0,s=v.config),"configPath"in v&&i(1,u=v.configPath),"configManager"in v&&i(5,c=v.configManager)},[s,u,p,g,a,c]}class Yi extends ct{constructor(r){super(),ft(this,r,Ji,Xi,st,{config:0,configPath:1,configManager:5})}}function sr(l,r,i){const s=l.slice();return s[12]=r[i],s}function Gi(l){let r,i,s,u,c,h,p,g,a,v,k=l[0].length+"",N,y,S,T,X,oe,ee,se,I,te,re=l[2]?"Deleting...":`Delete Selected (${l[1].size})`,Y,F,Q,j,L=Ne(l[0]),B=[];for(let A=0;A<L.length;A+=1)B[A]=ar(sr(l,L,A));return{c(){r=E("p"),r.textContent="The following tables already exist in the database. Select the tables you want to delete before loading new CSV files.",i=J(),s=E("div"),u=E("div"),c=E("label"),h=E("input"),p=J(),g=E("span"),a=E("strong"),v=x("Select All ("),N=x(k),y=x(" tables)"),S=J(),T=E("div");for(let A=0;A<B.length;A+=1)B[A].c();X=J(),oe=E("div"),ee=E("button"),se=x("Skip (Keep All Tables)"),I=J(),te=E("button"),Y=x(re),q(r,"class","info-text svelte-byhfly"),q(h,"type","checkbox"),h.checked=l[3],q(h,"class","svelte-byhfly"),q(c,"class","checkbox-label svelte-byhfly"),q(u,"class","select-all-container svelte-byhfly"),q(T,"class","table-list svelte-byhfly"),q(s,"class","table-list-container svelte-byhfly"),q(ee,"class","button secondary svelte-byhfly"),ee.disabled=l[2],q(te,"class","button danger svelte-byhfly"),te.disabled=F=l[2]||!l[4],q(oe,"class","actions svelte-byhfly")},m(A,O){Z(A,r,O),Z(A,i,O),Z(A,s,O),b(s,u),b(u,c),b(c,h),b(c,p),b(c,g),b(g,a),b(a,v),b(a,N),b(a,y),b(s,S),b(s,T);for(let K=0;K<B.length;K+=1)B[K]&&B[K].m(T,null);Z(A,X,O),Z(A,oe,O),b(oe,ee),b(ee,se),b(oe,I),b(oe,te),b(te,Y),Q||(j=[Pe(h,"change",l[6]),Pe(ee,"click",l[8]),Pe(te,"click",l[7])],Q=!0)},p(A,O){if(O&8&&(h.checked=A[3]),O&1&&k!==(k=A[0].length+"")&&he(N,k),O&35){L=Ne(A[0]);let K;for(K=0;K<L.length;K+=1){const ue=sr(A,L,K);B[K]?B[K].p(ue,O):(B[K]=ar(ue),B[K].c(),B[K].m(T,null))}for(;K<B.length;K+=1)B[K].d(1);B.length=L.length}O&4&&(ee.disabled=A[2]),O&6&&re!==(re=A[2]?"Deleting...":`Delete Selected (${A[1].size})`)&&he(Y,re),O&20&&F!==(F=A[2]||!A[4])&&(te.disabled=F)},d(A){A&&(G(r),G(i),G(s),G(X),G(oe)),lt(B,A),Q=!1,Ve(j)}}}function Zi(l){let r,i,s,u,c,h;return{c(){r=E("div"),i=E("p"),i.textContent="No existing tables found in the database.",s=J(),u=E("button"),u.textContent="Proceed to Load CSV Files",q(i,"class","svelte-byhfly"),q(u,"class","button primary svelte-byhfly"),q(r,"class","no-tables svelte-byhfly")},m(p,g){Z(p,r,g),b(r,i),b(r,s),b(r,u),c||(h=Pe(u,"click",l[8]),c=!0)},p:ae,d(p){p&&G(r),c=!1,h()}}}function ar(l){let r,i,s,u,c,h,p=l[12]+"",g,a,v,k;function N(){return l[10](l[12])}return{c(){r=E("div"),i=E("label"),s=E("input"),c=J(),h=E("span"),g=x(p),a=J(),q(s,"type","checkbox"),s.checked=u=l[1].has(l[12]),q(s,"class","svelte-byhfly"),q(h,"class","table-name svelte-byhfly"),q(i,"class","checkbox-label svelte-byhfly"),q(r,"class","table-item svelte-byhfly")},m(y,S){Z(y,r,S),b(r,i),b(i,s),b(i,c),b(i,h),b(h,g),b(r,a),v||(k=Pe(s,"change",N),v=!0)},p(y,S){l=y,S&3&&u!==(u=l[1].has(l[12]))&&(s.checked=u),S&1&&p!==(p=l[12]+"")&&he(g,p)},d(y){y&&G(r),v=!1,k()}}}function Ki(l){let r,i,s,u;function c(g,a){return g[0].length===0?Zi:Gi}let h=c(l),p=h(l);return{c(){r=E("div"),i=E("div"),s=E("h2"),s.textContent="Existing Database Tables",u=J(),p.c(),q(s,"class","svelte-byhfly"),q(i,"class","manager-content svelte-byhfly"),q(r,"class","table-manager svelte-byhfly")},m(g,a){Z(g,r,a),b(r,i),b(i,s),b(i,u),p.m(i,null)},p(g,[a]){h===(h=c(g))&&p?p.p(g,a):(p.d(1),p=h(g),p&&(p.c(),p.m(i,null)))},i:ae,o:ae,d(g){g&&G(r),p.d()}}}function $i(l,r,i){let s,u,{tables:c=[]}=r,{dbManager:h=null}=r;const p=on();let g=!1,a=new Set;function v(T){a.has(T)?a.delete(T):a.add(T),i(1,a)}function k(){a.size===c.length?a.clear():i(1,a=new Set(c)),i(1,a)}async function N(){if(a.size===0){p("proceed");return}i(2,g=!0);try{for(const T of a)h&&h.db&&h.db.run(`DROP TABLE IF EXISTS "${T}"`);p("tablesDeleted")}catch(T){console.error("Error deleting tables:",T)}finally{i(2,g=!1)}}function y(){p("proceed")}const S=T=>v(T);return l.$$set=T=>{"tables"in T&&i(0,c=T.tables),"dbManager"in T&&i(9,h=T.dbManager)},l.$$.update=()=>{l.$$.dirty&2&&i(4,s=a.size>0),l.$$.dirty&3&&i(3,u=c.length>0&&a.size===c.length)},[c,a,g,u,s,v,k,N,y,h,S]}class eo extends ct{constructor(r){super(),ft(this,r,$i,Ki,st,{tables:0,dbManager:9})}}const{window:to}=hi;function ur(l){let r,i,s;return{c(){r=E("div"),i=x("Version "),s=x(l[10]),q(r,"class","version-banner svelte-sxun0i")},m(u,c){Z(u,r,c),b(r,i),b(r,s)},p(u,c){c&1024&&he(s,u[10])},d(u){u&&G(r)}}}function fr(l){let r,i,s,u,c,h;return{c(){r=E("div"),i=x(l[9]),s=J(),u=E("button"),u.textContent="",q(u,"class","svelte-sxun0i"),q(r,"class","error-banner svelte-sxun0i")},m(p,g){Z(p,r,g),b(r,i),b(r,s),b(r,u),c||(h=Pe(u,"click",l[17]),c=!0)},p(p,g){g&512&&he(i,p[9])},d(p){p&&G(r),c=!1,h()}}}function no(l){let r,i;return r=new xi({props:{tables:l[5],currentTable:l[7],dbManager:l[1],tableToCsvMap:l[6]}}),r.$on("tableSelect",l[14]),r.$on("refresh",l[15]),{c(){yt(r.$$.fragment)},m(s,u){at(r,s,u),i=!0},p(s,u){const c={};u&32&&(c.tables=s[5]),u&128&&(c.currentTable=s[7]),u&2&&(c.dbManager=s[1]),u&64&&(c.tableToCsvMap=s[6]),r.$set(c)},i(s){i||(Re(r.$$.fragment,s),i=!0)},o(s){We(r.$$.fragment,s),i=!1},d(s){ut(r,s)}}}function ro(l){let r,i;return r=new Bi({props:{message:l[8]}}),{c(){yt(r.$$.fragment)},m(s,u){at(r,s,u),i=!0},p(s,u){const c={};u&256&&(c.message=s[8]),r.$set(c)},i(s){i||(Re(r.$$.fragment,s),i=!0)},o(s){We(r.$$.fragment,s),i=!1},d(s){ut(r,s)}}}function io(l){let r,i;return r=new Yi({props:{config:l[3],configPath:l[4],configManager:l[0]}}),r.$on("proceed",l[12]),r.$on("cancel",l[13]),{c(){yt(r.$$.fragment)},m(s,u){at(r,s,u),i=!0},p(s,u){const c={};u&8&&(c.config=s[3]),u&16&&(c.configPath=s[4]),u&1&&(c.configManager=s[0]),r.$set(c)},i(s){i||(Re(r.$$.fragment,s),i=!0)},o(s){We(r.$$.fragment,s),i=!1},d(s){ut(r,s)}}}function oo(l){let r,i;return r=new eo({props:{tables:l[5],dbManager:l[1]}}),r.$on("tablesDeleted",l[11]),r.$on("proceed",l[12]),{c(){yt(r.$$.fragment)},m(s,u){at(r,s,u),i=!0},p(s,u){const c={};u&32&&(c.tables=s[5]),u&2&&(c.dbManager=s[1]),r.$set(c)},i(s){i||(Re(r.$$.fragment,s),i=!0)},o(s){We(r.$$.fragment,s),i=!1},d(s){ut(r,s)}}}function lo(l){let r,i,s,u,c,h,p,g,a=l[10]&&ur(l),v=l[9]&&fr(l);const k=[oo,io,ro,no],N=[];function y(S,T){return S[2]==="tableManager"?0:S[2]==="configPreview"?1:S[2]==="loading"?2:S[2]==="viewer"?3:-1}return~(u=y(l))&&(c=N[u]=k[u](l)),{c(){r=E("div"),a&&a.c(),i=J(),v&&v.c(),s=J(),c&&c.c(),q(r,"class","app svelte-sxun0i")},m(S,T){Z(S,r,T),a&&a.m(r,null),b(r,i),v&&v.m(r,null),b(r,s),~u&&N[u].m(r,null),h=!0,p||(g=Pe(to,"beforeunload",l[16]),p=!0)},p(S,[T]){S[10]?a?a.p(S,T):(a=ur(S),a.c(),a.m(r,i)):a&&(a.d(1),a=null),S[9]?v?v.p(S,T):(v=fr(S),v.c(),v.m(r,s)):v&&(v.d(1),v=null);let X=u;u=y(S),u===X?~u&&N[u].p(S,T):(c&&(br(),We(N[X],1,1,()=>{N[X]=null}),_r()),~u?(c=N[u],c?c.p(S,T):(c=N[u]=k[u](S),c.c()),Re(c,1),c.m(r,null)):c=null)},i(S){h||(Re(c),h=!0)},o(S){We(c),h=!1},d(S){S&&G(r),a&&a.d(),v&&v.d(),~u&&N[u].d(),p=!1,g()}}}function so(l,r,i){let s,u,c="loading",h=null,p=null,g=[],a={},v=null,k="",N="",y="";mr(async()=>{if(console.log("App mounted, checking for electronAPI..."),console.log("window.electronAPI:",window.electronAPI),window.electronAPI)try{window.electronAPI.getAppVersion&&(i(10,y=await window.electronAPI.getAppVersion()),console.log(`Application version: ${y}`)),i(0,s=new Ei(window.electronAPI)),await s.initialize(),i(1,u=new Ni),await u.initialize(),console.log("Initialization complete"),await S()}catch(Y){console.error("Initialization error:",Y),i(9,N=`Initialization error: ${Y.message}`)}else console.error("Electron API not available"),i(9,N="Electron API not available. Please run this application in Electron.")});async function S(){try{if(i(8,k="Loading database..."),i(4,p=s.getDefaultConfigPath()),i(3,h=await s.loadConfig(p)),h||(await s.createDefaultConfig(),i(3,h=await s.loadConfig(p))),!h||!s.validateConfig(h)){i(9,N="Invalid configuration file");return}await u.loadFromFile(h.databasePath,window.electronAPI),i(5,g=u.getTableNames()),i(2,c="tableManager"),i(8,k="")}catch(Y){i(9,N=`Error loading config: ${Y.message}`),console.error(Y)}}async function T(){u&&h&&await u.saveToFile(h.databasePath,window.electronAPI),u&&i(5,g=u.getTableNames()),X()}function X(){i(2,c="loading"),oe()}async function oe(){if(!h||!h.csvFiles||h.csvFiles.length===0){i(5,g=u.getTableNames()),g.length>0&&i(7,v=g[0]),i(2,c="viewer"),i(8,k="");return}i(8,k="Checking CSV files...");const Y=new Set(u.getTableNames());i(6,a={});let F=0,Q=0;for(let j=0;j<h.csvFiles.length;j++){const L=h.csvFiles[j],B=Yn.getTableNameFromPath(L);if(Y.has(B)){console.log(`Table ${B} already exists, skipping CSV file ${L}`),Q++,i(6,a[B]=L,a);continue}i(8,k=`Loading ${L}... (${j+1}/${h.csvFiles.length})`);try{const A=await window.electronAPI.readCsvFile(L),{schema:O,data:K}=Yn.parseCSV(A);i(6,a[B]=L,a),u.createTable(B,O),u.insertData(B,O,K),F++,Y.add(B)}catch(A){console.error(`Error loading CSV file ${L}:`,A),i(9,N=`Error loading ${L}: ${A.message}`)}}if(F>0&&(i(8,k="Saving database..."),await u.saveToFile(h.databasePath,window.electronAPI)),i(5,g=u.getTableNames()),g.length>0&&i(7,v=g[0]),Q>0){const j=`Loaded ${F} file(s), skipped ${Q} file(s) (tables already exist)`;console.log(j),N||setTimeout(()=>{},100)}i(2,c="viewer"),i(8,k="")}function ee(){i(2,c="startup"),i(3,h=null),i(4,p=null)}function se(Y){var Q;const F=(Q=Y.detail)==null?void 0:Q.table;F&&i(7,v=F)}function I(){u&&(i(5,g=u.getTableNames()),g.length>0&&!g.includes(v)&&i(7,v=g[0]))}return[s,u,c,h,p,g,a,v,k,N,y,T,X,ee,se,I,()=>{u&&u.close()},()=>i(9,N="")]}class ao extends ct{constructor(r){super(),ft(this,r,so,lo,st,{})}}new ao({target:document.getElementById("app")});
