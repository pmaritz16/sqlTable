var El=Object.defineProperty;var kl=(o,n,r)=>n in o?El(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r;var je=(o,n,r)=>kl(o,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();function he(){}function kr(o){return o()}function Bn(){return Object.create(null)}function Ue(o){o.forEach(kr)}function qr(o){return typeof o=="function"}function et(o,n){return o!=o?n==n:o!==n||o&&typeof o=="object"||typeof o=="function"}function ql(o){return Object.keys(o).length===0}const Sl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function m(o,n){o.appendChild(n)}function H(o,n,r){o.insertBefore(n,r||null)}function B(o){o.parentNode&&o.parentNode.removeChild(o)}function ct(o,n){for(let r=0;r<o.length;r+=1)o[r]&&o[r].d(n)}function E(o){return document.createElement(o)}function D(o){return document.createTextNode(o)}function F(){return D(" ")}function Sr(){return D("")}function ye(o,n,r,i){return o.addEventListener(n,r,i),()=>o.removeEventListener(n,r,i)}function k(o,n,r){r==null?o.removeAttribute(n):o.getAttribute(n)!==r&&o.setAttribute(n,r)}function Cl(o){return Array.from(o.childNodes)}function se(o,n){n=""+n,o.data!==n&&(o.data=n)}function nn(o,n){o.value=n??""}function Hn(o,n,r){for(let i=0;i<o.options.length;i+=1){const s=o.options[i];if(s.__value===n){s.selected=!0;return}}o.selectedIndex=-1}function Pl(o,n,{bubbles:r=!1,cancelable:i=!1}={}){return new CustomEvent(o,{detail:n,bubbles:r,cancelable:i})}let yt;function vt(o){yt=o}function Cr(){if(!yt)throw new Error("Function called outside component initialization");return yt}function Pr(o){Cr().$$.on_mount.push(o)}function Ot(){const o=Cr();return(n,r,{cancelable:i=!1}={})=>{const s=o.$$.callbacks[n];if(s){const c=Pl(n,r,{cancelable:i});return s.slice().forEach(f=>{f.call(o,c)}),!c.defaultPrevented}return!0}}const ut=[],Xn=[];let ft=[];const xn=[],Tl=Promise.resolve();let rn=!1;function Ll(){rn||(rn=!0,Tl.then(Tr))}function ln(o){ft.push(o)}const tn=new Set;let at=0;function Tr(){if(at!==0)return;const o=yt;do{try{for(;at<ut.length;){const n=ut[at];at++,vt(n),Al(n.$$)}}catch(n){throw ut.length=0,at=0,n}for(vt(null),ut.length=0,at=0;Xn.length;)Xn.pop()();for(let n=0;n<ft.length;n+=1){const r=ft[n];tn.has(r)||(tn.add(r),r())}ft.length=0}while(ut.length);for(;xn.length;)xn.pop()();rn=!1,tn.clear(),vt(o)}function Al(o){if(o.fragment!==null){o.update(),Ue(o.before_update);const n=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,n),o.after_update.forEach(ln)}}function Ml(o){const n=[],r=[];ft.forEach(i=>o.indexOf(i)===-1?n.push(i):r.push(i)),r.forEach(i=>i()),ft=n}const Rt=new Set;let $e;function Lr(){$e={r:0,c:[],p:$e}}function Ar(){$e.r||Ue($e.c),$e=$e.p}function Re(o,n){o&&o.i&&(Rt.delete(o),o.i(n))}function Ve(o,n,r,i){if(o&&o.o){if(Rt.has(o))return;Rt.add(o),$e.c.push(()=>{Rt.delete(o),i&&(r&&o.d(1),i())}),o.o(n)}else i&&i()}function Le(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function Nl(o,n){o.d(1),n.delete(o.key)}function zl(o,n,r,i,s,c,f,d,p,u,b,v){let S=o.length,w=c.length,C=S;const T={};for(;C--;)T[o[C].key]=C;const y=[],L=new Map,z=new Map,te=[];for(C=w;C--;){const R=v(s,c,C),G=r(R);let le=f.get(G);le?te.push(()=>le.p(R,n)):(le=u(G,R),le.c()),L.set(G,y[C]=le),G in T&&z.set(G,Math.abs(C-T[G]))}const $=new Set,K=new Set;function x(R){Re(R,1),R.m(d,b),f.set(R.key,R),b=R.first,w--}for(;S&&w;){const R=y[w-1],G=o[S-1],le=R.key,A=G.key;R===G?(b=R.first,S--,w--):L.has(A)?!f.has(le)||$.has(le)?x(R):K.has(A)?S--:z.get(le)>z.get(A)?(K.add(le),x(R)):($.add(A),S--):(p(G,f),S--)}for(;S--;){const R=o[S];L.has(R.key)||p(R,f)}for(;w;)x(y[w-1]);return Ue(te),y}function dt(o){o&&o.c()}function tt(o,n,r){const{fragment:i,after_update:s}=o.$$;i&&i.m(n,r),ln(()=>{const c=o.$$.on_mount.map(kr).filter(qr);o.$$.on_destroy?o.$$.on_destroy.push(...c):Ue(c),o.$$.on_mount=[]}),s.forEach(ln)}function nt(o,n){const r=o.$$;r.fragment!==null&&(Ml(r.after_update),Ue(r.on_destroy),r.fragment&&r.fragment.d(n),r.on_destroy=r.fragment=null,r.ctx=[])}function Rl(o,n){o.$$.dirty[0]===-1&&(ut.push(o),Ll(),o.$$.dirty.fill(0)),o.$$.dirty[n/31|0]|=1<<n%31}function rt(o,n,r,i,s,c,f=null,d=[-1]){const p=yt;vt(o);const u=o.$$={fragment:null,ctx:[],props:c,update:he,not_equal:s,bound:Bn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:Bn(),dirty:d,skip_bound:!1,root:n.target||p.$$.root};f&&f(u.root);let b=!1;if(u.ctx=r?r(o,n.props||{},(v,S,...w)=>{const C=w.length?w[0]:S;return u.ctx&&s(u.ctx[v],u.ctx[v]=C)&&(!u.skip_bound&&u.bound[v]&&u.bound[v](C),b&&Rl(o,v)),S}):[],u.update(),b=!0,Ue(u.before_update),u.fragment=i?i(u.ctx):!1,n.target){if(n.hydrate){const v=Cl(n.target);u.fragment&&u.fragment.l(v),v.forEach(B)}else u.fragment&&u.fragment.c();n.intro&&Re(o.$$.fragment),tt(o,n.target,n.anchor),Tr()}vt(p)}class lt{constructor(){je(this,"$$");je(this,"$$set")}$destroy(){nt(this,1),this.$destroy=he}$on(n,r){if(!qr(r))return he;const i=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return i.push(r),()=>{const s=i.indexOf(r);s!==-1&&i.splice(s,1)}}$set(n){this.$$set&&!ql(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Ol="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ol);class Dl{constructor(n){this.api=n,this.defaultConfigPath=null,this.defaultConfig={databasePath:"",csvFiles:[]}}async initialize(){this.defaultConfigPath=await this.api.getDefaultConfigPath();const n=await this.api.getDefaultDatabasePath();this.defaultConfig.databasePath=n}getDefaultConfigPath(){return this.defaultConfigPath}async createDefaultConfig(){try{return await this.api.createDefaultConfig(this.defaultConfig)}catch(n){return console.error("Error creating default config:",n),!1}}async loadConfig(n){try{return await this.api.loadConfig(n)}catch(r){return console.error("Error loading config:",r),null}}async saveConfig(n,r){try{return await this.api.saveConfig(n,r),!0}catch(i){return console.error("Error saving config:",i),!1}}validateConfig(n){return!(!n||!n.databasePath||!Array.isArray(n.csvFiles))}async selectConfigFile(){try{return await this.api.selectConfigFile({title:"Select Config File",filters:[{name:"JSON",extensions:["json"]}]})}catch(n){return console.error("Error selecting config file:",n),null}}async readConfigFileRaw(n){try{return await this.api.readConfigFileRaw(n)}catch(r){return console.error("Error reading config file raw:",r),null}}}function Il(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Fl(o){if(o.__esModule)return o;var n=o.default;if(typeof n=="function"){var r=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var s=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return o[i]}})}),r}var Mr={exports:{}};const jl={},Vl=Object.freeze(Object.defineProperty({__proto__:null,default:jl},Symbol.toStringTag,{value:"Module"})),Jn=Fl(Vl);(function(o,n){var r=void 0,i=function(s){return r||(r=new Promise(function(c,f){var d=typeof s<"u"?s:{},p=d.onAbort;d.onAbort=function(e){f(new Error(e)),p&&p(e)},d.postRun=d.postRun||[],d.postRun.push(function(){c(d)}),o=void 0;var u;u||(u=typeof d<"u"?d:{});var b=typeof window=="object",v=typeof WorkerGlobalScope<"u",S=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";u.onRuntimeInitialized=function(){function e(g,P){switch(typeof P){case"boolean":vl(g,P?1:0);break;case"number":gl(g,P);break;case"string":_l(g,P,-1,-1);break;case"object":if(P===null)Vn(g);else if(P.length!=null){var I=Mt(P,At);wl(g,I,P.length,-1),Nt(I)}else zt(g,"Wrong API use : tried to return a value of an unknown type ("+P+").",-1);break;default:Vn(g)}}function t(g,P){for(var I=[],X=0;X<g;X+=1){var Z=re(P+4*X,"i32"),de=dl(Z);if(de===1||de===2)Z=bl(Z);else if(de===3)Z=ml(Z);else if(de===4){de=Z,Z=hl(de),de=pl(de);for(var De=new Uint8Array(Z),ze=0;ze<Z;ze+=1)De[ze]=A[de+ze];Z=De}else Z=null;I.push(Z)}return I}function l(g,P){this.Qa=g,this.db=P,this.Oa=1,this.lb=[]}function a(g,P){if(this.db=P,P=mt(g)+1,this.eb=Zt(P),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Qe(g,j,this.eb,P),this.kb=this.eb,this.Za=this.pb=null}function h(g){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),g!=null){var P=this.filename,I="/",X=P;if(I&&(I=typeof I=="string"?I:Vt(I),X=P?It(I+"/"+P):I),P=hn(!0,!0),X=Qr(X,P),g){if(typeof g=="string"){I=Array(g.length);for(var Z=0,de=g.length;Z<de;++Z)I[Z]=g.charCodeAt(Z);g=I}Ct(X,P|146),I=st(X,577),An(I,g,0,g.length,0),Xt(I),Ct(X,P)}}this.handleError(U(this.filename,_)),this.db=re(_,"i32"),Qn(this.db),this.fb={},this.Sa={}}var _=xe(4),q=u.cwrap,U=q("sqlite3_open","number",["string","number"]),ie=q("sqlite3_close_v2","number",["number"]),ne=q("sqlite3_exec","number",["number","string","number","number","number"]),ge=q("sqlite3_changes","number",["number"]),Te=q("sqlite3_prepare_v2","number",["number","string","number","number","number"]),On=q("sqlite3_sql","string",["number"]),Gr=q("sqlite3_normalized_sql","string",["number"]),Dn=q("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Yr=q("sqlite3_bind_text","number",["number","number","number","number","number"]),In=q("sqlite3_bind_blob","number",["number","number","number","number","number"]),Kr=q("sqlite3_bind_double","number",["number","number","number"]),Zr=q("sqlite3_bind_int","number",["number","number","number"]),$r=q("sqlite3_bind_parameter_index","number",["number","string"]),el=q("sqlite3_step","number",["number"]),tl=q("sqlite3_errmsg","string",["number"]),nl=q("sqlite3_column_count","number",["number"]),rl=q("sqlite3_data_count","number",["number"]),ll=q("sqlite3_column_double","number",["number","number"]),Fn=q("sqlite3_column_text","string",["number","number"]),il=q("sqlite3_column_blob","number",["number","number"]),ol=q("sqlite3_column_bytes","number",["number","number"]),sl=q("sqlite3_column_type","number",["number","number"]),al=q("sqlite3_column_name","string",["number","number"]),ul=q("sqlite3_reset","number",["number"]),fl=q("sqlite3_clear_bindings","number",["number"]),cl=q("sqlite3_finalize","number",["number"]),jn=q("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),dl=q("sqlite3_value_type","number",["number"]),hl=q("sqlite3_value_bytes","number",["number"]),ml=q("sqlite3_value_text","string",["number"]),pl=q("sqlite3_value_blob","number",["number"]),bl=q("sqlite3_value_double","number",["number"]),gl=q("sqlite3_result_double","",["number","number"]),Vn=q("sqlite3_result_null","",["number"]),_l=q("sqlite3_result_text","",["number","string","number","number"]),wl=q("sqlite3_result_blob","",["number","number","number","number"]),vl=q("sqlite3_result_int","",["number","number"]),zt=q("sqlite3_result_error","",["number","string","number"]),Un=q("sqlite3_aggregate_context","number",["number","number"]),Qn=q("RegisterExtensionFunctions","number",["number"]),Wn=q("sqlite3_update_hook","number",["number","number","number"]);l.prototype.bind=function(g){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(g)?this.Cb(g):g!=null&&typeof g=="object"?this.Db(g):!0},l.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var g=el(this.Qa);switch(g){case 100:return!0;case 101:return!1;default:throw this.db.handleError(g)}},l.prototype.wb=function(g){return g==null&&(g=this.Oa,this.Oa+=1),ll(this.Qa,g)},l.prototype.Gb=function(g){if(g==null&&(g=this.Oa,this.Oa+=1),g=Fn(this.Qa,g),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(g)},l.prototype.Hb=function(g){return g==null&&(g=this.Oa,this.Oa+=1),Fn(this.Qa,g)},l.prototype.getBlob=function(g){g==null&&(g=this.Oa,this.Oa+=1);var P=ol(this.Qa,g);g=il(this.Qa,g);for(var I=new Uint8Array(P),X=0;X<P;X+=1)I[X]=A[g+X];return I},l.prototype.get=function(g,P){P=P||{},g!=null&&this.bind(g)&&this.step(),g=[];for(var I=rl(this.Qa),X=0;X<I;X+=1)switch(sl(this.Qa,X)){case 1:var Z=P.useBigInt?this.Gb(X):this.wb(X);g.push(Z);break;case 2:g.push(this.wb(X));break;case 3:g.push(this.Hb(X));break;case 4:g.push(this.getBlob(X));break;default:g.push(null)}return g},l.prototype.getColumnNames=function(){for(var g=[],P=nl(this.Qa),I=0;I<P;I+=1)g.push(al(this.Qa,I));return g},l.prototype.getAsObject=function(g,P){g=this.get(g,P),P=this.getColumnNames();for(var I={},X=0;X<P.length;X+=1)I[P[X]]=g[X];return I},l.prototype.getSQL=function(){return On(this.Qa)},l.prototype.getNormalizedSQL=function(){return Gr(this.Qa)},l.prototype.run=function(g){return g!=null&&this.bind(g),this.step(),this.reset()},l.prototype.sb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1),g=fn(g);var I=Mt(g,At);this.lb.push(I),this.db.handleError(Yr(this.Qa,P,I,g.length-1,0))},l.prototype.Bb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1);var I=Mt(g,At);this.lb.push(I),this.db.handleError(In(this.Qa,P,I,g.length,0))},l.prototype.rb=function(g,P){P==null&&(P=this.Oa,this.Oa+=1),this.db.handleError((g===(g|0)?Zr:Kr)(this.Qa,P,g))},l.prototype.Eb=function(g){g==null&&(g=this.Oa,this.Oa+=1),In(this.Qa,g,0,0,0)},l.prototype.tb=function(g,P){switch(P==null&&(P=this.Oa,this.Oa+=1),typeof g){case"string":this.sb(g,P);return;case"number":this.rb(g,P);return;case"bigint":this.sb(g.toString(),P);return;case"boolean":this.rb(g+0,P);return;case"object":if(g===null){this.Eb(P);return}if(g.length!=null){this.Bb(g,P);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+g+")."},l.prototype.Db=function(g){var P=this;return Object.keys(g).forEach(function(I){var X=$r(P.Qa,I);X!==0&&P.tb(g[I],X)}),!0},l.prototype.Cb=function(g){for(var P=0;P<g.length;P+=1)this.tb(g[P],P+1);return!0},l.prototype.reset=function(){return this.freemem(),fl(this.Qa)===0&&ul(this.Qa)===0},l.prototype.freemem=function(){for(var g;(g=this.lb.pop())!==void 0;)Nt(g)},l.prototype.free=function(){this.freemem();var g=cl(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,g},a.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var g=wt(),P=xe(4);ht(_),ht(P);try{this.db.handleError(Dn(this.db.db,this.kb,-1,_,P)),this.kb=re(P,"i32");var I=re(_,"i32");return I===0?(this.mb(),{done:!0}):(this.Za=new l(I,this.db),this.db.fb[I]=this.Za,{value:this.Za,done:!1})}catch(X){throw this.pb=Dt(this.kb),this.mb(),X}finally{_t(g)}},a.prototype.mb=function(){Nt(this.eb),this.eb=null},a.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Dt(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(a.prototype[Symbol.iterator]=function(){return this}),h.prototype.run=function(g,P){if(!this.db)throw"Database closed";if(P){g=this.prepare(g,P);try{g.step()}finally{g.free()}}else this.handleError(ne(this.db,g,0,0,_));return this},h.prototype.exec=function(g,P,I){if(!this.db)throw"Database closed";var X=wt(),Z=null;try{var de=Yt(g),De=xe(4);for(g=[];re(de,"i8")!==0;){ht(_),ht(De),this.handleError(Dn(this.db,de,-1,_,De));var ze=re(_,"i32");if(de=re(De,"i32"),ze!==0){var Me=null;for(Z=new l(ze,this),P!=null&&Z.bind(P);Z.step();)Me===null&&(Me={columns:Z.getColumnNames(),values:[]},g.push(Me)),Me.values.push(Z.get(null,I));Z.free()}}return g}catch(Ie){throw Z&&Z.free(),Ie}finally{_t(X)}},h.prototype.each=function(g,P,I,X,Z){typeof P=="function"&&(X=I,I=P,P=void 0),g=this.prepare(g,P);try{for(;g.step();)I(g.getAsObject(null,Z))}finally{g.free()}if(typeof X=="function")return X()},h.prototype.prepare=function(g,P){if(ht(_),this.handleError(Te(this.db,g,-1,_,0)),g=re(_,"i32"),g===0)throw"Nothing to prepare";var I=new l(g,this);return P!=null&&I.bind(P),this.fb[g]=I},h.prototype.iterateStatements=function(g){return new a(g,this)},h.prototype.export=function(){Object.values(this.fb).forEach(function(P){P.free()}),Object.values(this.Sa).forEach(Xe),this.Sa={},this.handleError(ie(this.db));var g=Wr(this.filename);return this.handleError(U(this.filename,_)),this.db=re(_,"i32"),Qn(this.db),g},h.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(g){g.free()}),Object.values(this.Sa).forEach(Xe),this.Sa={},this.Ya&&(Xe(this.Ya),this.Ya=void 0),this.handleError(ie(this.db)),Sn("/"+this.filename),this.db=null)},h.prototype.handleError=function(g){if(g===0)return null;throw g=tl(this.db),Error(g)},h.prototype.getRowsModified=function(){return ge(this.db)},h.prototype.create_function=function(g,P){Object.prototype.hasOwnProperty.call(this.Sa,g)&&(Xe(this.Sa[g]),delete this.Sa[g]);var I=gt(function(X,Z,de){Z=t(Z,de);try{var De=P.apply(null,Z)}catch(ze){zt(X,ze,-1);return}e(X,De)},"viii");return this.Sa[g]=I,this.handleError(jn(this.db,g,P.length,1,0,I,0,0,0)),this},h.prototype.create_aggregate=function(g,P){var I=P.init||function(){return null},X=P.finalize||function(Me){return Me},Z=P.step;if(!Z)throw"An aggregate function must have a step function in "+g;var de={};Object.hasOwnProperty.call(this.Sa,g)&&(Xe(this.Sa[g]),delete this.Sa[g]),P=g+"__finalize",Object.hasOwnProperty.call(this.Sa,P)&&(Xe(this.Sa[P]),delete this.Sa[P]);var De=gt(function(Me,Ie,en){var Ze=Un(Me,1);Object.hasOwnProperty.call(de,Ze)||(de[Ze]=I()),Ie=t(Ie,en),Ie=[de[Ze]].concat(Ie);try{de[Ze]=Z.apply(null,Ie)}catch(yl){delete de[Ze],zt(Me,yl,-1)}},"viii"),ze=gt(function(Me){var Ie=Un(Me,1);try{var en=X(de[Ie])}catch(Ze){delete de[Ie],zt(Me,Ze,-1);return}e(Me,en),delete de[Ie]},"vi");return this.Sa[g]=De,this.Sa[P]=ze,this.handleError(jn(this.db,g,Z.length-1,1,0,0,De,ze,0)),this},h.prototype.updateHook=function(g){this.Ya&&(Wn(this.db,0,0),Xe(this.Ya),this.Ya=void 0),g&&(this.Ya=gt(function(P,I,X,Z,de){switch(I){case 18:P="insert";break;case 23:P="update";break;case 9:P="delete";break;default:throw"unknown operationCode in updateHook callback: "+I}if(X=X?be(j,X):"",Z=Z?be(j,Z):"",de>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";g(P,X,Z,Number(de))},"viiiij"),Wn(this.db,this.Ya,0))},u.Database=h};var w={...u},C="./this.program",T=(e,t)=>{throw t},y="",L,z;if(S){var te=Jn;y=__dirname+"/",z=e=>(e=we(e)?new URL(e):e,te.readFileSync(e)),L=async e=>(e=we(e)?new URL(e):e,te.readFileSync(e,void 0)),!u.thisProgram&&1<process.argv.length&&(C=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),o.exports=u,T=(e,t)=>{throw process.exitCode=e,t}}else(b||v)&&(v?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),y=y.startsWith("blob:")?"":y.slice(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1),v&&(z=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),L=async e=>{if(we(e))return new Promise((l,a)=>{var h=new XMLHttpRequest;h.open("GET",e,!0),h.responseType="arraybuffer",h.onload=()=>{h.status==200||h.status==0&&h.response?l(h.response):a(h.status)},h.onerror=a,h.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var $=u.print||console.log.bind(console),K=u.printErr||console.error.bind(console);Object.assign(u,w),w=null,u.thisProgram&&(C=u.thisProgram);var x=u.wasmBinary,R,G=!1,le,A,j,ue,O,N,J,ce,_e,we=e=>e.startsWith("file://");function Ce(){var e=R.buffer;u.HEAP8=A=new Int8Array(e),u.HEAP16=ue=new Int16Array(e),u.HEAPU8=j=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAP32=O=new Int32Array(e),u.HEAPU32=N=new Uint32Array(e),u.HEAPF32=J=new Float32Array(e),u.HEAPF64=_e=new Float64Array(e),u.HEAP64=ce=new BigInt64Array(e),u.HEAPU64=new BigUint64Array(e)}var ve=0,ke=null;function qe(e){var t;throw(t=u.onAbort)==null||t.call(u,e),e="Aborted("+e+")",K(e),G=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var Oe;async function Ee(e){if(!x)try{var t=await L(e);return new Uint8Array(t)}catch{}if(e==Oe&&x)e=new Uint8Array(x);else if(z)e=z(e);else throw"both async and sync fetching of the wasm failed";return e}async function Q(e,t){try{var l=await Ee(e);return await WebAssembly.instantiate(l,t)}catch(a){K(`failed to asynchronously prepare wasm: ${a}`),qe(a)}}async function fe(e){var t=Oe;if(!x&&typeof WebAssembly.instantiateStreaming=="function"&&!we(t)&&!S)try{var l=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(l,e)}catch(a){K(`wasm streaming compile failed: ${a}`),K("falling back to ArrayBuffer instantiation")}return Q(t,e)}class Y{constructor(t){je(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var me=e=>{for(;0<e.length;)e.shift()(u)},oe=[],ae=[],V=()=>{var e=u.preRun.shift();ae.unshift(e)};function re(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return A[e];case"i8":return A[e];case"i16":return ue[e>>1];case"i32":return O[e>>2];case"i64":return ce[e>>3];case"float":return J[e>>2];case"double":return _e[e>>3];case"*":return N[e>>2];default:qe(`invalid type for getValue: ${t}`)}}var Ae=u.noExitRuntime||!0;function ht(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":A[e]=0;break;case"i8":A[e]=0;break;case"i16":ue[e>>1]=0;break;case"i32":O[e>>2]=0;break;case"i64":ce[e>>3]=BigInt(0);break;case"float":J[e>>2]=0;break;case"double":_e[e>>3]=0;break;case"*":N[e>>2]=0;break;default:qe(`invalid type for setValue: ${t}`)}}var on=typeof TextDecoder<"u"?new TextDecoder:void 0,be=(e,t=0,l=NaN)=>{var a=t+l;for(l=t;e[l]&&!(l>=a);)++l;if(16<l-t&&e.buffer&&on)return on.decode(e.subarray(t,l));for(a="";t<l;){var h=e[t++];if(h&128){var _=e[t++]&63;if((h&224)==192)a+=String.fromCharCode((h&31)<<6|_);else{var q=e[t++]&63;h=(h&240)==224?(h&15)<<12|_<<6|q:(h&7)<<18|_<<12|q<<6|e[t++]&63,65536>h?a+=String.fromCharCode(h):(h-=65536,a+=String.fromCharCode(55296|h>>10,56320|h&1023))}}else a+=String.fromCharCode(h)}return a},Dt=(e,t)=>e?be(j,e,t):"",sn=(e,t)=>{for(var l=0,a=e.length-1;0<=a;a--){var h=e[a];h==="."?e.splice(a,1):h===".."?(e.splice(a,1),l++):l&&(e.splice(a,1),l--)}if(t)for(;l;l--)e.unshift("..");return e},It=e=>{var t=e.charAt(0)==="/",l=e.slice(-1)==="/";return(e=sn(e.split("/").filter(a=>!!a),!t).join("/"))||t||(e="."),e&&l&&(e+="/"),(t?"/":"")+e},an=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},Et=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],Nr=()=>{if(S){var e=Jn;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},un=e=>{(un=Nr())(e)},zr=(...e)=>{for(var t="",l=!1,a=e.length-1;-1<=a&&!l;a--){if(l=0<=a?e[a]:"/",typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";t=l+"/"+t,l=l.charAt(0)==="/"}return t=sn(t.split("/").filter(h=>!!h),!l).join("/"),(l?"/":"")+t||"."},Ft=[],mt=e=>{for(var t=0,l=0;l<e.length;++l){var a=e.charCodeAt(l);127>=a?t++:2047>=a?t+=2:55296<=a&&57343>=a?(t+=4,++l):t+=3}return t},Qe=(e,t,l,a)=>{if(!(0<a))return 0;var h=l;a=l+a-1;for(var _=0;_<e.length;++_){var q=e.charCodeAt(_);if(55296<=q&&57343>=q){var U=e.charCodeAt(++_);q=65536+((q&1023)<<10)|U&1023}if(127>=q){if(l>=a)break;t[l++]=q}else{if(2047>=q){if(l+1>=a)break;t[l++]=192|q>>6}else{if(65535>=q){if(l+2>=a)break;t[l++]=224|q>>12}else{if(l+3>=a)break;t[l++]=240|q>>18,t[l++]=128|q>>12&63}t[l++]=128|q>>6&63}t[l++]=128|q&63}}return t[l]=0,l-h},fn=(e,t)=>{var l=Array(mt(e)+1);return e=Qe(e,l,0,l.length),t&&(l.length=e),l},cn=[];function dn(e,t){cn[e]={input:[],output:[],cb:t},Bt(e,Rr)}var Rr={open(e){var t=cn[e.node.rdev];if(!t)throw new M(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,l,a){if(!e.tty||!e.tty.cb.xb)throw new M(60);for(var h=0,_=0;_<a;_++){try{var q=e.tty.cb.xb(e.tty)}catch{throw new M(29)}if(q===void 0&&h===0)throw new M(6);if(q==null)break;h++,t[l+_]=q}return h&&(e.node.atime=Date.now()),h},write(e,t,l,a){if(!e.tty||!e.tty.cb.qb)throw new M(60);try{for(var h=0;h<a;h++)e.tty.cb.qb(e.tty,t[l+h])}catch{throw new M(29)}return a&&(e.node.mtime=e.node.ctime=Date.now()),h}},Or={xb(){e:{if(!Ft.length){var e=null;if(S){var t=Buffer.alloc(256),l=0,a=process.stdin.fd;try{l=te.readSync(a,t,0,256)}catch(h){if(h.toString().includes("EOF"))l=0;else throw h}0<l&&(e=t.slice(0,l).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}Ft=fn(e,!0)}e=Ft.shift()}return e},qb(e,t){t===null||t===10?($(be(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&($(be(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Dr={qb(e,t){t===null||t===10?(K(be(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(K(be(e.output)),e.output=[])}},ee={Wa:null,Xa(){return ee.createNode(null,"/",16895,0)},createNode(e,t,l,a){if((l&61440)===24576||(l&61440)===4096)throw new M(63);return ee.Wa||(ee.Wa={dir:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua,lookup:ee.La.lookup,hb:ee.La.hb,rename:ee.La.rename,unlink:ee.La.unlink,rmdir:ee.La.rmdir,readdir:ee.La.readdir,symlink:ee.La.symlink},stream:{Va:ee.Ma.Va}},file:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua},stream:{Va:ee.Ma.Va,read:ee.Ma.read,write:ee.Ma.write,ib:ee.Ma.ib,jb:ee.Ma.jb}},link:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua,readlink:ee.La.readlink},stream:{}},ub:{node:{Ta:ee.La.Ta,Ua:ee.La.Ua},stream:Ur}}),l=_n(e,t,l,a),Pe(l.mode)?(l.La=ee.Wa.dir.node,l.Ma=ee.Wa.dir.stream,l.Na={}):(l.mode&61440)===32768?(l.La=ee.Wa.file.node,l.Ma=ee.Wa.file.stream,l.Ra=0,l.Na=null):(l.mode&61440)===40960?(l.La=ee.Wa.link.node,l.Ma=ee.Wa.link.stream):(l.mode&61440)===8192&&(l.La=ee.Wa.ub.node,l.Ma=ee.Wa.ub.stream),l.atime=l.mtime=l.ctime=Date.now(),e&&(e.Na[t]=l,e.atime=e.mtime=e.ctime=l.atime),l},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Pe(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var l of["mode","atime","mtime","ctime"])t[l]!=null&&(e[l]=t[l]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(l=e.Na,e.Na=new Uint8Array(t),l&&e.Na.set(l.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw ee.vb},hb(e,t,l,a){return ee.createNode(e,t,l,a)},rename(e,t,l){try{var a=Ge(t,l)}catch{}if(a){if(Pe(e.mode))for(var h in a.Na)throw new M(55);Qt(a)}delete e.parent.Na[e.name],t.Na[l]=e,e.name=l,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var l=Ge(e,t),a;for(a in l.Na)throw new M(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,l){return e=ee.createNode(e,t,41471,0),e.link=l,e},readlink(e){if((e.mode&61440)!==40960)throw new M(28);return e.link}},Ma:{read(e,t,l,a,h){var _=e.node.Na;if(h>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-h,a),8<e&&_.subarray)t.set(_.subarray(h,h+e),l);else for(a=0;a<e;a++)t[l+a]=_[h+a];return e},write(e,t,l,a,h,_){if(t.buffer===A.buffer&&(_=!1),!a)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(_)return e.Na=t.subarray(l,l+a),e.Ra=a;if(e.Ra===0&&h===0)return e.Na=t.slice(l,l+a),e.Ra=a;if(h+a<=e.Ra)return e.Na.set(t.subarray(l,l+a),h),a}_=h+a;var q=e.Na?e.Na.length:0;if(q>=_||(_=Math.max(_,q*(1048576>q?2:1.125)>>>0),q!=0&&(_=Math.max(_,256)),q=e.Na,e.Na=new Uint8Array(_),0<e.Ra&&e.Na.set(q.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(l,l+a),h);else for(_=0;_<a;_++)e.Na[h+_]=t[l+_];return e.Ra=Math.max(e.Ra,h+a),a},Va(e,t,l){if(l===1?t+=e.position:l===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new M(28);return t},ib(e,t,l,a,h){if((e.node.mode&61440)!==32768)throw new M(43);if(e=e.node.Na,h&2||!e||e.buffer!==A.buffer){h=!0,a=65536*Math.ceil(t/65536);var _=zn(65536,a);if(_&&j.fill(0,_,_+a),a=_,!a)throw new M(48);e&&((0<l||l+t<e.length)&&(e.subarray?e=e.subarray(l,l+t):e=Array.prototype.slice.call(e,l,l+t)),A.set(e,a))}else h=!1,a=e.byteOffset;return{Kb:a,Ab:h}},jb(e,t,l,a){return ee.Ma.write(e,t,0,a,l,!1),0}}},hn=(e,t)=>{var l=0;return e&&(l|=365),t&&(l|=146),l},jt=null,mn={},it=[],Ir=1,Be=null,pn=!1,bn=!0,gn={},M=class{constructor(e){je(this,"name","ErrnoError");this.Pa=e}},Fr=class{constructor(){je(this,"gb",{});je(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},jr=class{constructor(e,t,l,a){je(this,"La",{});je(this,"Ma",{});je(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=Ir++,this.name=t,this.mode=l,this.rdev=a,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function Ne(e,t={}){if(!e)throw new M(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var l=0;e:for(;40>l;l++){e=e.split("/").filter(U=>!!U);for(var a=jt,h="/",_=0;_<e.length;_++){var q=_===e.length-1;if(q&&t.parent)break;if(e[_]!==".")if(e[_]==="..")h=an(h),a=a.parent;else{h=It(h+"/"+e[_]);try{a=Ge(a,e[_])}catch(U){if((U==null?void 0:U.Pa)===44&&q&&t.Jb)return{path:h};throw U}if(!a.ab||q&&!t.nb||(a=a.ab.root),(a.mode&61440)===40960&&(!q||t.$a)){if(!a.La.readlink)throw new M(52);a=a.La.readlink(a),a.charAt(0)==="/"||(a=an(h)+"/"+a),e=a+"/"+e.slice(_+1).join("/");continue e}}}return{path:h,node:a}}throw new M(32)}function Vt(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Ut(e,t){for(var l=0,a=0;a<t.length;a++)l=(l<<5)-l+t.charCodeAt(a)|0;return(e+l>>>0)%Be.length}function Qt(e){var t=Ut(e.parent.id,e.name);if(Be[t]===e)Be[t]=e.bb;else for(t=Be[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function Ge(e,t){var l=Pe(e.mode)?(l=ot(e,"x"))?l:e.La.lookup?0:2:54;if(l)throw new M(l);for(l=Be[Ut(e.id,t)];l;l=l.bb){var a=l.name;if(l.parent.id===e.id&&a===t)return l}return e.La.lookup(e,t)}function _n(e,t,l,a){return e=new jr(e,t,l,a),t=Ut(e.parent.id,e.name),e.bb=Be[t],Be[t]=e}function Pe(e){return(e&61440)===16384}function wn(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function ot(e,t){if(bn)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function vn(e,t){if(!Pe(e.mode))return 54;try{return Ge(e,t),20}catch{}return ot(e,"wx")}function yn(e,t,l){try{var a=Ge(e,t)}catch(h){return h.Pa}if(e=ot(e,"wx"))return e;if(l){if(!Pe(a.mode))return 54;if(a===a.parent||Vt(a)==="/")return 10}else if(Pe(a.mode))return 31;return 0}function kt(e){if(!e)throw new M(63);return e}function Se(e){if(e=it[e],!e)throw new M(8);return e}function En(e,t=-1){if(e=Object.assign(new Fr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!it[t])break e;throw new M(33)}return e.fd=t,it[t]=e}function Vr(e,t=-1){var l,a;return e=En(e,t),(a=(l=e.Ma)==null?void 0:l.Rb)==null||a.call(l,e),e}function Wt(e,t,l){var a=e==null?void 0:e.Ma.Ua;e=a?e:t,a??(a=t.La.Ua),kt(a),a(e,l)}var Ur={open(e){var t,l;e.Ma=mn[e.node.rdev].Ma,(l=(t=e.Ma).open)==null||l.call(t,e)},Va(){throw new M(70)}};function Bt(e,t){mn[e]={Ma:t}}function kn(e,t){var l=t==="/";if(l&&jt)throw new M(10);if(!l&&t){var a=Ne(t,{nb:!1});if(t=a.path,a=a.node,a.ab)throw new M(10);if(!Pe(a.mode))throw new M(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,l?jt=e:a&&(a.ab=t,a.Xa&&a.Xa.Ib.push(t))}function qt(e,t,l){var a=Ne(e,{parent:!0}).node;if(e=Et(e),!e)throw new M(28);if(e==="."||e==="..")throw new M(20);var h=vn(a,e);if(h)throw new M(h);if(!a.La.hb)throw new M(63);return a.La.hb(a,e,t,l)}function Qr(e,t=438){return qt(e,t&4095|32768,0)}function Fe(e,t=511){return qt(e,t&1023|16384,0)}function St(e,t,l){typeof l>"u"&&(l=t,t=438),qt(e,t|8192,l)}function Ht(e,t){if(!zr(e))throw new M(44);var l=Ne(t,{parent:!0}).node;if(!l)throw new M(44);t=Et(t);var a=vn(l,t);if(a)throw new M(a);if(!l.La.symlink)throw new M(63);l.La.symlink(l,t,e)}function qn(e){var t=Ne(e,{parent:!0}).node;e=Et(e);var l=Ge(t,e),a=yn(t,e,!0);if(a)throw new M(a);if(!t.La.rmdir)throw new M(63);if(l.ab)throw new M(10);t.La.rmdir(t,e),Qt(l)}function Sn(e){var t=Ne(e,{parent:!0}).node;if(!t)throw new M(44);e=Et(e);var l=Ge(t,e),a=yn(t,e,!1);if(a)throw new M(a);if(!t.La.unlink)throw new M(63);if(l.ab)throw new M(10);t.La.unlink(t,e),Qt(l)}function pt(e,t){return e=Ne(e,{$a:!t}).node,kt(e.La.Ta)(e)}function Cn(e,t,l,a){Wt(e,t,{mode:l&4095|t.mode&-4096,ctime:Date.now(),Fb:a})}function Ct(e,t){e=typeof e=="string"?Ne(e,{$a:!0}).node:e,Cn(null,e,t)}function Pn(e,t,l){if(Pe(t.mode))throw new M(31);if((t.mode&61440)!==32768)throw new M(28);var a=ot(t,"w");if(a)throw new M(a);Wt(e,t,{size:l,timestamp:Date.now()})}function st(e,t,l=438){if(e==="")throw new M(44);if(typeof t=="string"){var a={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof a>"u")throw Error(`Unknown file open mode: ${t}`);t=a}if(l=t&64?l&4095|32768:0,typeof e=="object")a=e;else{var h=e.endsWith("/");e=Ne(e,{$a:!(t&131072),Jb:!0}),a=e.node,e=e.path}var _=!1;if(t&64)if(a){if(t&128)throw new M(20)}else{if(h)throw new M(31);a=qt(e,l|511,0),_=!0}if(!a)throw new M(44);if((a.mode&61440)===8192&&(t&=-513),t&65536&&!Pe(a.mode))throw new M(54);if(!_&&(h=a?(a.mode&61440)===40960?32:Pe(a.mode)&&(wn(t)!=="r"||t&576)?31:ot(a,wn(t)):44))throw new M(h);return t&512&&!_&&(h=a,h=typeof h=="string"?Ne(h,{$a:!0}).node:h,Pn(null,h,0)),t&=-131713,h=En({node:a,path:Vt(a),flags:t,seekable:!0,position:0,Ma:a.Ma,Lb:[],error:!1}),h.Ma.open&&h.Ma.open(h),_&&Ct(a,l&511),!u.logReadFiles||t&1||e in gn||(gn[e]=1),h}function Xt(e){if(e.fd===null)throw new M(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{it[e.fd]=null}e.fd=null}function Tn(e,t,l){if(e.fd===null)throw new M(8);if(!e.seekable||!e.Ma.Va)throw new M(70);if(l!=0&&l!=1&&l!=2)throw new M(28);e.position=e.Ma.Va(e,t,l),e.Lb=[]}function Ln(e,t,l,a,h){if(0>a||0>h)throw new M(28);if(e.fd===null)throw new M(8);if((e.flags&2097155)===1)throw new M(8);if(Pe(e.node.mode))throw new M(31);if(!e.Ma.read)throw new M(28);var _=typeof h<"u";if(!_)h=e.position;else if(!e.seekable)throw new M(70);return t=e.Ma.read(e,t,l,a,h),_||(e.position+=t),t}function An(e,t,l,a,h){if(0>a||0>h)throw new M(28);if(e.fd===null)throw new M(8);if(!(e.flags&2097155))throw new M(8);if(Pe(e.node.mode))throw new M(31);if(!e.Ma.write)throw new M(28);e.seekable&&e.flags&1024&&Tn(e,0,2);var _=typeof h<"u";if(!_)h=e.position;else if(!e.seekable)throw new M(70);return t=e.Ma.write(e,t,l,a,h,void 0),_||(e.position+=t),t}function Wr(e){var t,l=st(e,l||0);e=pt(e).size;var a=new Uint8Array(e);return Ln(l,a,0,e,0),t=a,Xt(l),t}function He(e,t,l){e=It("/dev/"+e);var a=hn(!!t,!!l);He.yb??(He.yb=64);var h=He.yb++<<8|0;Bt(h,{open(_){_.seekable=!1},close(){var _;(_=l==null?void 0:l.buffer)!=null&&_.length&&l(10)},read(_,q,U,ie){for(var ne=0,ge=0;ge<ie;ge++){try{var Te=t()}catch{throw new M(29)}if(Te===void 0&&ne===0)throw new M(6);if(Te==null)break;ne++,q[U+ge]=Te}return ne&&(_.node.atime=Date.now()),ne},write(_,q,U,ie){for(var ne=0;ne<ie;ne++)try{l(q[U+ne])}catch{throw new M(29)}return ie&&(_.node.mtime=_.node.ctime=Date.now()),ne}}),St(e,a,h)}var pe={};function Ye(e,t,l){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":Se(e).path,t.length==0){if(!l)throw new M(44);return e}return e+"/"+t}function Pt(e,t){O[e>>2]=t.dev,O[e+4>>2]=t.mode,N[e+8>>2]=t.nlink,O[e+12>>2]=t.uid,O[e+16>>2]=t.gid,O[e+20>>2]=t.rdev,ce[e+24>>3]=BigInt(t.size),O[e+32>>2]=4096,O[e+36>>2]=t.blocks;var l=t.atime.getTime(),a=t.mtime.getTime(),h=t.ctime.getTime();return ce[e+40>>3]=BigInt(Math.floor(l/1e3)),N[e+48>>2]=l%1e3*1e6,ce[e+56>>3]=BigInt(Math.floor(a/1e3)),N[e+64>>2]=a%1e3*1e6,ce[e+72>>3]=BigInt(Math.floor(h/1e3)),N[e+80>>2]=h%1e3*1e6,ce[e+88>>3]=BigInt(t.ino),0}var Tt=void 0,Lt=()=>{var e=O[+Tt>>2];return Tt+=4,e},xt=0,Br=[0,31,60,91,121,152,182,213,244,274,305,335],Hr=[0,31,59,90,120,151,181,212,243,273,304,334],bt={},Mn=e=>{var t;le=e,Ae||0<xt||((t=u.onExit)==null||t.call(u,e),G=!0),T(e,new Y(e))},Xr=e=>{if(!G)try{if(e(),!(Ae||0<xt))try{le=e=le,Mn(e)}catch(t){t instanceof Y||t=="unwind"||T(1,t)}}catch(t){t instanceof Y||t=="unwind"||T(1,t)}},Jt={},Nn=()=>{if(!Gt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:C||"./this.program"},t;for(t in Jt)Jt[t]===void 0?delete e[t]:e[t]=Jt[t];var l=[];for(t in e)l.push(`${t}=${e[t]}`);Gt=l}return Gt},Gt,Yt=e=>{var t=mt(e)+1,l=xe(t);return Qe(e,j,l,t),l},xr=(e,t,l,a)=>{var h={string:ne=>{var ge=0;return ne!=null&&ne!==0&&(ge=Yt(ne)),ge},array:ne=>{var ge=xe(ne.length);return A.set(ne,ge),ge}};e=u["_"+e];var _=[],q=0;if(a)for(var U=0;U<a.length;U++){var ie=h[l[U]];ie?(q===0&&(q=wt()),_[U]=ie(a[U])):_[U]=a[U]}return l=e(..._),l=function(ne){return q!==0&&_t(q),t==="string"?ne?be(j,ne):"":t==="boolean"?!!ne:ne}(l)},At=0,Mt=(e,t)=>(t=t==1?xe(e.length):Zt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),j.set(e,t),t),Ke,Kt=[],We,Xe=e=>{Ke.delete(We.get(e)),We.set(e,null),Kt.push(e)},gt=(e,t)=>{if(!Ke){Ke=new WeakMap;var l=We.length;if(Ke)for(var a=0;a<0+l;a++){var h=We.get(a);h&&Ke.set(h,a)}}if(l=Ke.get(e)||0)return l;if(Kt.length)l=Kt.pop();else{try{We.grow(1)}catch(ie){throw ie instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ie}l=We.length-1}try{We.set(l,e)}catch(ie){if(!(ie instanceof TypeError))throw ie;if(typeof WebAssembly.Function=="function"){var _=WebAssembly.Function;a={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},h={parameters:[],results:t[0]=="v"?[]:[a[t[0]]]};for(var q=1;q<t.length;++q)h.parameters.push(a[t[q]]);t=new _(h,e)}else{a=[1],h=t.slice(0,1),t=t.slice(1),q={i:127,p:127,j:126,f:125,d:124,e:111},a.push(96);var U=t.length;128>U?a.push(U):a.push(U%128|128,U>>7);for(_ of t)a.push(q[_]);h=="v"?a.push(0):a.push(1,q[h]),t=[0,97,115,109,1,0,0,0,1],_=a.length,128>_?t.push(_):t.push(_%128|128,_>>7),t.push(...a),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}We.set(l,t)}return Ke.set(e,l),l};Be=Array(4096),kn(ee,"/"),Fe("/tmp"),Fe("/home"),Fe("/home/web_user"),function(){Fe("/dev"),Bt(259,{read:()=>0,write:(a,h,_,q)=>q,Va:()=>0}),St("/dev/null",259),dn(1280,Or),dn(1536,Dr),St("/dev/tty",1280),St("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,l=()=>(t===0&&(un(e),t=e.byteLength),e[--t]);He("random",l),He("urandom",l),Fe("/dev/shm"),Fe("/dev/shm/tmp")}(),function(){Fe("/proc");var e=Fe("/proc/self");Fe("/proc/self/fd"),kn({Xa(){var t=_n(e,"fd",16895,73);return t.Ma={Va:ee.Ma.Va},t.La={lookup(l,a){l=+a;var h=Se(l);return l={parent:null,Xa:{zb:"fake"},La:{readlink:()=>h.path},id:l+1},l.parent=l},readdir(){return Array.from(it.entries()).filter(([,l])=>l).map(([l])=>l.toString())}},t}},"/proc/self/fd")}(),ee.vb=new M(44),ee.vb.stack="<generic error, no stack>";var Jr={a:(e,t,l,a)=>qe(`Assertion failed: ${e?be(j,e):""}, at: `+[t?t?be(j,t):"":"unknown filename",l,a?a?be(j,a):"":"unknown function"]),i:function(e,t){try{return e=e?be(j,e):"",Ct(e,t),0}catch(l){if(typeof pe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},L:function(e,t,l){try{if(t=t?be(j,t):"",t=Ye(e,t),l&-8)return-28;var a=Ne(t,{$a:!0}).node;return a?(e="",l&4&&(e+="r"),l&2&&(e+="w"),l&1&&(e+="x"),e&&ot(a,e)?-2:0):-44}catch(h){if(typeof pe>"u"||h.name!=="ErrnoError")throw h;return-h.Pa}},j:function(e,t){try{var l=Se(e);return Cn(l,l.node,t,!1),0}catch(a){if(typeof pe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},h:function(e){try{var t=Se(e);return Wt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(l){if(typeof pe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},b:function(e,t,l){Tt=l;try{var a=Se(e);switch(t){case 0:var h=Lt();if(0>h)break;for(;it[h];)h++;return Vr(a,h).fd;case 1:case 2:return 0;case 3:return a.flags;case 4:return h=Lt(),a.flags|=h,0;case 12:return h=Lt(),ue[h+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(_){if(typeof pe>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},g:function(e,t){try{var l=Se(e),a=l.node,h=l.Ma.Ta;e=h?l:a,h??(h=a.La.Ta),kt(h);var _=h(e);return Pt(t,_)}catch(q){if(typeof pe>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var l=Se(e);if(0>t||!(l.flags&2097155))throw new M(28);return Pn(l,l.node,t),0}catch(a){if(typeof pe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},G:function(e,t){try{if(t===0)return-28;var l=mt("/")+1;return t<l?-68:(Qe("/",j,e,t),l)}catch(a){if(typeof pe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},K:function(e,t){try{return e=e?be(j,e):"",Pt(t,pt(e,!0))}catch(l){if(typeof pe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},C:function(e,t,l){try{return t=t?be(j,t):"",t=Ye(e,t),Fe(t,l),0}catch(a){if(typeof pe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},J:function(e,t,l,a){try{t=t?be(j,t):"";var h=a&256;return t=Ye(e,t,a&4096),Pt(l,h?pt(t,!0):pt(t))}catch(_){if(typeof pe>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},x:function(e,t,l,a){Tt=a;try{t=t?be(j,t):"",t=Ye(e,t);var h=a?Lt():0;return st(t,l,h).fd}catch(_){if(typeof pe>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},v:function(e,t,l,a){try{if(t=t?be(j,t):"",t=Ye(e,t),0>=a)return-28;var h=Ne(t).node;if(!h)throw new M(44);if(!h.La.readlink)throw new M(28);var _=h.La.readlink(h),q=Math.min(a,mt(_)),U=A[l+q];return Qe(_,j,l,a+1),A[l+q]=U,q}catch(ie){if(typeof pe>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Pa}},u:function(e){try{return e=e?be(j,e):"",qn(e),0}catch(t){if(typeof pe>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?be(j,e):"",Pt(t,pt(e))}catch(l){if(typeof pe>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},r:function(e,t,l){try{return t=t?be(j,t):"",t=Ye(e,t),l===0?Sn(t):l===512?qn(t):qe("Invalid flags passed to unlinkat"),0}catch(a){if(typeof pe>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},q:function(e,t,l){try{t=t?be(j,t):"",t=Ye(e,t,!0);var a=Date.now(),h,_;if(l){var q=N[l>>2]+4294967296*O[l+4>>2],U=O[l+8>>2];U==1073741823?h=a:U==1073741822?h=null:h=1e3*q+U/1e6,l+=16,q=N[l>>2]+4294967296*O[l+4>>2],U=O[l+8>>2],U==1073741823?_=a:U==1073741822?_=null:_=1e3*q+U/1e6}else _=h=a;if((_??h)!==null){e=h;var ie=Ne(t,{$a:!0}).node;kt(ie.La.Ua)(ie,{atime:e,mtime:_})}return 0}catch(ne){if(typeof pe>"u"||ne.name!=="ErrnoError")throw ne;return-ne.Pa}},m:()=>qe(""),l:()=>{Ae=!1,xt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),O[t>>2]=e.getSeconds(),O[t+4>>2]=e.getMinutes(),O[t+8>>2]=e.getHours(),O[t+12>>2]=e.getDate(),O[t+16>>2]=e.getMonth(),O[t+20>>2]=e.getFullYear()-1900,O[t+24>>2]=e.getDay();var l=e.getFullYear();O[t+28>>2]=(l%4!==0||l%100===0&&l%400!==0?Hr:Br)[e.getMonth()]+e.getDate()-1|0,O[t+36>>2]=-(60*e.getTimezoneOffset()),l=new Date(e.getFullYear(),6,1).getTimezoneOffset();var a=new Date(e.getFullYear(),0,1).getTimezoneOffset();O[t+32>>2]=(l!=a&&e.getTimezoneOffset()==Math.min(a,l))|0},y:function(e,t,l,a,h,_,q){h=-9007199254740992>h||9007199254740992<h?NaN:Number(h);try{if(isNaN(h))return 61;var U=Se(a);if(t&2&&!(l&2)&&(U.flags&2097155)!==2)throw new M(2);if((U.flags&2097155)===1)throw new M(2);if(!U.Ma.ib)throw new M(43);if(!e)throw new M(28);var ie=U.Ma.ib(U,e,h,t,l),ne=ie.Kb;return O[_>>2]=ie.Ab,N[q>>2]=ne,0}catch(ge){if(typeof pe>"u"||ge.name!=="ErrnoError")throw ge;return-ge.Pa}},z:function(e,t,l,a,h,_){_=-9007199254740992>_||9007199254740992<_?NaN:Number(_);try{var q=Se(h);if(l&2){if(l=_,(q.node.mode&61440)!==32768)throw new M(43);if(!(a&2)){var U=j.slice(e,e+t);q.Ma.jb&&q.Ma.jb(q,U,l,t,a)}}}catch(ie){if(typeof pe>"u"||ie.name!=="ErrnoError")throw ie;return-ie.Pa}},n:(e,t)=>{if(bt[e]&&(clearTimeout(bt[e].id),delete bt[e]),!t)return 0;var l=setTimeout(()=>{delete bt[e],Xr(()=>Rn(e,performance.now()))},t);return bt[e]={id:l,Xb:t},0},B:(e,t,l,a)=>{var h=new Date().getFullYear(),_=new Date(h,0,1).getTimezoneOffset();h=new Date(h,6,1).getTimezoneOffset(),N[e>>2]=60*Math.max(_,h),O[t>>2]=+(_!=h),t=q=>{var U=Math.abs(q);return`UTC${0<=q?"-":"+"}${String(Math.floor(U/60)).padStart(2,"0")}${String(U%60).padStart(2,"0")}`},e=t(_),t=t(h),h<_?(Qe(e,j,l,17),Qe(t,j,a,17)):(Qe(e,j,a,17),Qe(t,j,l,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=j.length;if(e>>>=0,2147483648<e)return!1;for(var l=1;4>=l;l*=2){var a=t*(1+.2/l);a=Math.min(a,e+100663296);e:{a=(Math.min(2147483648,65536*Math.ceil(Math.max(e,a)/65536))-R.buffer.byteLength+65535)/65536|0;try{R.grow(a),Ce();var h=1;break e}catch{}h=void 0}if(h)return!0}return!1},E:(e,t)=>{var l=0;return Nn().forEach((a,h)=>{var _=t+l;for(h=N[e+4*h>>2]=_,_=0;_<a.length;++_)A[h++]=a.charCodeAt(_);A[h]=0,l+=a.length+1}),0},F:(e,t)=>{var l=Nn();N[e>>2]=l.length;var a=0;return l.forEach(h=>a+=h.length+1),N[t>>2]=a,0},e:function(e){try{var t=Se(e);return Xt(t),0}catch(l){if(typeof pe>"u"||l.name!=="ErrnoError")throw l;return l.Pa}},p:function(e,t){try{var l=Se(e);return A[t]=l.tty?2:Pe(l.mode)?3:(l.mode&61440)===40960?7:4,ue[t+2>>1]=0,ce[t+8>>3]=BigInt(0),ce[t+16>>3]=BigInt(0),0}catch(a){if(typeof pe>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},w:function(e,t,l,a){try{e:{var h=Se(e);e=t;for(var _,q=t=0;q<l;q++){var U=N[e>>2],ie=N[e+4>>2];e+=8;var ne=Ln(h,A,U,ie,_);if(0>ne){var ge=-1;break e}if(t+=ne,ne<ie)break;typeof _<"u"&&(_+=ne)}ge=t}return N[a>>2]=ge,0}catch(Te){if(typeof pe>"u"||Te.name!=="ErrnoError")throw Te;return Te.Pa}},D:function(e,t,l,a){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var h=Se(e);return Tn(h,t,l),ce[a>>3]=BigInt(h.position),h.ob&&t===0&&l===0&&(h.ob=null),0}catch(_){if(typeof pe>"u"||_.name!=="ErrnoError")throw _;return _.Pa}},I:function(e){var l;try{var t=Se(e);return(l=t.Ma)!=null&&l.fsync?t.Ma.fsync(t):0}catch(a){if(typeof pe>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},t:function(e,t,l,a){try{e:{var h=Se(e);e=t;for(var _,q=t=0;q<l;q++){var U=N[e>>2],ie=N[e+4>>2];e+=8;var ne=An(h,A,U,ie,_);if(0>ne){var ge=-1;break e}if(t+=ne,ne<ie)break;typeof _<"u"&&(_+=ne)}ge=t}return N[a>>2]=ge,0}catch(Te){if(typeof pe>"u"||Te.name!=="ErrnoError")throw Te;return Te.Pa}},k:Mn},W;(async function(){var l;function e(a){var h;return W=a.exports,R=W.M,Ce(),We=W.O,ve--,(h=u.monitorRunDependencies)==null||h.call(u,ve),ve==0&&ke&&(a=ke,ke=null,a()),W}ve++,(l=u.monitorRunDependencies)==null||l.call(u,ve);var t={a:Jr};return u.instantiateWasm?new Promise(a=>{u.instantiateWasm(t,(h,_)=>{e(h),a(h.exports)})}):(Oe??(Oe=u.locateFile?u.locateFile("sql-wasm.wasm",y):y+"sql-wasm.wasm"),e((await fe(t)).instance))})(),u._sqlite3_free=e=>(u._sqlite3_free=W.P)(e),u._sqlite3_value_text=e=>(u._sqlite3_value_text=W.Q)(e),u._sqlite3_prepare_v2=(e,t,l,a,h)=>(u._sqlite3_prepare_v2=W.R)(e,t,l,a,h),u._sqlite3_step=e=>(u._sqlite3_step=W.S)(e),u._sqlite3_reset=e=>(u._sqlite3_reset=W.T)(e),u._sqlite3_exec=(e,t,l,a,h)=>(u._sqlite3_exec=W.U)(e,t,l,a,h),u._sqlite3_finalize=e=>(u._sqlite3_finalize=W.V)(e),u._sqlite3_column_name=(e,t)=>(u._sqlite3_column_name=W.W)(e,t),u._sqlite3_column_text=(e,t)=>(u._sqlite3_column_text=W.X)(e,t),u._sqlite3_column_type=(e,t)=>(u._sqlite3_column_type=W.Y)(e,t),u._sqlite3_errmsg=e=>(u._sqlite3_errmsg=W.Z)(e),u._sqlite3_clear_bindings=e=>(u._sqlite3_clear_bindings=W._)(e),u._sqlite3_value_blob=e=>(u._sqlite3_value_blob=W.$)(e),u._sqlite3_value_bytes=e=>(u._sqlite3_value_bytes=W.aa)(e),u._sqlite3_value_double=e=>(u._sqlite3_value_double=W.ba)(e),u._sqlite3_value_int=e=>(u._sqlite3_value_int=W.ca)(e),u._sqlite3_value_type=e=>(u._sqlite3_value_type=W.da)(e),u._sqlite3_result_blob=(e,t,l,a)=>(u._sqlite3_result_blob=W.ea)(e,t,l,a),u._sqlite3_result_double=(e,t)=>(u._sqlite3_result_double=W.fa)(e,t),u._sqlite3_result_error=(e,t,l)=>(u._sqlite3_result_error=W.ga)(e,t,l),u._sqlite3_result_int=(e,t)=>(u._sqlite3_result_int=W.ha)(e,t),u._sqlite3_result_int64=(e,t)=>(u._sqlite3_result_int64=W.ia)(e,t),u._sqlite3_result_null=e=>(u._sqlite3_result_null=W.ja)(e),u._sqlite3_result_text=(e,t,l,a)=>(u._sqlite3_result_text=W.ka)(e,t,l,a),u._sqlite3_aggregate_context=(e,t)=>(u._sqlite3_aggregate_context=W.la)(e,t),u._sqlite3_column_count=e=>(u._sqlite3_column_count=W.ma)(e),u._sqlite3_data_count=e=>(u._sqlite3_data_count=W.na)(e),u._sqlite3_column_blob=(e,t)=>(u._sqlite3_column_blob=W.oa)(e,t),u._sqlite3_column_bytes=(e,t)=>(u._sqlite3_column_bytes=W.pa)(e,t),u._sqlite3_column_double=(e,t)=>(u._sqlite3_column_double=W.qa)(e,t),u._sqlite3_bind_blob=(e,t,l,a,h)=>(u._sqlite3_bind_blob=W.ra)(e,t,l,a,h),u._sqlite3_bind_double=(e,t,l)=>(u._sqlite3_bind_double=W.sa)(e,t,l),u._sqlite3_bind_int=(e,t,l)=>(u._sqlite3_bind_int=W.ta)(e,t,l),u._sqlite3_bind_text=(e,t,l,a,h)=>(u._sqlite3_bind_text=W.ua)(e,t,l,a,h),u._sqlite3_bind_parameter_index=(e,t)=>(u._sqlite3_bind_parameter_index=W.va)(e,t),u._sqlite3_sql=e=>(u._sqlite3_sql=W.wa)(e),u._sqlite3_normalized_sql=e=>(u._sqlite3_normalized_sql=W.xa)(e),u._sqlite3_changes=e=>(u._sqlite3_changes=W.ya)(e),u._sqlite3_close_v2=e=>(u._sqlite3_close_v2=W.za)(e),u._sqlite3_create_function_v2=(e,t,l,a,h,_,q,U,ie)=>(u._sqlite3_create_function_v2=W.Aa)(e,t,l,a,h,_,q,U,ie),u._sqlite3_update_hook=(e,t,l)=>(u._sqlite3_update_hook=W.Ba)(e,t,l),u._sqlite3_open=(e,t)=>(u._sqlite3_open=W.Ca)(e,t);var Zt=u._malloc=e=>(Zt=u._malloc=W.Da)(e),Nt=u._free=e=>(Nt=u._free=W.Ea)(e);u._RegisterExtensionFunctions=e=>(u._RegisterExtensionFunctions=W.Fa)(e);var zn=(e,t)=>(zn=W.Ga)(e,t),Rn=(e,t)=>(Rn=W.Ha)(e,t),_t=e=>(_t=W.Ia)(e),xe=e=>(xe=W.Ja)(e),wt=()=>(wt=W.Ka)();u.stackSave=()=>wt(),u.stackRestore=e=>_t(e),u.stackAlloc=e=>xe(e),u.cwrap=(e,t,l,a)=>{var h=!l||l.every(_=>_==="number"||_==="boolean");return t!=="string"&&h&&!a?u["_"+e]:(..._)=>xr(e,t,l,_)},u.addFunction=gt,u.removeFunction=Xe,u.UTF8ToString=Dt,u.ALLOC_NORMAL=At,u.allocate=Mt,u.allocateUTF8OnStack=Yt;function $t(){function e(){var h;if(u.calledRun=!0,!G){if(!u.noFSInit&&!pn){var t,l;pn=!0,a??(a=u.stdin),t??(t=u.stdout),l??(l=u.stderr),a?He("stdin",a):Ht("/dev/tty","/dev/stdin"),t?He("stdout",null,t):Ht("/dev/tty","/dev/stdout"),l?He("stderr",null,l):Ht("/dev/tty1","/dev/stderr"),st("/dev/stdin",0),st("/dev/stdout",1),st("/dev/stderr",1)}if(W.N(),bn=!1,(h=u.onRuntimeInitialized)==null||h.call(u),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var a=u.postRun.shift();oe.unshift(a)}me(oe)}}if(0<ve)ke=$t;else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)V();me(ae),0<ve?ke=$t:u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),e()},1)):e()}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return $t(),d}),r)};o.exports=i,o.exports.default=i})(Mr);var Ul=Mr.exports;const Ql=Il(Ul);class Wl{constructor(){this.db=null,this.sqlJs=null}async initialize(){if(!this.sqlJs){const r=window.location.protocol==="http:"?"/node_modules/sql.js/dist/sql-wasm.wasm":"./sql-wasm.wasm";this.sqlJs=await Ql({locateFile:i=>r})}}async loadFromFile(n,r){await this.initialize();try{const i=await r.readDatabase(n);if(i){const s=new Uint8Array(i);this.db=new this.sqlJs.Database(s)}else this.db=new this.sqlJs.Database;return!0}catch(i){return console.error("Error loading database:",i),this.db=new this.sqlJs.Database,!1}}createNew(){if(!this.sqlJs)throw new Error("SQL.js not initialized");this.db=new this.sqlJs.Database}createTable(n,r){if(!this.db)throw new Error("Database not initialized");const i=r.map(c=>{let f;return c.type==="number"?f="REAL":c.type==="boolean"?f="INTEGER":f="TEXT",`"${c.name}" ${f}`}).join(", "),s=`CREATE TABLE "${n}" (${i})`;this.db.run(s)}insertData(n,r,i){if(!this.db)throw new Error("Database not initialized");if(i.length===0)return;const s=r.map(p=>`"${p.name}"`).join(", "),c=r.map(()=>"?").join(", "),f=`INSERT INTO "${n}" (${s}) VALUES (${c})`,d=this.db.prepare(f);for(const p of i){const u=r.map(b=>{const v=p[b.name];return v==null?null:b.type==="boolean"?v?1:0:v});d.run(u)}d.free()}getTableNames(){if(!this.db)return[];const n=this.db.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%'");if(n.length===0)return[];const r=[];for(const i of n[0].values)r.push(i[0]);return r}getTableData(n,r=1e3,i=0){if(!this.db)return{columns:[],rows:[]};const s=this.db.exec(`SELECT * FROM "${n}" LIMIT ${r} OFFSET ${i}`);if(s.length===0)return{columns:[],rows:[]};const c=s[0].columns,f=s[0].values.map(d=>{const p={};return c.forEach((u,b)=>{p[u]=d[b]}),p});return{columns:c,rows:f}}getAllTableData(n){if(!this.db)return{columns:[],rows:[]};const r=this.db.exec(`SELECT * FROM "${n}"`);if(r.length===0)return{columns:[],rows:[]};const i=r[0].columns,s=r[0].values.map(c=>{const f={};return i.forEach((d,p)=>{f[d]=c[p]}),f});return{columns:i,rows:s}}getTableRowCount(n){if(!this.db)return 0;const r=this.db.exec(`SELECT COUNT(*) as count FROM "${n}"`);return r.length===0?0:r[0].values[0][0]}async saveToFile(n,r){if(!this.db)throw new Error("Database not initialized");const i=this.db.export(),s=Array.from(i);await r.writeDatabase(n,s)}deleteTable(n){if(!this.db)throw new Error("Database not initialized");this.db.run(`DROP TABLE IF EXISTS "${n}"`)}executeSQL(n){if(!this.db)throw new Error("Database not initialized");try{if(n.trim().toUpperCase().startsWith("SELECT")){const i=this.db.exec(n);if(i.length===0)return{type:"select",columns:[],rows:[],rowCount:0};const s=i[0].columns,c=i[0].values.map(f=>{const d={};return s.forEach((p,u)=>{d[p]=f[u]}),d});return{type:"select",columns:s,rows:c,rowCount:c.length}}else{this.db.run(n);const i=this.db.exec("SELECT changes() as count");return{type:"modify",affectedRows:i.length>0?i[0].values[0][0]:0}}}catch(r){throw new Error(`SQL execution error: ${r.message}`)}}getTableSchema(n){if(!this.db)return[];try{const r=this.db.exec(`PRAGMA table_info("${n}")`);return r.length===0?[]:r[0].values.map(i=>({name:i[1],type:i[2],notnull:i[3],defaultValue:i[4],pk:i[5]}))}catch(r){return console.error("Error getting table schema:",r),[]}}close(){this.db&&(this.db.close(),this.db=null)}}class Bl{constructor(n){this.api=n,this.logPath=null}async initialize(){this.logPath=await this.api.getDefaultLogPath()}getLogPath(){return this.logPath}async loadLog(){try{return await this.api.readLogFile(this.logPath)||""}catch(n){return console.error("Error loading log file:",n),""}}async saveLog(n){try{return await this.api.writeLogFile(this.logPath,n),!0}catch(r){return console.error("Error saving log file:",r),!1}}parseLogEntries(n){if(!n||n.trim()==="")return[];const r=n.split(`
`),i=[];let s=null;for(let c=0;c<r.length;c++){const f=r[c].trim(),d=f.match(/^\[(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})\]/);d?(s&&i.push(s),s={timestamp:d[1],lineNumber:c+1,naturalLanguage:"",sql:"",error:null,result:null}):s&&(f.startsWith("NL:")?s.naturalLanguage=f.substring(3).trim():f.startsWith("SQL:")?s.sql=f.substring(4).trim():f.startsWith("ERROR:")?s.error=f.substring(6).trim():f.startsWith("RESULT:")?s.result=f.substring(7).trim():f&&!f.startsWith("---")&&(s.sql&&!s.error&&!s.result?s.sql+=" "+f:s.error&&!s.result?s.error+=" "+f:s.result?s.result+=" "+f:!s.naturalLanguage&&!s.sql&&(s.naturalLanguage=f)))}return s&&i.push(s),i}formatLogEntry(n){let r=`[${n.timestamp}]
`;return n.naturalLanguage&&(r+=`NL: ${n.naturalLanguage}
`),n.sql&&(r+=`SQL: ${n.sql}
`),n.error&&(r+=`ERROR: ${n.error}
`),n.result&&(r+=`RESULT: ${n.result}
`),r+=`---
`,r}}class Gn{static parseSchemaLine(n){const r=[],i=n.split(","),s=["string","number","boolean"];for(const c of i){const f=c.trim();if(!f)continue;const d=f.indexOf(":");if(d>0){const p=f.substring(0,d).trim(),u=f.substring(d+1).trim().toLowerCase();if(!s.includes(u))throw new Error(`Invalid column type modifier "${u}" for column "${p}". Valid types are: string, number, boolean`);r.push({name:p,type:u})}else r.push({name:f,type:"string"})}return r}static parseCSV(n){const r=n.split(/\r?\n/).filter(c=>c.trim());if(r.length===0)throw new Error("CSV file is empty");const i=this.parseSchemaLine(r[0]),s=[];for(let c=1;c<r.length;c++){const f=this.parseCSVLine(r[c]),d={};i.forEach((p,u)=>{let b=f[u]||"";if(b=b.trim(),p.type==="number")d[p.name]=b===""?null:parseFloat(b),isNaN(d[p.name])&&(d[p.name]=null);else if(p.type==="boolean"){const v=b.toLowerCase();d[p.name]=v==="true"||v==="1"||v==="yes"||v==="y"}else d[p.name]=b}),s.push(d)}return{schema:i,data:s}}static parseCSVLine(n){const r=[];let i="",s=!1;for(let c=0;c<n.length;c++){const f=n[c];f==='"'?s&&n[c+1]==='"'?(i+='"',c++):s=!s:f===","&&!s?(r.push(i),i=""):i+=f}return r.push(i),r}static getTableNameFromPath(n){return n.split(/[/\\]/).pop().replace(/\.csv$/i,"").replace(/[^a-zA-Z0-9_]/g,"_")}}function Yn(o,n,r){const i=o.slice();return i[1]=n[r],i}function Kn(o,n,r){const i=o.slice();return i[4]=n[r],i}function Zn(o,n,r){const i=o.slice();return i[4]=n[r],i}function $n(o){let n,r=o[4]+"",i;return{c(){n=E("th"),i=D(r),k(n,"class","svelte-1l2op9x")},m(s,c){H(s,n,c),m(n,i)},p(s,c){c&1&&r!==(r=s[4]+"")&&se(i,r)},d(s){s&&B(n)}}}function er(o){let n,r=(o[1][o[4]]??"")+"",i;return{c(){n=E("td"),i=D(r),k(n,"class","svelte-1l2op9x")},m(s,c){H(s,n,c),m(n,i)},p(s,c){c&1&&r!==(r=(s[1][s[4]]??"")+"")&&se(i,r)},d(s){s&&B(n)}}}function tr(o){let n,r,i=Le(o[0].columns),s=[];for(let c=0;c<i.length;c+=1)s[c]=er(Kn(o,i,c));return{c(){n=E("tr");for(let c=0;c<s.length;c+=1)s[c].c();r=F(),k(n,"class","svelte-1l2op9x")},m(c,f){H(c,n,f);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(n,null);m(n,r)},p(c,f){if(f&1){i=Le(c[0].columns);let d;for(d=0;d<i.length;d+=1){const p=Kn(c,i,d);s[d]?s[d].p(p,f):(s[d]=er(p),s[d].c(),s[d].m(n,r))}for(;d<s.length;d+=1)s[d].d(1);s.length=i.length}},d(c){c&&B(n),ct(s,c)}}}function Hl(o){let n,r,i,s,c,f,d=Le(o[0].columns),p=[];for(let v=0;v<d.length;v+=1)p[v]=$n(Zn(o,d,v));let u=Le(o[0].rows),b=[];for(let v=0;v<u.length;v+=1)b[v]=tr(Yn(o,u,v));return{c(){n=E("div"),r=E("table"),i=E("thead"),s=E("tr");for(let v=0;v<p.length;v+=1)p[v].c();c=F(),f=E("tbody");for(let v=0;v<b.length;v+=1)b[v].c();k(s,"class","svelte-1l2op9x"),k(i,"class","svelte-1l2op9x"),k(r,"class","data-table svelte-1l2op9x"),k(n,"class","table-container svelte-1l2op9x")},m(v,S){H(v,n,S),m(n,r),m(r,i),m(i,s);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(s,null);m(r,c),m(r,f);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(f,null)},p(v,[S]){if(S&1){d=Le(v[0].columns);let w;for(w=0;w<d.length;w+=1){const C=Zn(v,d,w);p[w]?p[w].p(C,S):(p[w]=$n(C),p[w].c(),p[w].m(s,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=d.length}if(S&1){u=Le(v[0].rows);let w;for(w=0;w<u.length;w+=1){const C=Yn(v,u,w);b[w]?b[w].p(C,S):(b[w]=tr(C),b[w].c(),b[w].m(f,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=u.length}},i:he,o:he,d(v){v&&B(n),ct(p,v),ct(b,v)}}}function Xl(o,n,r){let{tableData:i={columns:[],rows:[]}}=n;return o.$$set=s=>{"tableData"in s&&r(0,i=s.tableData)},[i]}class xl extends lt{constructor(n){super(),rt(this,n,Xl,Hl,et,{tableData:0})}}class Jl{static sqliteTypeToCsvType(n,r,i=[]){const s=n.toUpperCase();if(s==="TEXT")return"string";if(s==="REAL")return"number";if(s==="INTEGER"){if(i.length>0&&i.every(u=>u==null||u===0||u===1||u==="0"||u==="1"||u===!0||u===!1))return"boolean";const c=r.toLowerCase();return["active","enabled","is","has","can","should","flag","bool"].some(p=>c.startsWith(p)||c.includes("_"+p)||c.includes(p+"_"))?"boolean":"number"}return"string"}static formatValue(n,r){if(n==null)return"";if(r==="boolean")return n===0||n==="0"?"false":n===1||n==="1"||n?"true":"false";const i=String(n);return i.includes(",")||i.includes('"')||i.includes(`
`)||i.includes("\r")?`"${i.replace(/"/g,'""')}"`:i}static exportTableToCSV(n,r,i){if(!r||r.length===0)throw new Error("Table schema is required");if(!i||!i.rows||i.rows.length===0)return r.map(b=>{const v=this.sqliteTypeToCsvType(b.type,b.name,[]);return`${b.name}:${v}`}).join(", ")+`
`;const s=i.rows.slice(0,10),c={};r.forEach(u=>{c[u.name]=s.map(b=>b[u.name])});let p=r.map(u=>{const b=this.sqliteTypeToCsvType(u.type,u.name,c[u.name]||[]);return`${u.name}:${b}`}).join(", ")+`
`;for(const u of i.rows){const b=r.map(v=>{const S=this.sqliteTypeToCsvType(v.type,v.name,c[v.name]||[]);return this.formatValue(u[v.name],S)});p+=b.join(",")+`
`}return p}}function nr(o,n,r){const i=o.slice();return i[20]=n[r],i}function Gl(o){let n,r=Le(o[0]),i=[];for(let s=0;s<r.length;s+=1)i[s]=rr(nr(o,r,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();n=Sr()},m(s,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(s,c);H(s,n,c)},p(s,c){if(c&1){r=Le(s[0]);let f;for(f=0;f<r.length;f+=1){const d=nr(s,r,f);i[f]?i[f].p(d,c):(i[f]=rr(d),i[f].c(),i[f].m(n.parentNode,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(s){s&&B(n),ct(i,s)}}}function Yl(o){let n;return{c(){n=E("option"),n.textContent="No tables available",n.__value="",nn(n,n.__value)},m(r,i){H(r,n,i)},p:he,d(r){r&&B(n)}}}function rr(o){let n,r=o[20]+"",i,s;return{c(){n=E("option"),i=D(r),n.__value=s=o[20],nn(n,n.__value)},m(c,f){H(c,n,f),m(n,i)},p(c,f){f&1&&r!==(r=c[20]+"")&&se(i,r),f&1&&s!==(s=c[20])&&(n.__value=s,nn(n,n.__value))},d(c){c&&B(n)}}}function lr(o){let n,r=o[9]?"Exporting...":"Export CSV",i,s,c,f;return{c(){n=E("button"),i=D(r),k(n,"class","export-button svelte-tz36jk"),k(n,"title","Export table to CSV"),n.disabled=s=o[9]||o[8]||!o[3]},m(d,p){H(d,n,p),m(n,i),c||(f=ye(n,"click",o[16]),c=!0)},p(d,p){p&512&&r!==(r=d[9]?"Exporting...":"Export CSV")&&se(i,r),p&776&&s!==(s=d[9]||d[8]||!d[3])&&(n.disabled=s)},d(d){d&&B(n),c=!1,f()}}}function Kl(o){let n;return{c(){n=E("div"),n.textContent="Select a table to view",k(n,"class","empty-message svelte-tz36jk")},m(r,i){H(r,n,i)},p:he,i:he,o:he,d(r){r&&B(n)}}}function Zl(o){let n;return{c(){n=E("div"),n.textContent="Table is empty",k(n,"class","empty-message svelte-tz36jk")},m(r,i){H(r,n,i)},p:he,i:he,o:he,d(r){r&&B(n)}}}function $l(o){let n,r,i,s,c,f,d,p,u,b,v,S,w,C,T,y=o[5]+1+"",L,z,te,$=o[6]+1+"",K,x,R,G,le,A,j,ue,O,N,J,ce=o[5]*Je+1+"",_e,we,Ce=Math.min((o[5]+1)*Je,o[4])+"",ve,ke,qe,Oe,Ee,Q,fe,Y,me,oe,ae=o[2][o[1]]&&ir(o);return R=new xl({props:{tableData:o[7]}}),{c(){n=E("div"),r=E("span"),i=D("Table: "),s=E("strong"),c=D(o[1]),f=F(),ae&&ae.c(),d=F(),p=E("span"),u=D("Rows: "),b=E("strong"),v=D(o[4]),S=F(),w=E("span"),C=D("Page: "),T=E("strong"),L=D(y),z=D(" of "),te=E("strong"),K=D($),x=F(),dt(R.$$.fragment),G=F(),le=E("div"),A=E("button"),j=D(" Previous"),O=F(),N=E("span"),J=D("Showing "),_e=D(ce),we=D(" - "),ve=D(Ce),ke=D(" of "),qe=D(o[4]),Oe=F(),Ee=E("button"),Q=D("Next "),k(s,"class","svelte-tz36jk"),k(b,"class","svelte-tz36jk"),k(T,"class","svelte-tz36jk"),k(te,"class","svelte-tz36jk"),k(n,"class","table-info svelte-tz36jk"),k(A,"class","page-button svelte-tz36jk"),A.disabled=ue=!o[11],k(N,"class","page-info svelte-tz36jk"),k(Ee,"class","page-button svelte-tz36jk"),Ee.disabled=fe=!o[10],k(le,"class","pagination svelte-tz36jk")},m(V,re){H(V,n,re),m(n,r),m(r,i),m(r,s),m(s,c),m(n,f),ae&&ae.m(n,null),m(n,d),m(n,p),m(p,u),m(p,b),m(b,v),m(n,S),m(n,w),m(w,C),m(w,T),m(T,L),m(w,z),m(w,te),m(te,K),H(V,x,re),tt(R,V,re),H(V,G,re),H(V,le,re),m(le,A),m(A,j),m(le,O),m(le,N),m(N,J),m(N,_e),m(N,we),m(N,ve),m(N,ke),m(N,qe),m(le,Oe),m(le,Ee),m(Ee,Q),Y=!0,me||(oe=[ye(A,"click",o[14]),ye(Ee,"click",o[15])],me=!0)},p(V,re){(!Y||re&2)&&se(c,V[1]),V[2][V[1]]?ae?ae.p(V,re):(ae=ir(V),ae.c(),ae.m(n,d)):ae&&(ae.d(1),ae=null),(!Y||re&16)&&se(v,V[4]),(!Y||re&32)&&y!==(y=V[5]+1+"")&&se(L,y),(!Y||re&64)&&$!==($=V[6]+1+"")&&se(K,$);const Ae={};re&128&&(Ae.tableData=V[7]),R.$set(Ae),(!Y||re&2048&&ue!==(ue=!V[11]))&&(A.disabled=ue),(!Y||re&32)&&ce!==(ce=V[5]*Je+1+"")&&se(_e,ce),(!Y||re&48)&&Ce!==(Ce=Math.min((V[5]+1)*Je,V[4])+"")&&se(ve,Ce),(!Y||re&16)&&se(qe,V[4]),(!Y||re&1024&&fe!==(fe=!V[10]))&&(Ee.disabled=fe)},i(V){Y||(Re(R.$$.fragment,V),Y=!0)},o(V){Ve(R.$$.fragment,V),Y=!1},d(V){V&&(B(n),B(x),B(G),B(le)),ae&&ae.d(),nt(R,V),me=!1,Ue(oe)}}}function ei(o){let n;return{c(){n=E("div"),n.textContent="Loading table data...",k(n,"class","loading-message svelte-tz36jk")},m(r,i){H(r,n,i)},p:he,i:he,o:he,d(r){r&&B(n)}}}function ir(o){let n,r,i,s=o[2][o[1]].split(/[/\\]/).pop()+"",c;return{c(){n=E("span"),r=D("Source: "),i=E("strong"),c=D(s),k(i,"class","svelte-tz36jk")},m(f,d){H(f,n,d),m(n,r),m(n,i),m(i,c)},p(f,d){d&6&&s!==(s=f[2][f[1]].split(/[/\\]/).pop()+"")&&se(c,s)},d(f){f&&B(n)}}}function ti(o){let n,r,i,s,c,f,d,p,u,b,v,S,w,C,T,y,L,z;function te(A,j){return A[0].length===0?Yl:Gl}let $=te(o),K=$(o),x=o[1]&&o[3]&&lr(o);const R=[ei,$l,Zl,Kl],G=[];function le(A,j){return A[8]?0:A[1]&&A[7].columns.length>0?1:A[1]?2:3}return C=le(o),T=G[C]=R[C](o),{c(){n=E("div"),r=E("header"),i=E("div"),s=E("h2"),s.textContent="Database Tables",c=F(),f=E("select"),K.c(),p=F(),u=E("div"),x&&x.c(),b=F(),v=E("button"),v.textContent="",S=F(),w=E("div"),T.c(),k(s,"class","svelte-tz36jk"),k(f,"class","table-selector svelte-tz36jk"),k(i,"class","header-left svelte-tz36jk"),k(v,"class","refresh-button svelte-tz36jk"),k(v,"title","Refresh"),k(u,"class","header-right svelte-tz36jk"),k(r,"class","viewer-header svelte-tz36jk"),k(w,"class","viewer-content svelte-tz36jk"),k(n,"class","table-viewer svelte-tz36jk")},m(A,j){H(A,n,j),m(n,r),m(r,i),m(i,s),m(i,c),m(i,f),K.m(f,null),Hn(f,o[1]||""),m(r,p),m(r,u),x&&x.m(u,null),m(u,b),m(u,v),m(n,S),m(n,w),G[C].m(w,null),y=!0,L||(z=[ye(f,"change",o[12]),ye(v,"click",o[13])],L=!0)},p(A,[j]){$===($=te(A))&&K?K.p(A,j):(K.d(1),K=$(A),K&&(K.c(),K.m(f,null))),(!y||j&3&&d!==(d=A[1]||""))&&Hn(f,A[1]||""),A[1]&&A[3]?x?x.p(A,j):(x=lr(A),x.c(),x.m(u,b)):x&&(x.d(1),x=null);let ue=C;C=le(A),C===ue?G[C].p(A,j):(Lr(),Ve(G[ue],1,1,()=>{G[ue]=null}),Ar(),T=G[C],T?T.p(A,j):(T=G[C]=R[C](A),T.c()),Re(T,1),T.m(w,null))},i(A){y||(Re(T),y=!0)},o(A){Ve(T),y=!1},d(A){A&&B(n),K.d(),x&&x.d(),G[C].d(),L=!1,Ue(z)}}}let Je=100;function ni(o,n,r){let i,s,c,{tables:f=[]}=n,{currentTable:d=null}=n,{dbManager:p=null}=n,{tableToCsvMap:u={}}=n,{electronAPI:b=null}=n;const v=Ot();let S={columns:[],rows:[]},w=0,C=0,T=!1,y=!1;async function L(){if(!(!d||!p)){r(8,T=!0);try{r(4,w=p.getTableRowCount(d));const R=C*Je;r(7,S=p.getTableData(d,Je,R))}catch(R){console.error("Error loading table data:",R)}finally{r(8,T=!1)}}}function z(R){const G=R.target.value;G&&(r(5,C=0),v("tableSelect",{table:G}))}function te(){L(),v("refresh")}function $(){C>0&&(r(5,C--,C),L())}function K(){const R=Math.ceil(w/Je)-1;C<R&&(r(5,C++,C),L())}async function x(){if(!(!d||!p||!b||y)){r(9,y=!0);try{const R=p.getTableSchema(d);if(!R||R.length===0){alert("Unable to get table schema");return}const G=p.getAllTableData(d);if(!G||G.rows.length===0){alert("Table is empty, nothing to export");return}const le=Jl.exportTableToCSV(d,R,G),A=await b.saveFile({title:"Export Table to CSV",defaultPath:`${d}.csv`,filters:[{name:"CSV Files",extensions:["csv"]}]});if(!A)return;await b.writeCsvFile(A,le),alert(`Table "${d}" exported successfully to ${A}`)}catch(R){console.error("Error exporting table:",R),alert(`Error exporting table: ${R.message}`)}finally{r(9,y=!1)}}}return o.$$set=R=>{"tables"in R&&r(0,f=R.tables),"currentTable"in R&&r(1,d=R.currentTable),"dbManager"in R&&r(17,p=R.dbManager),"tableToCsvMap"in R&&r(2,u=R.tableToCsvMap),"electronAPI"in R&&r(3,b=R.electronAPI)},o.$$.update=()=>{o.$$.dirty&131074&&d&&p&&L(),o.$$.dirty&10&&d&&console.log("Current table set:",d,"electronAPI available:",!!b),o.$$.dirty&16&&r(6,i=Math.ceil(w/Je)-1),o.$$.dirty&32&&r(11,s=C>0),o.$$.dirty&96&&r(10,c=C<i)},[f,d,u,b,w,C,i,S,T,y,c,s,z,te,$,K,x,p]}class ri extends lt{constructor(n){super(),rt(this,n,ni,ti,et,{tables:0,currentTable:1,dbManager:17,tableToCsvMap:2,electronAPI:3})}}function li(o){let n,r,i,s,c;return{c(){n=E("div"),r=E("div"),i=F(),s=E("p"),c=D(o[0]),k(r,"class","spinner svelte-1ywxz8e"),k(s,"class","message svelte-1ywxz8e"),k(n,"class","loading-container svelte-1ywxz8e")},m(f,d){H(f,n,d),m(n,r),m(n,i),m(n,s),m(s,c)},p(f,[d]){d&1&&se(c,f[0])},i:he,o:he,d(f){f&&B(n)}}}function ii(o,n,r){let{message:i="Loading..."}=n;return o.$$set=s=>{"message"in s&&r(0,i=s.message)},[i]}class oi extends lt{constructor(n){super(),rt(this,n,ii,li,et,{message:0})}}function or(o,n,r){const i=o.slice();return i[7]=n[r],i}function si(o){let n;return{c(){n=E("p"),n.textContent="No CSV files specified",k(n,"class","no-files svelte-fu6li4")},m(r,i){H(r,n,i)},p:he,d(r){r&&B(n)}}}function ai(o){let n,r=Le(o[0].csvFiles),i=[];for(let s=0;s<r.length;s+=1)i[s]=sr(or(o,r,s));return{c(){n=E("ul");for(let s=0;s<i.length;s+=1)i[s].c();k(n,"class","svelte-fu6li4")},m(s,c){H(s,n,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(n,null)},p(s,c){if(c&1){r=Le(s[0].csvFiles);let f;for(f=0;f<r.length;f+=1){const d=or(s,r,f);i[f]?i[f].p(d,c):(i[f]=sr(d),i[f].c(),i[f].m(n,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=r.length}},d(s){s&&B(n),ct(i,s)}}}function sr(o){let n,r,i=o[7]+"",s;return{c(){n=E("li"),r=E("code"),s=D(i),k(r,"class","svelte-fu6li4"),k(n,"class","svelte-fu6li4")},m(c,f){H(c,n,f),m(n,r),m(r,s)},p(c,f){f&1&&i!==(i=c[7]+"")&&se(s,i)},d(c){c&&B(n)}}}function ui(o){var fe,Y,me;let n,r,i,s,c,f,d,p,u,b,v,S,w,C,T=(((fe=o[0])==null?void 0:fe.databasePath)||"Not specified")+"",y,L,z,te,$=(((me=(Y=o[0])==null?void 0:Y.csvFiles)==null?void 0:me.length)||0)+"",K,x,R,G,le,A,j,ue,O,N=(o[2]||JSON.stringify(o[0],null,2))+"",J,ce,_e,we,Ce,ve,ke,qe;function Oe(oe,ae){var V;return(V=oe[0])!=null&&V.csvFiles&&oe[0].csvFiles.length>0?ai:si}let Ee=Oe(o),Q=Ee(o);return{c(){n=E("div"),r=E("div"),i=E("h2"),i.textContent="Configuration File Preview",s=F(),c=E("p"),f=D("File: "),d=E("code"),p=D(o[1]),u=F(),b=E("div"),v=E("h3"),v.textContent="Database Path:",S=F(),w=E("div"),C=E("code"),y=D(T),L=F(),z=E("h3"),te=D("CSV Files ("),K=D($),x=D("):"),R=F(),G=E("div"),Q.c(),le=F(),A=E("div"),j=E("h3"),j.textContent="Raw File Content:",ue=F(),O=E("pre"),J=D(N),ce=F(),_e=E("div"),we=E("button"),we.textContent="Cancel",Ce=F(),ve=E("button"),ve.textContent="Proceed with Loading",k(i,"class","svelte-fu6li4"),k(d,"class","svelte-fu6li4"),k(c,"class","config-path svelte-fu6li4"),k(v,"class","svelte-fu6li4"),k(C,"class","svelte-fu6li4"),k(w,"class","config-value svelte-fu6li4"),k(z,"class","svelte-fu6li4"),k(G,"class","csv-files-list svelte-fu6li4"),k(j,"class","svelte-fu6li4"),k(O,"class","svelte-fu6li4"),k(A,"class","raw-json svelte-fu6li4"),k(b,"class","config-display svelte-fu6li4"),k(we,"class","button secondary svelte-fu6li4"),k(ve,"class","button primary svelte-fu6li4"),k(_e,"class","actions svelte-fu6li4"),k(r,"class","preview-content svelte-fu6li4"),k(n,"class","config-preview svelte-fu6li4")},m(oe,ae){H(oe,n,ae),m(n,r),m(r,i),m(r,s),m(r,c),m(c,f),m(c,d),m(d,p),m(r,u),m(r,b),m(b,v),m(b,S),m(b,w),m(w,C),m(C,y),m(b,L),m(b,z),m(z,te),m(z,K),m(z,x),m(b,R),m(b,G),Q.m(G,null),m(b,le),m(b,A),m(A,j),m(A,ue),m(A,O),m(O,J),m(r,ce),m(r,_e),m(_e,we),m(_e,Ce),m(_e,ve),ke||(qe=[ye(we,"click",o[4]),ye(ve,"click",o[3])],ke=!0)},p(oe,[ae]){var V,re,Ae;ae&2&&se(p,oe[1]),ae&1&&T!==(T=(((V=oe[0])==null?void 0:V.databasePath)||"Not specified")+"")&&se(y,T),ae&1&&$!==($=(((Ae=(re=oe[0])==null?void 0:re.csvFiles)==null?void 0:Ae.length)||0)+"")&&se(K,$),Ee===(Ee=Oe(oe))&&Q?Q.p(oe,ae):(Q.d(1),Q=Ee(oe),Q&&(Q.c(),Q.m(G,null))),ae&5&&N!==(N=(oe[2]||JSON.stringify(oe[0],null,2))+"")&&se(J,N)},i:he,o:he,d(oe){oe&&B(n),Q.d(),ke=!1,Ue(qe)}}}function fi(o,n,r){let{config:i=null}=n,{configPath:s=""}=n,{configManager:c=null}=n;const f=Ot();let d="";Pr(async()=>{if(c&&s)try{r(2,d=await c.readConfigFileRaw(s)||"")}catch(b){console.error("Error reading raw config:",b),r(2,d=JSON.stringify(i,null,2))}else r(2,d=JSON.stringify(i,null,2))});function p(){f("proceed")}function u(){f("cancel")}return o.$$set=b=>{"config"in b&&r(0,i=b.config),"configPath"in b&&r(1,s=b.configPath),"configManager"in b&&r(5,c=b.configManager)},[i,s,d,p,u,c]}class ci extends lt{constructor(n){super(),rt(this,n,fi,ui,et,{config:0,configPath:1,configManager:5})}}function ar(o,n,r){const i=o.slice();return i[12]=n[r],i}function di(o){let n,r,i,s,c,f,d,p,u,b,v=o[0].length+"",S,w,C,T,y,L,z,te,$,K,x=o[2]?"Deleting...":`Delete Selected (${o[1].size})`,R,G,le,A,j=Le(o[0]),ue=[];for(let O=0;O<j.length;O+=1)ue[O]=ur(ar(o,j,O));return{c(){n=E("p"),n.textContent="The following tables already exist in the database. Select the tables you want to delete before loading new CSV files.",r=F(),i=E("div"),s=E("div"),c=E("label"),f=E("input"),d=F(),p=E("span"),u=E("strong"),b=D("Select All ("),S=D(v),w=D(" tables)"),C=F(),T=E("div");for(let O=0;O<ue.length;O+=1)ue[O].c();y=F(),L=E("div"),z=E("button"),te=D("Skip (Keep All Tables)"),$=F(),K=E("button"),R=D(x),k(n,"class","info-text svelte-byhfly"),k(f,"type","checkbox"),f.checked=o[3],k(f,"class","svelte-byhfly"),k(c,"class","checkbox-label svelte-byhfly"),k(s,"class","select-all-container svelte-byhfly"),k(T,"class","table-list svelte-byhfly"),k(i,"class","table-list-container svelte-byhfly"),k(z,"class","button secondary svelte-byhfly"),z.disabled=o[2],k(K,"class","button danger svelte-byhfly"),K.disabled=G=o[2]||!o[4],k(L,"class","actions svelte-byhfly")},m(O,N){H(O,n,N),H(O,r,N),H(O,i,N),m(i,s),m(s,c),m(c,f),m(c,d),m(c,p),m(p,u),m(u,b),m(u,S),m(u,w),m(i,C),m(i,T);for(let J=0;J<ue.length;J+=1)ue[J]&&ue[J].m(T,null);H(O,y,N),H(O,L,N),m(L,z),m(z,te),m(L,$),m(L,K),m(K,R),le||(A=[ye(f,"change",o[6]),ye(z,"click",o[8]),ye(K,"click",o[7])],le=!0)},p(O,N){if(N&8&&(f.checked=O[3]),N&1&&v!==(v=O[0].length+"")&&se(S,v),N&35){j=Le(O[0]);let J;for(J=0;J<j.length;J+=1){const ce=ar(O,j,J);ue[J]?ue[J].p(ce,N):(ue[J]=ur(ce),ue[J].c(),ue[J].m(T,null))}for(;J<ue.length;J+=1)ue[J].d(1);ue.length=j.length}N&4&&(z.disabled=O[2]),N&6&&x!==(x=O[2]?"Deleting...":`Delete Selected (${O[1].size})`)&&se(R,x),N&20&&G!==(G=O[2]||!O[4])&&(K.disabled=G)},d(O){O&&(B(n),B(r),B(i),B(y),B(L)),ct(ue,O),le=!1,Ue(A)}}}function hi(o){let n,r,i,s,c,f;return{c(){n=E("div"),r=E("p"),r.textContent="No existing tables found in the database.",i=F(),s=E("button"),s.textContent="Proceed to Load CSV Files",k(r,"class","svelte-byhfly"),k(s,"class","button primary svelte-byhfly"),k(n,"class","no-tables svelte-byhfly")},m(d,p){H(d,n,p),m(n,r),m(n,i),m(n,s),c||(f=ye(s,"click",o[8]),c=!0)},p:he,d(d){d&&B(n),c=!1,f()}}}function ur(o){let n,r,i,s,c,f,d=o[12]+"",p,u,b,v;function S(){return o[10](o[12])}return{c(){n=E("div"),r=E("label"),i=E("input"),c=F(),f=E("span"),p=D(d),u=F(),k(i,"type","checkbox"),i.checked=s=o[1].has(o[12]),k(i,"class","svelte-byhfly"),k(f,"class","table-name svelte-byhfly"),k(r,"class","checkbox-label svelte-byhfly"),k(n,"class","table-item svelte-byhfly")},m(w,C){H(w,n,C),m(n,r),m(r,i),m(r,c),m(r,f),m(f,p),m(n,u),b||(v=ye(i,"change",S),b=!0)},p(w,C){o=w,C&3&&s!==(s=o[1].has(o[12]))&&(i.checked=s),C&1&&d!==(d=o[12]+"")&&se(p,d)},d(w){w&&B(n),b=!1,v()}}}function mi(o){let n,r,i,s;function c(p,u){return p[0].length===0?hi:di}let f=c(o),d=f(o);return{c(){n=E("div"),r=E("div"),i=E("h2"),i.textContent="Existing Database Tables",s=F(),d.c(),k(i,"class","svelte-byhfly"),k(r,"class","manager-content svelte-byhfly"),k(n,"class","table-manager svelte-byhfly")},m(p,u){H(p,n,u),m(n,r),m(r,i),m(r,s),d.m(r,null)},p(p,[u]){f===(f=c(p))&&d?d.p(p,u):(d.d(1),d=f(p),d&&(d.c(),d.m(r,null)))},i:he,o:he,d(p){p&&B(n),d.d()}}}function pi(o,n,r){let i,s,{tables:c=[]}=n,{dbManager:f=null}=n;const d=Ot();let p=!1,u=new Set;function b(T){u.has(T)?u.delete(T):u.add(T),r(1,u)}function v(){u.size===c.length?u.clear():r(1,u=new Set(c)),r(1,u)}async function S(){if(u.size===0){d("proceed");return}r(2,p=!0);try{for(const T of u)f&&f.db&&f.db.run(`DROP TABLE IF EXISTS "${T}"`);d("tablesDeleted")}catch(T){console.error("Error deleting tables:",T)}finally{r(2,p=!1)}}function w(){d("proceed")}const C=T=>b(T);return o.$$set=T=>{"tables"in T&&r(0,c=T.tables),"dbManager"in T&&r(9,f=T.dbManager)},o.$$.update=()=>{o.$$.dirty&2&&r(4,i=u.size>0),o.$$.dirty&3&&r(3,s=c.length>0&&u.size===c.length)},[c,u,p,s,i,b,v,S,w,f,C]}class bi extends lt{constructor(n){super(),rt(this,n,pi,mi,et,{tables:0,dbManager:9})}}function fr(o,n,r){const i=o.slice();return i[8]=n[r],i[10]=r,i}function cr(o){let n,r,i,s,c,f,d;return{c(){n=E("div"),r=E("pre"),i=D(o[1]),s=F(),c=E("button"),c.textContent="",k(r,"class","svelte-115fefa"),k(c,"class","svelte-115fefa"),k(n,"class","error-banner svelte-115fefa")},m(p,u){H(p,n,u),m(n,r),m(r,i),m(n,s),m(n,c),f||(d=ye(c,"click",o[4]),f=!0)},p(p,u){u&2&&se(i,p[1])},d(p){p&&B(n),f=!1,d()}}}function gi(o){let n=[],r=new Map,i,s=Le(o[0]);const c=f=>f[10];for(let f=0;f<s.length;f+=1){let d=fr(o,s,f),p=c(d);r.set(p,n[f]=gr(p,d))}return{c(){for(let f=0;f<n.length;f+=1)n[f].c();i=Sr()},m(f,d){for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(f,d);H(f,i,d)},p(f,d){d&1&&(s=Le(f[0]),n=zl(n,d,c,1,f,s,r,i.parentNode,Nl,gr,i,fr))},d(f){f&&B(i);for(let d=0;d<n.length;d+=1)n[d].d(f)}}}function _i(o){let n;return{c(){n=E("div"),n.textContent="No log entries yet. Execute some commands to see them here.",k(n,"class","empty-message svelte-115fefa")},m(r,i){H(r,n,i)},p:he,d(r){r&&B(n)}}}function dr(o){let n;return{c(){n=E("span"),n.textContent="ERROR",k(n,"class","error-badge svelte-115fefa")},m(r,i){H(r,n,i)},d(r){r&&B(n)}}}function hr(o){let n,r,i,s=o[8].naturalLanguage+"",c;return{c(){n=E("div"),r=E("strong"),r.textContent="NL:",i=F(),c=D(s),k(r,"class","svelte-115fefa"),k(n,"class","entry-line svelte-115fefa")},m(f,d){H(f,n,d),m(n,r),m(n,i),m(n,c)},p(f,d){d&1&&s!==(s=f[8].naturalLanguage+"")&&se(c,s)},d(f){f&&B(n)}}}function mr(o){let n,r,i,s,c=o[8].sql+"",f;return{c(){n=E("div"),r=E("strong"),r.textContent="SQL:",i=F(),s=E("code"),f=D(c),k(r,"class","svelte-115fefa"),k(s,"class","svelte-115fefa"),k(n,"class","entry-line svelte-115fefa")},m(d,p){H(d,n,p),m(n,r),m(n,i),m(n,s),m(s,f)},p(d,p){p&1&&c!==(c=d[8].sql+"")&&se(f,c)},d(d){d&&B(n)}}}function pr(o){let n,r,i,s=o[8].error+"",c;return{c(){n=E("div"),r=E("strong"),r.textContent="ERROR:",i=F(),c=D(s),k(r,"class","svelte-115fefa"),k(n,"class","entry-line error svelte-115fefa")},m(f,d){H(f,n,d),m(n,r),m(n,i),m(n,c)},p(f,d){d&1&&s!==(s=f[8].error+"")&&se(c,s)},d(f){f&&B(n)}}}function br(o){let n,r,i,s=o[8].result+"",c;return{c(){n=E("div"),r=E("strong"),r.textContent="RESULT:",i=F(),c=D(s),k(r,"class","svelte-115fefa"),k(n,"class","entry-line result svelte-115fefa")},m(f,d){H(f,n,d),m(n,r),m(n,i),m(n,c)},p(f,d){d&1&&s!==(s=f[8].result+"")&&se(c,s)},d(f){f&&B(n)}}}function gr(o,n){let r,i,s,c,f=n[8].timestamp+"",d,p,u,b,v,S,w,C,T,y=n[8].error&&dr(),L=n[8].naturalLanguage&&hr(n),z=n[8].sql&&mr(n),te=n[8].error&&pr(n),$=n[8].result&&br(n);return{key:o,first:null,c(){r=E("div"),i=E("div"),s=E("span"),c=D("["),d=D(f),p=D("]"),u=F(),y&&y.c(),b=F(),L&&L.c(),v=F(),z&&z.c(),S=F(),te&&te.c(),w=F(),$&&$.c(),C=F(),k(s,"class","timestamp svelte-115fefa"),k(i,"class","entry-header svelte-115fefa"),k(r,"class",T="log-entry "+(n[8].error?"has-error":"")+" svelte-115fefa"),this.first=r},m(K,x){H(K,r,x),m(r,i),m(i,s),m(s,c),m(s,d),m(s,p),m(i,u),y&&y.m(i,null),m(r,b),L&&L.m(r,null),m(r,v),z&&z.m(r,null),m(r,S),te&&te.m(r,null),m(r,w),$&&$.m(r,null),m(r,C)},p(K,x){n=K,x&1&&f!==(f=n[8].timestamp+"")&&se(d,f),n[8].error?y||(y=dr(),y.c(),y.m(i,null)):y&&(y.d(1),y=null),n[8].naturalLanguage?L?L.p(n,x):(L=hr(n),L.c(),L.m(r,v)):L&&(L.d(1),L=null),n[8].sql?z?z.p(n,x):(z=mr(n),z.c(),z.m(r,S)):z&&(z.d(1),z=null),n[8].error?te?te.p(n,x):(te=pr(n),te.c(),te.m(r,w)):te&&(te.d(1),te=null),n[8].result?$?$.p(n,x):($=br(n),$.c(),$.m(r,C)):$&&($.d(1),$=null),x&1&&T!==(T="log-entry "+(n[8].error?"has-error":"")+" svelte-115fefa")&&k(r,"class",T)},d(K){K&&B(r),y&&y.d(),L&&L.d(),z&&z.d(),te&&te.d(),$&&$.d()}}}function wi(o){let n,r,i,s,c,f,d,p,u,b,v,S,w=o[1]&&cr(o);function C(L,z){return L[0].length===0?_i:gi}let T=C(o),y=T(o);return{c(){n=E("div"),r=E("header"),i=E("h2"),i.textContent="SQL Command Log",s=F(),c=E("div"),f=E("button"),f.textContent="Refresh",d=F(),w&&w.c(),p=F(),u=E("div"),b=E("div"),y.c(),k(i,"class","svelte-115fefa"),k(f,"class","button refresh svelte-115fefa"),k(c,"class","header-actions svelte-115fefa"),k(r,"class","log-header svelte-115fefa"),k(b,"class","log-display svelte-115fefa"),k(u,"class","log-content svelte-115fefa"),k(n,"class","log-viewer svelte-115fefa")},m(L,z){H(L,n,z),m(n,r),m(r,i),m(r,s),m(r,c),m(c,f),m(n,d),w&&w.m(n,null),m(n,p),m(n,u),m(u,b),y.m(b,null),v||(S=ye(f,"click",o[2]),v=!0)},p(L,[z]){L[1]?w?w.p(L,z):(w=cr(L),w.c(),w.m(n,p)):w&&(w.d(1),w=null),T===(T=C(L))&&y?y.p(L,z):(y.d(1),y=T(L),y&&(y.c(),y.m(b,null)))},i:he,o:he,d(L){L&&B(n),w&&w.d(),y.d(),v=!1,S()}}}function vi(o,n,r){let{logManager:i=null}=n;Ot();let s="",c=[],f="";async function d(){if(i)try{s=await i.loadLog(),p()}catch(b){console.error("Error loading log:",b),r(1,f=`Error loading log: ${b.message}`)}}function p(){i&&r(0,c=i.parseLogEntries(s))}const u=()=>r(1,f="");return o.$$set=b=>{"logManager"in b&&r(3,i=b.logManager)},o.$$.update=()=>{o.$$.dirty&8&&i&&d()},[c,f,d,i,u]}class yi extends lt{constructor(n){super(),rt(this,n,vi,wi,et,{logManager:3})}}const{window:Ei}=Sl;function _r(o){let n,r,i;return{c(){n=E("div"),r=D("Version "),i=D(o[12]),k(n,"class","version-banner svelte-7zqrgv")},m(s,c){H(s,n,c),m(n,r),m(n,i)},p(s,c){c[0]&4096&&se(i,s[12])},d(s){s&&B(n)}}}function wr(o){let n,r,i,s=o[13].connected?"":"",c,f,d,p=o[13].message+"",u,b,v,S,w,C,T,y=o[13].suggestion&&vr(o);return{c(){n=E("div"),r=E("div"),i=E("span"),c=D(s),f=F(),d=E("span"),u=D(p),b=F(),y&&y.c(),v=F(),S=E("button"),S.textContent="",k(i,"class","llm-status-icon svelte-7zqrgv"),k(d,"class","llm-status-message svelte-7zqrgv"),k(r,"class","llm-status-content svelte-7zqrgv"),k(S,"class","llm-status-close svelte-7zqrgv"),k(S,"title","Dismiss"),k(n,"class",w="llm-status-banner "+(o[13].connected?"connected":"disconnected")+" svelte-7zqrgv")},m(L,z){H(L,n,z),m(n,r),m(r,i),m(i,c),m(r,f),m(r,d),m(d,u),m(r,b),y&&y.m(r,null),m(n,v),m(n,S),C||(T=ye(S,"click",o[30]),C=!0)},p(L,z){z[0]&8192&&s!==(s=L[13].connected?"":"")&&se(c,s),z[0]&8192&&p!==(p=L[13].message+"")&&se(u,p),L[13].suggestion?y?y.p(L,z):(y=vr(L),y.c(),y.m(r,null)):y&&(y.d(1),y=null),z[0]&8192&&w!==(w="llm-status-banner "+(L[13].connected?"connected":"disconnected")+" svelte-7zqrgv")&&k(n,"class",w)},d(L){L&&B(n),y&&y.d(),C=!1,T()}}}function vr(o){let n,r,i=o[13].suggestion+"",s,c;return{c(){n=E("span"),r=D("("),s=D(i),c=D(")"),k(n,"class","llm-status-suggestion svelte-7zqrgv")},m(f,d){H(f,n,d),m(n,r),m(n,s),m(n,c)},p(f,d){d[0]&8192&&i!==(i=f[13].suggestion+"")&&se(s,i)},d(f){f&&B(n)}}}function yr(o){let n,r,i,s,c,f;return{c(){n=E("div"),r=D(o[11]),i=F(),s=E("button"),s.textContent="",k(s,"class","svelte-7zqrgv"),k(n,"class","error-banner svelte-7zqrgv")},m(d,p){H(d,n,p),m(n,r),m(n,i),m(n,s),c||(f=ye(s,"click",o[31]),c=!0)},p(d,p){p[0]&2048&&se(r,d[11])},d(d){d&&B(n),c=!1,f()}}}function ki(o){let n,r,i,s,c,f,d,p,u,b;return d=new yi({props:{logManager:o[5]}}),d.$on("refresh",o[24]),{c(){n=E("div"),r=E("div"),i=E("button"),i.textContent="Table View",s=F(),c=E("button"),c.textContent="Log View",f=F(),dt(d.$$.fragment),k(i,"class","toggle-button svelte-7zqrgv"),k(c,"class","toggle-button active svelte-7zqrgv"),k(r,"class","view-toggle svelte-7zqrgv"),k(n,"class","viewer-container svelte-7zqrgv")},m(v,S){H(v,n,S),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),tt(d,n,null),p=!0,u||(b=ye(i,"click",o[25]),u=!0)},p(v,S){const w={};S[0]&32&&(w.logManager=v[5]),d.$set(w)},i(v){p||(Re(d.$$.fragment,v),p=!0)},o(v){Ve(d.$$.fragment,v),p=!1},d(v){v&&B(n),nt(d),u=!1,b()}}}function qi(o){let n,r,i,s,c,f,d,p,u,b,v,S=o[2]&&window.electronAPI&&Er(o);return p=new ri({props:{tables:o[8],currentTable:o[2],dbManager:o[0],tableToCsvMap:o[9],electronAPI:window.electronAPI}}),p.$on("tableSelect",o[23]),p.$on("refresh",o[24]),{c(){n=E("div"),r=E("div"),i=E("button"),i.textContent="Table View",s=F(),c=E("button"),c.textContent="Log View",f=F(),S&&S.c(),d=F(),dt(p.$$.fragment),k(i,"class","toggle-button active svelte-7zqrgv"),k(c,"class","toggle-button svelte-7zqrgv"),k(r,"class","view-toggle svelte-7zqrgv"),k(n,"class","viewer-container svelte-7zqrgv")},m(w,C){H(w,n,C),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),S&&S.m(n,null),m(n,d),tt(p,n,null),u=!0,b||(v=ye(c,"click",o[25]),b=!0)},p(w,C){w[2]&&window.electronAPI?S?S.p(w,C):(S=Er(w),S.c(),S.m(n,d)):S&&(S.d(1),S=null);const T={};C[0]&256&&(T.tables=w[8]),C[0]&4&&(T.currentTable=w[2]),C[0]&1&&(T.dbManager=w[0]),C[0]&512&&(T.tableToCsvMap=w[9]),p.$set(T)},i(w){u||(Re(p.$$.fragment,w),u=!0)},o(w){Ve(p.$$.fragment,w),u=!1},d(w){w&&B(n),S&&S.d(),nt(p),b=!1,v()}}}function Si(o){let n,r;return n=new oi({props:{message:o[10]}}),{c(){dt(n.$$.fragment)},m(i,s){tt(n,i,s),r=!0},p(i,s){const c={};s[0]&1024&&(c.message=i[10]),n.$set(c)},i(i){r||(Re(n.$$.fragment,i),r=!0)},o(i){Ve(n.$$.fragment,i),r=!1},d(i){nt(n,i)}}}function Ci(o){let n,r;return n=new ci({props:{config:o[6],configPath:o[7],configManager:o[4]}}),n.$on("proceed",o[21]),n.$on("cancel",o[22]),{c(){dt(n.$$.fragment)},m(i,s){tt(n,i,s),r=!0},p(i,s){const c={};s[0]&64&&(c.config=i[6]),s[0]&128&&(c.configPath=i[7]),s[0]&16&&(c.configManager=i[4]),n.$set(c)},i(i){r||(Re(n.$$.fragment,i),r=!0)},o(i){Ve(n.$$.fragment,i),r=!1},d(i){nt(n,i)}}}function Pi(o){let n,r;return n=new bi({props:{tables:o[8],dbManager:o[0]}}),n.$on("tablesDeleted",o[20]),n.$on("proceed",o[21]),{c(){dt(n.$$.fragment)},m(i,s){tt(n,i,s),r=!0},p(i,s){const c={};s[0]&256&&(c.tables=i[8]),s[0]&1&&(c.dbManager=i[0]),n.$set(c)},i(i){r||(Re(n.$$.fragment,i),r=!0)},o(i){Ve(n.$$.fragment,i),r=!1},d(i){nt(n,i)}}}function Er(o){let n;function r(c,f){return c[16]?Mi:c[19]?Ai:c[3].length===0?Li:Ti}let i=r(o),s=i(o);return{c(){n=E("div"),s.c(),k(n,"class","commands-panel svelte-7zqrgv")},m(c,f){H(c,n,f),s.m(n,null)},p(c,f){i===(i=r(c))&&s?s.p(c,f):(s.d(1),s=i(c),s&&(s.c(),s.m(n,null)))},d(c){c&&B(n),s.d()}}}function Ti(o){let n,r,i=o[3].length+"",s,c;return{c(){n=E("div"),r=D("All commands completed ("),s=D(i),c=D(" total)"),k(n,"class","commands-complete svelte-7zqrgv")},m(f,d){H(f,n,d),m(n,r),m(n,s),m(n,c)},p(f,d){d[0]&8&&i!==(i=f[3].length+"")&&se(s,i)},d(f){f&&B(n)}}}function Li(o){let n;return{c(){n=E("div"),n.textContent="No commands loaded. Create a commands.txt file in the application directory.",k(n,"class","commands-info svelte-7zqrgv")},m(r,i){H(r,n,i)},p:he,d(r){r&&B(n)}}}function Ai(o){let n,r,i,s,c,f,d,p,u,b,v=o[15]?"Executing...":"Execute Next Command",S,w,C;return{c(){n=E("div"),r=E("div"),i=D("Next Command ("),s=D(o[18]),c=D("):"),f=F(),d=E("div"),p=D(o[17]),u=F(),b=E("button"),S=D(v),k(r,"class","command-label svelte-7zqrgv"),k(d,"class","command-text svelte-7zqrgv"),k(b,"class","execute-next-button svelte-7zqrgv"),b.disabled=o[15],k(b,"title","Execute this command"),k(n,"class","next-command-display svelte-7zqrgv")},m(T,y){H(T,n,y),m(n,r),m(r,i),m(r,s),m(r,c),m(n,f),m(n,d),m(d,p),m(n,u),m(n,b),m(b,S),w||(C=ye(b,"click",o[26]),w=!0)},p(T,y){y[0]&262144&&se(s,T[18]),y[0]&131072&&se(p,T[17]),y[0]&32768&&v!==(v=T[15]?"Executing...":"Execute Next Command")&&se(S,v),y[0]&32768&&(b.disabled=T[15])},d(T){T&&B(n),w=!1,C()}}}function Mi(o){let n,r;return{c(){n=E("div"),r=D(o[16]),k(n,"class","commands-error svelte-7zqrgv")},m(i,s){H(i,n,s),m(n,r)},p(i,s){s[0]&65536&&se(r,i[16])},d(i){i&&B(n)}}}function Ni(o){let n,r,i,s,c,f,d,p,u,b=o[12]&&_r(o),v=o[14]&&o[13]&&wr(o),S=o[11]&&yr(o);const w=[Pi,Ci,Si,qi,ki],C=[];function T(y,L){return y[1]==="tableManager"?0:y[1]==="configPreview"?1:y[1]==="loading"?2:y[1]==="viewer"?3:y[1]==="logView"?4:-1}return~(c=T(o))&&(f=C[c]=w[c](o)),{c(){n=E("div"),b&&b.c(),r=F(),v&&v.c(),i=F(),S&&S.c(),s=F(),f&&f.c(),k(n,"class","app svelte-7zqrgv")},m(y,L){H(y,n,L),b&&b.m(n,null),m(n,r),v&&v.m(n,null),m(n,i),S&&S.m(n,null),m(n,s),~c&&C[c].m(n,null),d=!0,p||(u=ye(Ei,"beforeunload",o[29]),p=!0)},p(y,L){y[12]?b?b.p(y,L):(b=_r(y),b.c(),b.m(n,r)):b&&(b.d(1),b=null),y[14]&&y[13]?v?v.p(y,L):(v=wr(y),v.c(),v.m(n,i)):v&&(v.d(1),v=null),y[11]?S?S.p(y,L):(S=yr(y),S.c(),S.m(n,s)):S&&(S.d(1),S=null);let z=c;c=T(y),c===z?~c&&C[c].p(y,L):(f&&(Lr(),Ve(C[z],1,1,()=>{C[z]=null}),Ar()),~c?(f=C[c],f?f.p(y,L):(f=C[c]=w[c](y),f.c()),Re(f,1),f.m(n,null)):f=null)},i(y){d||(Re(f),d=!0)},o(y){Ve(f),d=!1},d(y){y&&B(n),b&&b.d(),v&&v.d(),S&&S.d(),~c&&C[c].d(),p=!1,u()}}}function zi(o,n,r){let i,s,c,f,d,p,u="loading",b=null,v=null,S=[],w={},C=null,T="",y="",L="",z=null,te=!0;Pr(async()=>{if(window.addEventListener("llm-status",Q=>{r(13,z=Q.detail),console.log("LLM Status:",z)}),console.log("App mounted, checking for electronAPI..."),console.log("window.electronAPI:",window.electronAPI),setTimeout(async()=>{if(!z&&window.electronAPI&&window.electronAPI.testOllamaConnection)try{const Q=await window.electronAPI.testOllamaConnection();r(13,z={connected:Q.success,message:Q.success?"Ollama connected successfully":`Ollama not available: ${Q.error||Q.message||"Connection failed"}`,host:Q.host||"localhost",port:Q.port||"11434",error:Q.error,suggestion:Q.suggestion})}catch(Q){r(13,z={connected:!1,message:`Failed to test Ollama connection: ${Q.message}`})}},1e3),window.electronAPI)try{window.electronAPI.getAppVersion&&(r(12,L=await window.electronAPI.getAppVersion()),console.log(`Application version: ${L}`)),r(4,f=new Dl(window.electronAPI)),await f.initialize(),r(0,d=new Wl),await d.initialize(),r(5,p=new Bl(window.electronAPI)),await p.initialize(),console.log("Initialization complete"),await $()}catch(Q){console.error("Initialization error:",Q),r(11,y=`Initialization error: ${Q.message}`)}else console.error("Electron API not available"),r(11,y="Electron API not available. Please run this application in Electron.")});async function $(){try{if(r(10,T="Loading database..."),r(7,v=f.getDefaultConfigPath()),r(6,b=await f.loadConfig(v)),b||(await f.createDefaultConfig(),r(6,b=await f.loadConfig(v))),!b||!f.validateConfig(b)){r(11,y="Invalid configuration file");return}await d.loadFromFile(b.databasePath,window.electronAPI),r(8,S=d.getTableNames()),r(1,u="tableManager"),r(10,T="")}catch(Q){r(11,y=`Error loading config: ${Q.message}`),console.error(Q)}}async function K(){d&&b&&await d.saveToFile(b.databasePath,window.electronAPI),d&&r(8,S=d.getTableNames()),x()}function x(){r(1,u="loading"),R()}async function R(){if(!b||!b.csvFiles||b.csvFiles.length===0){r(8,S=d.getTableNames()),S.length>0&&r(2,C=S[0]),r(1,u="viewer"),r(10,T=""),S.length>0&&(console.log("No CSV files to load, starting automatic command execution..."),setTimeout(async()=>{await ke()},200));return}r(10,T="Checking CSV files...");const Q=new Set(d.getTableNames());r(9,w={});let fe=0,Y=0;for(let me=0;me<b.csvFiles.length;me++){const oe=b.csvFiles[me],ae=Gn.getTableNameFromPath(oe);if(Q.has(ae)){console.log(`Table ${ae} already exists, skipping CSV file ${oe}`),Y++,r(9,w[ae]=oe,w);continue}r(10,T=`Loading ${oe}... (${me+1}/${b.csvFiles.length})`);try{const V=await window.electronAPI.readCsvFile(oe),{schema:re,data:Ae}=Gn.parseCSV(V);r(9,w[ae]=oe,w),d.createTable(ae,re),d.insertData(ae,re,Ae),fe++,Q.add(ae)}catch(V){console.error(`Error loading CSV file ${oe}:`,V),r(11,y=`Error loading ${oe}: ${V.message}`)}}if(fe>0&&(r(10,T="Saving database..."),await d.saveToFile(b.databasePath,window.electronAPI)),r(8,S=d.getTableNames()),S.length>0&&(r(2,C=S[0]),A()),Y>0){const me=`Loaded ${fe} file(s), skipped ${Y} file(s) (tables already exist)`;console.log(me),y||setTimeout(()=>{},100)}r(1,u="viewer"),r(10,T=""),!y&&S.length>0&&(console.log("CSV files loaded successfully, starting automatic command execution..."),setTimeout(async()=>{await ke()},200))}function G(){r(1,u="startup"),r(6,b=null),r(7,v=null)}function le(Q){var Y;const fe=(Y=Q.detail)==null?void 0:Y.table;fe&&(r(2,C=fe),A())}function A(){d&&C&&d.getTableSchema(C)}function j(){d&&(r(8,S=d.getTableNames()),S.length>0&&!S.includes(C)?(r(2,C=S[0]),A()):C&&A())}function ue(){u==="viewer"?r(1,u="logView"):u==="logView"&&r(1,u="viewer")}async function O(Q){const fe=Q.detail;if(!p)return;const Y=p.formatLogEntry(fe),me=await p.loadLog(),oe=me+(me?`
`:"")+Y;await p.saveLog(oe)}let N=[],J=0,ce=!1,_e=null,we=!1;async function Ce(){if(!window.electronAPI){r(3,N=[]),r(16,_e="Electron API not available"),r(28,we=!1);return}try{const fe=(await window.electronAPI.readCommandsFile()).split(`
`).map(Y=>Y.trim()).filter(Y=>Y.length>0&&!Y.startsWith("#")&&!Y.startsWith("["));r(3,N=fe),r(16,_e=null),r(28,we=!0),J>=N.length&&r(27,J=N.length),N.length===0&&r(16,_e="No commands found in commands.txt (empty file or only comments)")}catch(Q){console.error("Error loading commands:",Q),r(3,N=[]),r(16,_e=`Error reading commands.txt: ${Q.message}`),r(28,we=!1)}}async function ve(){if(!window.electronAPI||!d||!C)return r(11,y="Electron API, database, or table not available"),!1;if(ce||!i)return!1;r(15,ce=!0),r(11,y=""),r(16,_e=null);try{let Q=d.getTableSchema(C);if(!Q||Q.length===0)return r(11,y="Unable to get table schema"),r(15,ce=!1),!1;const fe=i;console.log(`Processing command ${J+1}/${N.length}: ${fe}`);let Y=null;try{const V=await window.electronAPI.getSqlForCommand(fe);V&&V.trim()!==""&&(Y=V.trim(),console.log(`Using existing SQL for command: ${Y}`))}catch(V){console.warn("Error checking for existing SQL:",V)}if(!Y)try{if(Y=await window.electronAPI.translateToSQL(fe,C,Q),!Y||Y.trim()==="")throw new Error("Empty SQL returned from translation");console.log(`Generated new SQL for command: ${Y}`)}catch(V){const re=V.message;console.error(`Error translating command ${J+1}:`,re);const Ae=new Date().toISOString().replace("T"," ").substring(0,19);return await O({detail:{naturalLanguage:fe,sql:null,error:re,result:null,timestamp:Ae}}),r(11,y=`Error translating command ${J+1} ("${fe}"): ${re}`),r(15,ce=!1),!1}let me=null,oe=null;try{me=d.executeSQL(Y),b&&me.type==="modify"&&(await d.saveToFile(b.databasePath,window.electronAPI),j(),A())}catch(V){oe=V.message||"SQL execution failed",console.error(`Error executing command ${J+1}:`,oe);const re=new Date().toISOString().replace("T"," ").substring(0,19);return await O({detail:{naturalLanguage:fe,sql:Y,error:oe,result:null,timestamp:re}}),r(11,y=`Error executing command ${J+1} ("${fe}"): ${oe}`),r(15,ce=!1),!1}const ae=new Date().toISOString().replace("T"," ").substring(0,19);await O({detail:{naturalLanguage:fe,sql:Y,error:null,result:me?me.type==="select"?`Returned ${me.rowCount} row(s)`:`Affected ${me.affectedRows} row(s)`:null,timestamp:ae}});try{const V=await window.electronAPI.getSqlForCommand(fe);!V||V.trim()===""?(await window.electronAPI.insertSqlIntoCommandsFile(fe,Y),console.log(`SQL inserted into commands.txt after command: ${fe}`)):console.log("SQL already exists for command, skipping insertion"),await Ce()}catch(V){console.error("Error inserting SQL into commands.txt:",V)}return r(27,J=J+1),console.log(`Command ${J}/${N.length} completed, moving to next`),!0}catch(Q){return console.error("Error executing command:",Q),r(11,y=`Error executing command: ${Q.message}`),!1}finally{r(15,ce=!1)}}async function ke(){if(!window.electronAPI||!d||!C){console.log("Cannot execute commands: prerequisites not met");return}if(we||(console.log("Waiting for commands to load..."),await Ce()),await new Promise(Q=>setTimeout(Q,100)),N.length===0){console.log("No commands to execute");return}for(console.log(`Starting automatic execution of ${N.length} command(s)...`),r(10,T=`Executing commands... (${J+1}/${N.length})`);J<N.length&&!y;){if(!await ve()){console.log("Command execution stopped");break}J<N.length?r(10,T=`Executing commands... (${J+1}/${N.length})`):r(10,T=`All commands completed (${N.length}/${N.length})`),await new Promise(fe=>setTimeout(fe,50))}r(10,T=""),J>=N.length?console.log("All commands executed successfully"):y&&console.log(`Command execution stopped due to error: ${y}`)}const qe=()=>{d&&d.close()},Oe=()=>r(14,te=!1),Ee=()=>r(11,y="");return o.$$.update=()=>{o.$$.dirty[0]&134217736&&r(17,i=J<N.length?N[J]:null),o.$$.dirty[0]&134217736&&r(19,s=J<N.length),o.$$.dirty[0]&134217736&&r(18,c=N.length>0?`${J+1} / ${N.length}`:"0 / 0"),o.$$.dirty[0]&268435462&&u==="viewer"&&C&&window.electronAPI&&!we&&Ce(),o.$$.dirty[0]&5&&C&&d&&A()},[d,u,C,N,f,p,b,v,S,w,T,y,L,z,te,ce,_e,i,c,s,K,x,G,le,j,ue,ve,J,we,qe,Oe,Ee]}class Ri extends lt{constructor(n){super(),rt(this,n,zi,Ni,et,{},null,[-1,-1])}}new Ri({target:document.getElementById("app")});
